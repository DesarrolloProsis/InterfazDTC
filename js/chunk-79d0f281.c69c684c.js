(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79d0f281"],{7630:function(t,a,e){},b42d:function(t,a,e){"use strict";e("7630")},cf96:function(t,a,e){"use strict";e.r(a);e("99af"),e("b0c0"),e("d81d"),e("4de4"),e("d3b7");var s=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"flex justify-center font-titulo"},[a("div",{staticClass:"grid gap-4 grid-cols-1 py-3 px-3"},[a("HeaderGenerico",{attrs:{titulo:"Encargados de Plaza",tipo:"ENC"},on:{"filtrar-encargados":t.filtrar_encargados,"buscar-encargado":t.guardar_palabra_busqueda,"limpiar-encargados":t.limpiar_encargados}}),a("button",{staticClass:"botonIconBuscar justify-center mb-6 -mt-4",on:{click:function(a){return t.agregarUsuario()}}},[a("font-awesome-icon",{staticClass:"text-blue-800 h-7 w-5 mr-2",attrs:{icon:"fa-solid fa-plus"}}),a("span",{},[t._v("Agregar Nuevo Encargado")])],1),a("h1",{staticClass:"text-4xl font-bold text-gray-800 text-center mb-8 hidden"},[t._v("Encargados de Plaza")]),a("div",{staticClass:"divtabla sm:mb-24 mb-10 -mt-8",staticStyle:{height:"508px"}},[a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.listaEncargados,(function(e,s){return a("tr",{key:s,staticClass:"h-12 text-gray-900 text-sm text-center",class:{hidden:1!=e.statusAdmin}},[a("td",{staticClass:"cuerpoTable"},[t._v(t._s("".concat(e.name," ").concat(e.lastName1," ").concat(e.lastName2)))]),a("td",{staticClass:"cuerpoTable"},[12==e.idRoll?a("span",[t._v("Encargado de Turno")]):t._e(),11==e.idRoll?a("span",[t._v("Administrador de Plaza")]):t._e()]),a("td",{staticClass:"cuerpoTable sm:hidden"},[t._v(t._s(e.mail))]),a("td",{staticClass:"cuerpoTable"},[t._v(t._s(e.squareName))]),a("td",{staticClass:"cuerpoTable"},[a("multiselect",{attrs:{placeholder:"Seleccione una Accion",label:"title","track-by":"title",options:t.opticones_select_acciones(e),"option-height":200,"custom-label":t.customLabel,"show-labels":!1},on:{close:function(a){return t.acciones_mapper(e)}},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[a("div",{staticClass:"inline-flex"},[a("img",{staticClass:"mr-5",attrs:{src:e.option.img,width:"15",height:"15"}}),a("span",{staticClass:"option__title"},[t._v(t._s(e.option.title))])])]}},{key:"option",fn:function(e){return[a("div",{staticClass:"option__desc"},[a("span",{staticClass:"option__title inline-flex"},[a("font-awesome-icon",{staticClass:"text-blue-800 w-4 h-4 mr-2",attrs:{icon:e.option.img}}),t._v(" "+t._s(e.option.title))],1)])]}}],null,!0),model:{value:t.value,callback:function(a){t.value=a},expression:"value"}})],1)])})),0)])])],1),a("div",{staticClass:"sticky inset-0",class:{"modal-container":t.modalAgregar}},[t.modalAgregar?a("div",{staticClass:"rounded-lg justify-center border absolute inset-x-0 bg-white border-gray-400 w-69 sm:w-66 mx-auto px-12 py-10 shadow-2xl lg:mt-66 xl:mt-48"},[a("p",{staticClass:"text-gray-900 font-bold text-2xl mb-8 sm:text-sm sm:text-center text-center"},[t._v("Agregar Encargado de Plaza")]),a("div",{staticClass:"grid grid-cols-2 mt-2"},[a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 sm:-ml-6"},[t._v("Nombre(s)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.insertAdmin.nombre,expression:"insertAdmin.nombre"}],staticClass:"w-full bg-white border-gray-400",attrs:{type:"text"},domProps:{value:t.insertAdmin.nombre},on:{input:function(a){a.target.composing||t.$set(t.insertAdmin,"nombre",a.target.value)}}}),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Apellido Paterno")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.insertAdmin.apellidoP,expression:"insertAdmin.apellidoP"}],staticClass:"w-full bg-white border-gray-400 mt-2",attrs:{type:"text"},domProps:{value:t.insertAdmin.apellidoP},on:{input:function(a){a.target.composing||t.$set(t.insertAdmin,"apellidoP",a.target.value)}}}),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Apellido Materno")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.insertAdmin.apellidoM,expression:"insertAdmin.apellidoM"}],staticClass:"w-full bg-white border-gray-400 mt-2",attrs:{type:"text"},domProps:{value:t.insertAdmin.apellidoM},on:{input:function(a){a.target.composing||t.$set(t.insertAdmin,"apellidoM",a.target.value)}}}),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Plaza")]),a("div",{staticClass:"sm:-ml-20"},[a("SelectPlaza",{staticClass:"mt-2",attrs:{forma:"encargado"}})],1),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Correo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.insertAdmin.mail,expression:"insertAdmin.mail"}],staticClass:"w-full bg-white border-gray-400 mt-2 sm:-ml-20 sm:w-48",attrs:{type:"text"},domProps:{value:t.insertAdmin.mail},on:{input:function(a){a.target.composing||t.$set(t.insertAdmin,"mail",a.target.value)}}}),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Rol")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.insertAdmin.tipoencargado,expression:"insertAdmin.tipoencargado"}],staticClass:"input mx-auto border-none w-48 sm:w-62 md:w-48 mt-2",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.insertAdmin,"tipoencargado",a.target.multiple?e:e[0])}}},[a("option",{attrs:{value:""}}),a("option",{attrs:{value:"11"}},[t._v("Administrador de plaza")]),a("option",{attrs:{value:"12"}},[t._v("Encargado de Turno")])])]),a("div",{staticClass:"mt-5 text-center ml-6"},[a("button",{staticClass:"botonIconBuscar font-boton sm:-ml-24",on:{click:function(a){return t.confirmarAgregar()}}},[t._v("Guardar")]),a("button",{staticClass:"botonIconCancelar font-boton sm:-mr-20",on:{click:function(a){t.modalAgregar=!1}}},[t._v("Cancelar")])])]):t._e()]),a("div",{staticClass:"sticky inset-0",class:{"modal-container":t.modalEliminar}},[t.modalEliminar?a("div",{staticClass:"rounded-lg justify-center border absolute inset-x-0 bg-white border-gray-400 w-69 sm:w-66 mx-auto px-12 py-10 shadow-2xl mt-68"},[a("p",{staticClass:"text-gray-900 font-thin text-md sm:text-sm sm:text-center"},[t._v("Seguro que quiere eliminar a: ")]),a("p",{staticClass:"text-center font-bold"},[t._v(t._s("".concat(t.infoDelate.name," ").concat(t.infoDelate.lastName1," ").concat(t.infoDelate.lastName2)))]),a("div",{staticClass:"mt-5 text-center"},[a("button",{staticClass:"botonIconCrear font-boton",on:{click:function(a){return t.borrar()}}},[t._v("Si")]),a("button",{staticClass:"botonIconCancelar font-boton",on:{click:function(a){t.modalEliminar=!1}}},[t._v("No")])])]):t._e()]),a("div",{staticClass:"sticky inset-0",class:{"modal-container":t.modalEditar}},[t.modalEditar?a("div",{staticClass:"rounded-lg justify-center border absolute inset-x-0 bg-white border-gray-400 w-69 sm:w-66 mx-auto px-12 py-10 shadow-2xl mt-64"},[a("p",{staticClass:"text-gray-900 font-bold text-md sm:text-sm sm:mb-6 sm:text-center text-center"},[t._v("Editar Encargado de Plaza")]),a("div",{staticClass:"grid grid-cols-2 mt-2"},[a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 sm:-ml-6"},[t._v("Nombre(s)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editUser.name,expression:"editUser.name"}],staticClass:"w-full bg-white border-gray-400 is_valid",attrs:{type:"text"},domProps:{value:t.editUser.name},on:{input:function(a){a.target.composing||t.$set(t.editUser,"name",a.target.value)}}}),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Apellido Paterno")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editUser.lastName1,expression:"editUser.lastName1"}],staticClass:"w-full bg-white border-gray-400 mt-2 is_valid",attrs:{type:"text"},domProps:{value:t.editUser.lastName1},on:{input:function(a){a.target.composing||t.$set(t.editUser,"lastName1",a.target.value)}}}),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Apellido Materno")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editUser.lastName2,expression:"editUser.lastName2"}],staticClass:"w-full bg-white border-gray-400 mt-2 is_valid",attrs:{type:"text"},domProps:{value:t.editUser.lastName2},on:{input:function(a){a.target.composing||t.$set(t.editUser,"lastName2",a.target.value)}}}),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Correo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editUser.mail,expression:"editUser.mail"}],staticClass:"w-full bg-white border-gray-400 mt-2 is_valid sm:w-48 sm:-ml-20",attrs:{type:"text"},domProps:{value:t.editUser.mail},on:{input:function(a){a.target.composing||t.$set(t.editUser,"mail",a.target.value)}}}),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Plaza")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editUser.plaza,expression:"editUser.plaza"}],staticClass:"w-full bg-white hover:bg-white hover:border-none focus:bg-white border-none shadow-none mt-2",attrs:{type:"text",readonly:""},domProps:{value:t.editUser.plaza},on:{input:function(a){a.target.composing||t.$set(t.editUser,"plaza",a.target.value)}}}),a("p",{staticClass:"text-sm mb-1 font-semibold text-gray-700 mt-2 sm:-ml-6"},[t._v("Rol")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editUser.tipoencargado,expression:"editUser.tipoencargado"}],staticClass:"input mx-auto border-none w-48 sm:w-62 md:w-48 mt-2",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.editUser,"tipoencargado",a.target.multiple?e:e[0])}}},[a("option",{attrs:{value:""}}),a("option",{attrs:{value:"11"}},[t._v("Administrador de plaza")]),a("option",{attrs:{value:"12"}},[t._v("Encargado de Turno")])])]),a("div",{staticClass:"mt-5 text-center ml-6"},[a("button",{staticClass:"botonIconBuscar font-boton sm:-ml-24",on:{click:t.actualizarUsuario}},[t._v("Guardar")]),a("button",{staticClass:"botonIconCancelar font-boton sm:-mr-20",on:{click:function(a){t.modalEditar=!1}}},[t._v("Cancelar")])])]):t._e()])])])},i=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",{staticClass:"text-md text-gray-400 font-normal bg-blue-800"},[a("th",{staticClass:"cabeceraTable font-medium"},[t._v("Nombre")]),a("th",{staticClass:"cabeceraTable font-medium"},[t._v("Rol")]),a("th",{staticClass:"cabeceraTable font-medium sm:hidden"},[t._v("Correo")]),a("th",{staticClass:"cabeceraTable font-medium"},[t._v("Plaza")]),a("th",{staticClass:"cabeceraTable font-medium"},[t._v("Acciones")])])])}],o=(e("07ac"),e("e9c4"),e("25f0"),e("caad"),e("2532"),e("74b9")),r=e("4201"),n=e("d101"),l=e("11b3"),d=e("ed5d"),m="http://201.99.110.3:86/api",c={name:"EncargadosDePlaza",components:{HeaderGenerico:r["a"],SelectPlaza:d["a"]},data:function(){return{listaencargadosCompleta:[],listaencargadosFilrada:[],listaEncargados:[],modalEliminar:!1,modalEditar:!1,modalAgregar:!1,infoDelate:{},editUser:{userId:"",name:"",lastName1:"",lastName2:"",plaza:"",plazaId:"",mail:"",tipoencargado:""},insertAdmin:{nombre:"",apellidoP:"",apellidoM:"",mail:"",tipoencargado:"",status:!0},value:"",rollId:this.$store.state.Login.cookiesUser.rollId}},beforeMount:function(){var t=this;this.typeUser=this.$store.state.Login.cookiesUser.rollId,this.$http.get("".concat(m,"/SquaresCatalog/Admins/").concat(this.$store.state.Login.cookiesUser.userId)).then((function(a){t.listaencargadosCompleta=a.data.result,t.listaencargadosFilrada=t.listaencargadosCompleta,t.listaEncargados=t.listaencargadosFilrada,console.log(t.listaEncargados)}))},methods:{actualizarFiltro:function(){var t=this;this.$http.get("".concat(m,"/SquaresCatalog/Admins/").concat(this.$store.state.Login.cookiesUser.userId)).then((function(a){t.listaencargadosCompleta=a.data.result,t.listaencargadosFilrada=t.listaencargadosCompleta,t.listaEncargados=t.listaencargadosFilrada}))},filtrar_encargados:function(t){this.listaEncargados=n["a"].filtro_encargados_plaza(this.listaencargadosCompleta,t.plaza,t.nombre)},limpiar_encargados:function(){this.listaEncargados=this.listaencargadosCompleta,l["a"].$emit("Limpiar-SelectPlaza")},agregarUsuario:function(){this.modalAgregar=!0,this.insertAdmin.nombre="",this.insertAdmin.apellidoP="",this.insertAdmin.apellidoM="",this.insertAdmin.mail="",this.insertAdmin.tipoencargado=""},confirmarAgregar:function(){var t=this,a=Object.values(this.insertAdmin);if(a.some((function(t){return""==t})))this.$notify.warning({title:"Ups!",msg:"NO SE HA LLEADO ALGUNO DE LOS CAMPOS",position:"bottom right",styles:{height:100,width:500}});else{this.modalAgregar=!1,this.insertAdmin["plaza"]=this.$store.state.Login.plazaSelecionada.numeroPlaza;var e={Nombre:this.insertAdmin.nombre,ApellidoP:this.insertAdmin.apellidoP,ApellidoM:this.insertAdmin.apellidoM,Mail:this.insertAdmin.mail,IdRoll:parseInt(this.insertAdmin.tipoencargado),Plaza:this.insertAdmin["plaza"]};this.$http.post("".concat(m,"/SquaresCatalog/InsertAdmin"),e).then((function(){t.actualziar_header_plazas(),t.actualizarFiltro(),t.$store.dispatch("Login/BUSCAR_ADMIN_PLAZA")}))}},actualziar_header_plazas:function(){var t=this,a=this.$store.state.Login.cookiesUser.userId;this.$http.post("".concat(m,"/login/Cookie"),{userId:a}).then((function(e){var s=e.data.result.cookie.map((function(t){return{refereciaPlaza:t.referenceSquare,administradorId:t.adminSquareId,numeroPlaza:t.squareCatalogId,plazaNombre:t.squareName,plazaAdminNombre:t.plazaAdministrador,statusAdmin:t.statusAdmin}}));t.$store.commit("Login/LISTA_PLAZAS_USUARIO_COOKIES_MUTATION",s),t.$http.post("".concat(m,"/login/LoginInfo"),{userId:a}).then((function(a){console.log(a),t.$store.commit("Login/LISTA_HEADER_PLAZA_USER_MUTATION",a.data.result.loginList),t.$store.commit("Header/LISTA_HEADERS_MUTATION",a.data.result.loginList);var e=t.$store.state.Login.cookiesUser;localStorage.setItem("cookiesUser",JSON.stringify(e))}))}))},confimaBorrar:function(t){this.infoDelate=t,this.modalEliminar=!0},borrar:function(){var t=this;this.modalEliminar=!1;var a={status:!1,adminId:this.infoDelate.adminSquareId};this.$http.put("".concat(m,"/SquaresCatalog/UpdateAdminStatus"),a).then((function(){t.actualziar_header_plazas(),t.actualizarFiltro()}))},editarUsuario:function(t){o["a"].actualizar_plaza(t.adminSquareId),console.log(),this.editUser.userId=t.adminSquareId,this.editUser.name=t.name,this.editUser.lastName1=t.lastName1,this.editUser.lastName2=t.lastName2,this.editUser.plaza=t.squareName,this.editUser.plazaId=t.squareCatalogId,this.editUser.mail=t.mail,this.editUser.tipoencargado=t.idRoll.toString(),this.modalEditar=!0},actualizarUsuario:function(){var t=this,a=Object.values(this.editUser);if(a.some((function(t){return""==t})))this.$notify.warning({title:"Ups!",msg:"NO SE HA LLEADO ALGUNO DE LOS CAMPOS",position:"bottom right",styles:{height:100,width:500}});else{var e={nombre:this.editUser.name,apellidoP:this.editUser.lastName1,apellidoM:this.editUser.lastName2,mail:this.editUser.mail,plaza:this.editUser.plazaId,adminId:this.editUser.userId,IdRoll:parseInt(this.editUser.tipoencargado),userId:this.$store.state.Login.cookiesUser.userId};console.log(e),this.$http.put("".concat(m,"/SquaresCatalog/UpdateAdmin"),e).then((function(){t.actualizarFiltro(),t.actualziar_header_plazas()})),this.modalEditar=!1}},guardar_palabra_busqueda:function(t){if(""!=t){var a=this.listaencargadosFilrada.filter((function(a){return a.name.toUpperCase().includes(t.toUpperCase())||a.lastName1.toUpperCase().includes(t.toUpperCase())||a.lastName2.toUpperCase().includes(t.toUpperCase())}));this.listaEncargados=a}else this.listaEncargados=this.listaencargadosCompleta},customLabel:function(t){var a=t.title;return"".concat(a)},acciones_mapper:function(t){"Borrar"==this.value.title&&this.confimaBorrar(t),"Editar"==this.value.title&&(this.editarUsuario(t),this.nombreOriginal=t.name+" "+t.lastName1+" "+t.lastName2),this.value=""},opticones_select_acciones:function(){var t=[{title:"Borrar",img:"fa-solid fa-trash"},{title:"Editar",img:"fa-solid fa-pen-to-square"}],a=[];return 2==this.rollId||4==this.rollId||5==this.rollId||8==this.rollId||10==this.rollId?(a.push(t[0]),a.push(t[1])):a.push(t[1]),a}}},u=c,p=(e("b42d"),e("2877")),g=Object(p["a"])(u,s,i,!1,null,null,null);a["default"]=g.exports}}]);
//# sourceMappingURL=chunk-79d0f281.c69c684c.js.map