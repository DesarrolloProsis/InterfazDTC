(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6ad9"],{"1dd4":function(e,t,a){"use strict";a.r(t);a("d3b7"),a("25f0"),a("b0c0"),a("d81d"),a("4de4");var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container mx-auto font-titulo"},[t("HeaderGenerico",{attrs:{titulo:"ACTA ADMINISTRATIVA INFORMATIVA (ENTREGA-RECEPCIÓN)",subtitulo:"FORMATO 1-B",tipo:"anexo1A"}}),t("div",{staticClass:"mt-1 mb-1 text-sm flex flex-col leading-7 sm:block sm:p-1 sm:pr-2 sm:text-xs border sm:m-1 shadow-md md:w-auto text-justify p-6"},[e._m(0),t("p",[e._v(" REALIZADO AL EQUIPO DE CONTROL DE TRANSITO DE "),t("label",{staticClass:"font-bold"},[e._v("CARRIL "+e._s(this.nombrecarriles.toString()))]),e._v(", EN LA PLAZA DE COBRO "),t("label",{staticClass:"font-bold"},[e._v("No. "+e._s(this.plazadtc[0].plaza.toUpperCase())+",")]),e._v(" PERTENECIENTE A LA "),t("label",{staticClass:"font-bold"},[e._v(e._s(this.plazadtc[0].regionalCoordination.toUpperCase()))])]),t("p",[e._v(" EN LA CIUDAD DE "),t("label",{staticClass:"font-bold ml-1 uppercase"},[e._v(e._s(this.ciudad[0].ciudad)+", "+e._s(this.ciudad[0].estado))]),e._v(", SIENDO "),t("datetime",{staticClass:"ml-2 inline-flex",attrs:{"use12-hour":"",type:"datetime",name:"HoraInicio","input-class":"inputanexo"},model:{value:e.fechaapertura,callback:function(t){e.fechaapertura=t},expression:"fechaapertura"}}),e._v(" EL "),t("label",{staticClass:"font-bold"},[e._v(e._s(this.plazadtc[0].adminName.toUpperCase()))]),e._v(" ADMINISTRADOR DE LA PLAZA DE COBRO, EL"),t("label",{staticClass:"font-bold"},[e._v(" "+e._s(this.lista_DTC_Filtrada[0].name.toUpperCase()))]),e._v(", TÉCNICO REPRESENTANTE DE LA EMPRESA "),t("label",{staticClass:"font-bold"},[e._v("PROYECTOS Y SISTEMAS INFORMATICOS S.A. DE C.V.")]),e._v(" TENIENDO COMO TESTIGOS DE ASISTENCIA A: ")],1),t("div",{staticClass:"flex w-full gap-4 p-2"},[t("div",{staticClass:"inline-block relative w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.testigo1,expression:"testigo1"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.testigo1=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Selecciona a un testigo")]),e._l(e.testigoscompleto,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2),t("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])]),t("div",{staticClass:"inline-block relative w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.testigo2,expression:"testigo2"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.testigo2=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Selecciona a un testigo")]),e._l(e.testigoscompleto,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2),t("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])]),t("p",{},[e._v(" PARA HACER CONSTAR QUE LA SUSTITUCIÓN DE COMPONENTES DEL EQUIPO DEL "),t("span",{staticClass:"font-bold"},[e._v("CARRIL "+e._s(this.nombrecarriles.toString()))]),e._v(", DE ACUERDO A LA SOLICITUD "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.solciitud,expression:"solciitud"}],staticClass:"inputanexo",attrs:{type:"text",placeholder:"URC-SOC.2314-2021"},domProps:{value:e.solciitud},on:{input:function(t){t.target.composing||(e.solciitud=t.target.value)}}}),e._v(", DE FECHA "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.solicitudfechainicio,expression:"solicitudfechainicio"}],staticClass:"inline-flex",attrs:{type:"date","input-class":"inputanexo"},domProps:{value:e.solicitudfechainicio},on:{input:function(t){t.target.composing||(e.solicitudfechainicio=t.target.value)}}}),e._v(", Y AUTORIZADA EN OFICIO "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.foliooficio,expression:"foliooficio"}],staticClass:"inputanexo",attrs:{type:"text",placeholder:"DO/3741/2021"},domProps:{value:e.foliooficio},on:{input:function(t){t.target.composing||(e.foliooficio=t.target.value)}}}),e._v(" DE FECHA "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fechaoficioinicio,expression:"fechaoficioinicio"}],staticClass:"inline-flex",attrs:{type:"date","input-class":"inputanexo"},domProps:{value:e.fechaoficioinicio},on:{input:function(t){t.target.composing||(e.fechaoficioinicio=t.target.value)}}}),e._v(" POR LA GERENCIA DE MANTENIMIENTO Y MODERNIZACIÓN DE EQUIPOS DE PEAJE; PARA CUYO EFECTÓ FUÉ NECESARIO REPONER EN FECHA "),t("datetime",{staticClass:"inline-flex",attrs:{"input-class":"inputanexo",disabled:""},model:{value:e.fechaapertura,callback:function(t){e.fechaapertura=t},expression:"fechaapertura"}}),e._v(" LAS PARTES QUE A CONTINUACIÓN SE DETALLAN. ")],1),t("p",{staticClass:"text-sm"},[e._v(" LOS EQUIPOS/COMPONENTES DAÑADOS EL ADMINISTRADOR DEBERÁ IDENTIFICAR Y EMBALAR, ENVIANDOLOS EN UN PERÍODO DE 5 DÍAS MÁXIMO AL ÁLMACÉN DE LA COORDINACION REGIONAL POR OFICIO, PARA SU DESTINO FINAL CONFORME LA NORMA CAPUFE ")]),t("p",{staticClass:"text-sm"},[e._v(" LOS TRABAJOS, INSTALACIÓN Y OPERACIÓN DE LA PLAZA DE COBRO QUEDAN A ENTERA SATISFACCIÓN DEL ADMINISTRADOR DE LA PLAZA DE COBRO Y/O ENCARGADO DE TURNO. ")]),t("h3",{staticClass:"font-bold text-sm mt-2"},[e._v("COMPONENTES Y/O REFACCIONES DAÑADAS:")]),t("TablaEquipoMalo",{attrs:{listaComponentes:e.listaComponentes,Editar:!1,dateSinester:e.datosSinester.SinisterDate},on:{listacarriles:e.onagregarcomponentes,listanombrecom:e.onagregarnombrescomponentes,componentesfinales:e.agregarcomponenteseditados,componentesmalos:e.agregarcomponentesmalos}}),t("p",{staticClass:"text-sm mb-2 uppercase"},[e._v("Supervisor de plaza "),t("span",{staticClass:"text-sm font-bold"},[e._v(e._s(this.lista_DTC_Filtrada[0].name))])]),t("div",{staticClass:"inline-flex mt-4"},[t("p",{staticClass:"mr-2"},[e._v("SE CIERRA LA PRESENTE ACTA EN FECHA")]),t("datetime",{staticClass:"inline-flex",attrs:{"input-class":"inputanexo",disabled:""},model:{value:e.fechaapertura,callback:function(t){e.fechaapertura=t},expression:"fechaapertura"}}),t("p",{staticClass:"ml-2"},[e._v(",SIENDO LAS")]),t("datetime",{staticClass:"inline-flex ml-2",attrs:{type:"time","input-class":"inputanexo"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),t("div",{staticClass:"mt-4"},[t("ValidationObserver",{ref:"observer"},[t("div",{staticClass:"w-full"},[t("ValidationProvider",{attrs:{name:"ComentarioCalendario",rules:"max:500"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.errors;return[t("span",{staticClass:"text-center font-titulo font-semibold uppercase sm:flex sm:flex-col md:grid lg:grid"},[e._v("Observaciones para reporte fotografico equipo nuevo")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comentario,expression:"comentario"}],staticClass:"block container placeholder-gray-500 textAreaCalendario sm:mx-auto md:mx-auto lg:mx-auto",attrs:{placeholder:"Inserte observaciones del reporte fotografico",name:"ComentarioCalendario",maxlength:e.limite},domProps:{value:e.comentario},on:{input:function(t){t.target.composing||(e.comentario=t.target.value)}}}),e._v(" "),t("span",{staticClass:"text-red-600 text-xs block"},[e._v(e._s(o[0]))]),t("span",{staticClass:"text-xs text-gray-500"},[e._v(e._s(e.restante)+"/500")])]}}])})],1)])],1),t("div",{staticClass:"p-2 mb-10 sm:mb-18 flex justify-center w-full"},[t("button",{staticClass:"botonIconCrear",class:{CrearDeshabilitado:e.modalLoading,"bg-gray-300 hover:text-black border-black hover:border-black cursor-not-allowed opacity-50":e.modalLoading,"hover:bg-gray-300 hove:border-black":e.modalLoading},attrs:{disabled:e.modalLoading},on:{click:function(t){return e.validacionanexo()}}},[t("img",{staticClass:"mr-2",attrs:{src:a("1d89"),width:"35",height:"35"}}),t("span",[e._v("Generar acta 1-B")])])])],1),t("Modal",{attrs:{showing:e.modalImage},on:{close:function(t){e.modalImage=!1}}},[t("div",{staticClass:"justify-center text-center block"},[t("ImagenesAnexo",{attrs:{reporteDataInsertada:!0,tipo:"Anexo",referenceNumber:this.lista_DTC_Filtrada[0].referenceNumber,maximofotosanexo:this.double,referenciaAnexo:this.referenciaAnexo,subversionAnexo:!1,editar:!1},on:{"bloquear-boton-diagnostico":e.bloquear_boton_anexo_img}}),t("button",{staticClass:"botonIconCrear mt-6",class:{"bg-gray-300 hover:text-black border-black hover:border-black cursor-not-allowed opacity-50":e.blockBotonModal,"hover:bg-gray-300 hove:border-black":e.blockBotonModal},attrs:{disabled:e.blockBotonModal},on:{click:function(t){return e.pasarinsertaranexo()}}},[t("img",{staticClass:"mr-2",attrs:{src:a("1d89"),width:"35",height:"35"}}),t("span",[e._v("Generar Acta 1-B")])])],1)]),t("Modal",{attrs:{showing:e.modalvalidacionanexo},on:{close:function(t){e.modalvalidacionanexo=!1}}},[t("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{staticClass:"sm:flex sm:items-start"},[t("div",{staticClass:"w-12 mx-auto flex-shrink-0 flex items-center justify-center h-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[t("ExclamationIcon",{staticClass:"h-10 w-10 text-red-600",attrs:{"aria-hidden":"true"}})],1),t("h1",{staticClass:"text-xl text-center font-bold"},[e._v("NO SE PUEDE GENERAR EL ACTA")]),t("div",{staticClass:"text-justify mt-3 sm:mt-0 sm:ml-4 sm:text-left"},[t("div",{staticClass:"mt-2"},[t("p",{},[e._v("Por las siguientes razones no se puede generar el acta:")])]),t("div",[t("ul",{staticClass:"mt-3 list-disc list-inside text-justify"},e._l(e.errores,(function(a){return t("li",{key:a},[e._v(e._s(a))])})),0)])])])]),t("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.limpiarvalidacion()}}},[e._v("Continuar")])])]),t("Modal",{attrs:{showing:e.modalconfirmacionanexo},on:{close:function(t){e.modalconfirmacionanexo=!1}}},[t("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{staticClass:"sm:flex sm:items-start"},[t("div",{staticClass:"w-12 mx-auto flex-shrink-0 flex items-center justify-center h-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[t("CheckCircleIcon",{staticClass:"h-10 w-10 text-green-600",attrs:{"aria-hidden":"true"}})],1),t("h1",{staticClass:"text-xl text-center font-bold"},[e._v("DATOS COMPLETOS")]),t("div",{staticClass:"text-justify mt-3 sm:mt-0 sm:ml-4 sm:text-left"},[t("div",{staticClass:"mt-2"},[t("p",{},[e._v("los datos de tu anexo son los siguientes:")])]),t("div",[t("ul",{staticClass:"mt-3 list-disc list-inside text-justify"},[t("li",[e._v("DTC: "+e._s(this.lista_DTC_Filtrada[0].referenceNumber))]),t("li",[e._v("Fecha de Apertura: "+e._s(this.fechaaperturaformateada))]),t("li",[e._v("Solicitud: "+e._s(this.solciitud))]),t("li",[e._v("Fecha de solicitud: "+e._s(this.fechasolicitudformateada))]),t("li",[e._v("Oficio: "+e._s(this.foliooficio))]),t("li",[e._v("Fecha Oficio:"+e._s(this.fechaoficioformateada))])])])])])]),t("div",{staticClass:"flex gap-4 bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.insertaranexo()}}},[e._v("Confirmar")]),t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-500 text-base font-medium text-white hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.cancelaranexo()}}},[e._v("Cancelar")])])]),t("Modal",{attrs:{showing:e.modaldescarga},on:{close:function(t){e.modaldescarga=!1}}},[t("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{staticClass:"sm:flex sm:items-start"},[t("div",{staticClass:"w-12 mx-auto flex-shrink-0 flex items-center justify-center h-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[t("DownloadIcon",{staticClass:"h-10 w-10 text-blue-600",attrs:{"aria-hidden":"true"}})],1),t("h1",{staticClass:"text-xl text-center font-bold"},[e._v("SE GENERO EL ACTA DEL DTC CON REFERENCIA "),t("b",[e._v(e._s(this.lista_DTC_Filtrada[0].referenceNumber))])])])]),t("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.saliranexos()}}},[e._v("Regresar al menu principal")])])]),t("Spinner",{attrs:{modalLoading:e.modalLoading}})],1)},s=[function(){var e=this,t=e._self._c;return t("p",{},[e._v("SE LEVANTA LA PRESENTE ACTA, PARA HACER CONSTAR LA SUSTITUCIÓN DE COMPONENTES "),t("label",{staticClass:"font-bold"},[e._v("POR FÍN DE VIDA ÚTIL/REUBICACIÓN/ACONDICIONAMIENTO, ")])])}],i=a("c7eb"),n=a("1da1"),r=(a("99af"),a("159b"),a("a434"),a("4201")),c=a("9048"),l=a("ccc9"),u=a("859b"),d=a("d101"),m=a("a374"),f=a("ddc6"),p=a("c1df"),h=a.n(p),v=a("225c"),g="http://201.99.110.3:86/api",b={name:"Anexo1-A",components:{HeaderGenerico:r["a"],TablaEquipoMalo:c["a"],Datetime:u["Datetime"],ImagenesAnexo:l["a"],Modal:m["a"],ExclamationIcon:f["c"],CheckCircleIcon:f["a"],DownloadIcon:f["b"],Spinner:v["a"]},data:function(){return{datosSinester:{ReferenceNumber:"",SinisterNumber:"",ReportNumber:"",SinisterDate:"",FailureDate:"",FailureNumber:"",ShippingElaboracionDate:"",Diagnosis:"",Observation:"",TypeDescriptionId:1,UserId:null,AgremmentInfoId:null,Descripcion:null,Observaciones:null},listaComponentes:[],fechaSiniestoEdit:!1,sizeSmall:!1,boolCambiarPlaza:!1,fecha_validacion:"",modalReferencia:!1,arrayReference:[],referenceSelected:"",tipoPlazaSelect:"",testigo1:"",testigo2:"",listaSupervisor:[],listaTestigos:[],plazadtc:[],nombrecarriles:[],testigoscompleto:[],componentesfinaleseditados:[],componentesmalos:[],componentesaenviar:[],fechaapertura:"",foliooficio:"",fechaoficioinicio:"",blockBotonModal:!0,modalImage:!1,modalLoading:!1,solciitud:"",solicitudfechainicio:"",modalvalidacionanexo:!1,errores:[],vfechaapertura:!1,vfechacierre:!1,vtestigo1:!1,vtestigo2:!1,vsuperior:!1,modalconfirmacionanexo:!1,modaldescarga:!1,fechaaperturaformateada:"",fechacierreformateada:"",fechasolicitudformateada:"",fechaoficioformateada:"",horacierre:"",fechacierre:"",comentario:"",numerodefotos:0,limite:500,ciudad:[],referenciaAnexo:"",index:[]}},created:function(){this.SupervisorDtc(),this.TestigosDtc(),this.filtro_dtc()},methods:{filtro_dtc:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a,o,s,n,r,c,l,u,m,f;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.params.referencenumber,t.prev=1,t.next=4,d["a"].filtrarDTC(e.filtroVista,"","",a,void 0,!1,void 0);case 4:return o=t.sent,s=o.filter((function(t){return t.referenceNumber==e.$route.params.referencenumber})),e.lista_DTC_Filtrada=s,n=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"],r=new Date(e.lista_DTC_Filtrada[0].sinisterDate),c=r.getDate()+" DE "+n[r.getMonth()]+" DE "+r.getFullYear(),e.fechasiniestro=c,t.next=13,e.$store.state.Login.listaHeaderDtcUser;case 13:return l=t.sent,u=l.filter((function(t){return t.adminSquareId==e.lista_DTC_Filtrada[0].adminId})),e.plazadtc=u,t.next=18,e.$store.state.Login.listaPlazas;case 18:m=t.sent,f=m.filter((function(t){return t.referenceSquare==e.plazadtc[0].referenceSquare})),e.ciudad=f,t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](1),console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[1,23]])})))()},TestigosDtc:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a,o,s,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(g,"/AnexoDTC/Testigos/").concat(e.$route.params.referenceSquare,"/").concat(e.$route.params.squareCatalogId));case 3:return a=t.sent,t.next=6,a.json();case 6:o=t.sent,s=o.result,e.testigoscompleto=s,n=[],s.forEach((function(e){return n.push(e.nombre)})),e.listaTestigos=n,t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},SupervisorDtc:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a,o,s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(g,"/AnexoDTC/Supervisor/").concat(e.$route.params.referenceSquare,"/").concat(e.$route.params.squareCatalogId));case 3:return a=t.sent,t.next=6,a.json();case 6:o=t.sent,s=o.result,e.listaSupervisor=s,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},onagregarcomponentes:function(e){var t=e.filter((function(t,a){return e.indexOf(t)===a}));this.nombrecarriles=t},onagregarnombrescomponentes:function(e){var t=e.filter((function(t,a){return e.indexOf(t)===a}));this.nombrecomponentes=t},agregarcomponenteseditados:function(e){this.componentesfinaleseditados=e},agregarcomponentesmalos:function(e){this.componentesmalos=e,console.log(this.componentesmalos)},insertaranexo:function(){var e=this;return Object(n["a"])(Object(i["a"])().mark((function t(){var a,o,s,n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.modalImage=!0,a=h()(e.fechaapertura.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),o=h()(e.fechacierre.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),s=h()(e.solicitudfechainicio.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),console.log(s),n=h()(e.fechaoficioinicio.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),console.log(n),r={DTCReference:e.lista_DTC_Filtrada[0].referenceNumber,AnexoReference:"",FechaApertura:a,FechaCierre:o,Solicitud:e.solciitud,FechaSolicitudInicio:s,FolioOficio:e.foliooficio,FechaOficioInicio:n,Observaciones:e.comentario,Testigo1Id:e.testigo1,Testigo2Id:e.testigo2,TipoAnexo:"B",ComponentesAnexo:e.componentesaenviar},console.log(r);try{e.$http.post("".concat(g,"/AnexoDTC/").concat(e.$route.params.referenceSquare,"/false"),r).then((function(t){e.modalLoading=!0;var a=t.data.result;e.referenciaAnexo=a,console.log(e.referenciaAnexo),setTimeout((function(){e.modalconfirmacionanexo=!1,e.modalImage=!0,e.modalLoading=!1}),2e3)})).catch((function(e){console.log(e)}))}catch(i){console.error(i)}case 10:case"end":return t.stop()}}),t)})))()},validacionanexo:function(){if(this.evaluarcomponentes(),this.errores=[],""!=this.fechaapertura&&""!=this.time){var e=new Date(this.fechaapertura),t=new Date(this.time),a=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),o=e.getMonth()+1,s=e.getFullYear()+"-"+o+"-"+e.getDate(),i=s+" "+a,n=new Date(i);this.fechacierre=n.toISOString();var r=Date.now();e>r&&this.errores.push("La fecha de apertura no puede ser mayor al dia de hoy");var c=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"],l=new Date(this.fechaapertura),u=l.getDate()+" DE "+c[l.getMonth()]+" DE "+l.getFullYear()+" A LAS "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds(),d=new Date(this.fechacierre),m=d.getDate()+" DE "+c[d.getMonth()+1]+" DE "+d.getFullYear()+" A LAS "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),f=new Date(this.solicitudfechainicio);f.setMinutes(f.getMinutes()+f.getTimezoneOffset());var p=f.getDate()+" DE "+c[f.getMonth()]+" DE "+f.getFullYear(),h=new Date(this.fechaoficioinicio);h.setMinutes(h.getMinutes()+h.getTimezoneOffset());var v=h.getDate()+" DE "+c[h.getMonth()]+" DE "+h.getFullYear();this.fechaaperturaformateada=u,this.fechacierreformateada=m,this.fechasolicitudformateada=p,this.fechaoficioformateada=v}else this.errores.push("La fecha de apertura esta vacia"),this.errores.push("La hora de cierre esta vacia");""==this.testigo1&&(this.errores.push("Debes seleccionar el primer testigo"),this.vtestigo1=!0),""!=this.testigo1&&""!=this.testigo2||(this.errores.push("Debes seleccionar ambos testigos "),this.vtestigo1=!0,this.vtestigo2=!0),""!=this.testigo1&&""!=this.testigo2&&this.testigo1==this.testigo2&&(this.errores.push("Los Testigos no pueden ser los mismos"),this.vtestigo1=!0,this.vtestigo2=!0),""==this.solciitud&&this.errores.push("Debes ingresar el numero de solicitud del anexo"),""==this.foliooficio&&this.errores.push("Debes ingresar el folio del anexo"),""==this.solicitudfechainicio&&this.errores.push("Debes ingresar la fecha de la solicitud del anexo"),""==this.fechaoficioinicio&&this.errores.push("Debes ingresar la fecha del folio del anexo"),(void 0==this.nombrecomponentes||0==this.nombrecomponentes.length)&&this.errores.push("Tienes que seleccionar por lo menos 1 componente"),this.errores.length>0?this.modalvalidacionanexo=!0:this.modalconfirmacionanexo=!0},limpiarvalidacion:function(){this.errores=[],this.modalvalidacionanexo=!1},cambiarvalort1:function(){this.vtestigo1&&(this.vtestigo1=!1)},cambiarvalort2:function(){this.vtestigo2&&(this.vtestigo2=!1)},cambiarvalorsupervisor:function(){this.vsuperior&&(this.vsuperior=!1)},pasarinsertaranexo:function(){var e=this;this.modalImage=!1,this.modaldescarga=!0,setTimeout((function(){e.$router.push("/ConcentradoDTCFacturados"),document.querySelector("body").classList.remove("overflow-hidden")}),3e3)},cancelaranexo:function(){this.modalconfirmacionanexo=!1,this.componentesaenviar=[],this.index=[]},evaluarcomponentes:function(){var e=this;if(this.componentesfinaleseditados.length>0)this.componentesfinaleseditados.length==this.componentesmalos.length?(this.componentesfinaleseditados.forEach((function(e){""==e.SerialNumber&&(e.SerialNumber="sin número")})),this.componentesaenviar=this.componentesfinaleseditados,console.log(this.componentesaenviar)):this.componentesfinaleseditados.length<this.componentesmalos.length&&(this.componentesmalos.forEach((function(t){var a={RequestedComponentId:t.requestedComponentId,SerialNumber:"sin número"};e.componentesaenviar.push(a)})),console.log(this.componentesaenviar),console.log(this.componentesfinaleseditados),this.index=this.componentesaenviar.map((function(e){return e.RequestedComponentId})),console.log(this.index),this.componentesfinaleseditados.forEach((function(t){var a=e.index.indexOf(t.RequestedComponentId);console.log(a),e.componentesaenviar.splice(a,1,t)})),console.log(this.componentesaenviar));else{var t=[];this.componentesmalos.forEach((function(e){console.log(e);var a={RequestedComponentId:e.requestedComponentId,SerialNumber:"sin número"};t.push(a)})),this.componentesaenviar=t}},saliranexos:function(){this.modaldescarga=!1,this.modalconfirmacionanexo=!1,this.modalImage=!1,this.modalvalidacionanexo=!1,this.$router.push("/home"),document.querySelector("body").classList.remove("overflow-hidden")},bloquear_boton_anexo_img:function(e){this.blockBotonModal=e}},computed:{restante:function(){return this.comentario.length},double:function(){return 2*this.componentesmalos.length}}},x=b,C=a("2877"),E=Object(C["a"])(x,o,s,!1,null,null,null);t["default"]=E.exports}}]);
//# sourceMappingURL=chunk-2d0b6ad9.37cf2568.js.map