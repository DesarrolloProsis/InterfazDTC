(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18c656d0"],{"7ba4":function(t,a,e){},"7c377":function(t,a,e){"use strict";e("7ba4")},a09d:function(t,a,e){"use strict";e("b300")},a374:function(t,a,e){"use strict";var i=function(){var t=this,a=t._self._c;return a("Transition",{attrs:{name:"fade"}},[t.showing?a("div",{staticClass:"fixed inset-0 w-full h-screen flex items-center justify-center fondomodal"},[a("div",{staticClass:"relative w-full max-w-2xl bg-white shadow-lg rounded-lg p-8"},[t._t("default")],2)]):t._e()])},s=[],r={props:{showing:{required:!0,type:Boolean}},watch:{showing:function(t){if(t)return document.querySelector("body").classList.add("overflow-hidden");document.querySelector("body").classList.remove("overflow-hidden")}},methods:{}},o=r,n=(e("acc3"),e("2877")),c=Object(n["a"])(o,i,s,!1,null,"12b313b0",null);a["a"]=c.exports},acc3:function(t,a,e){"use strict";e("bb05")},b300:function(t,a,e){},bb05:function(t,a,e){},c109f:function(t,a,e){"use strict";e.r(a);e("d81d"),e("4de4"),e("d3b7");var i=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"flex justify-center -mt-6"},[a("div",{staticClass:"flex-col p-8"},[a("PdfEscaneado",{attrs:{abrirModal:t.modalSubirSellado,objInsert:t.objInsertEscaneado,tipoReporte:t.tipoEscaneado},on:{"limpiar-componente-escaneado":t.limpiar_componete_escaneado}}),a("div",{staticClass:"sticky inset-0"},[t.carruselModal?a("div",{staticClass:"carruselGMMEP"},[a("div",{staticClass:"justify-center text-center block"},[a("Carrusel",{attrs:{arrayImagenes:t.arrayImagenesCarrusel},on:{"cerrar-modal-carrusel":function(a){t.carruselModal=!1,t.arrayImagenesCarrusel=[]}}})],1)]):t._e()]),a("div",{staticClass:"sticky inset-0"},[t.subirImgModal?a("div",{staticClass:"rounded-lg border max-w-2xl h-44 justify-center absolute inset-x-0 bg-white mx-auto border-gray-400 shadow-2xl mt-66"},[a("button",{staticClass:"ml-74 mt-1 -mb-10 justify-end sm:ml-66",on:{click:function(a){t.subirImgModal=!1}}},[a("img",{staticClass:"justify-center",attrs:{src:e("04b3"),width:"30",height:"30"}})]),a("div",{staticClass:"mt-1 ml-4 mr-4 -mb-10"},[a("AgregarImg",{attrs:{reporteDataInsertada:!0,tipo:"ConcentradoDTC",referenceNumber:t.datosImg.referenceNumber}})],1),a("div",{staticClass:"justify-center flex mt-5 sm:mt-8"},[a("button",{staticClass:"botonIconCrear m-4",on:{click:t.subirImg}},[t._v("Subir")])])]):t._e()]),a("div",{staticClass:"sticky inset-0",class:{"modal-container":t.modalCambiarStatus}},[t.modalCambiarStatus?a("div",{staticClass:"rounded-lg justify-center absolute inset-x-0 md:w-69 lg:w-69 xl:w-69 mx-auto px-12 py-1 sm:p-2 mt-48 sm:-mt-32"},[a("div",{staticClass:"rounded-lg border bg-white border-gray-700 px-12 py-10 shadow-2xl"},[a("p",{staticClass:"text-gray-900 font-thin text-md"},[t._v("Seguro que quieres cambiar el estatus de la referencia "),a("b",{staticClass:"font-bold"},[t._v(t._s(t.dtcEdit.referenceNumber))])]),a("div",[a("div",{staticClass:"mt-5"},[a("p",{staticClass:"mb-1 sm:text-sm"},[t._v("Status DTC")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.statusEdit,expression:"statusEdit"}],staticClass:"w-full is_valid",attrs:{type:"text"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.statusEdit=a.target.multiple?e:e[0]}}},[a("option",{attrs:{value:""}},[t._v("Selecionar...")]),a("option",{attrs:{value:"1"}},[t._v("Inconcluso")]),a("option",{attrs:{value:"2"}},[t._v("Concluido")]),a("option",{attrs:{value:"3"}},[t._v("Sellado")]),10==t.tipoUsuario?a("option",{attrs:{value:"4"}},[t._v("GMMEP")]):t._e()])]),a("div",{staticClass:"mt-5"},[a("p",{staticClass:"mb-1 sm:text-sm"},[t._v("Motivo del Cambio")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.motivoCambio,expression:"motivoCambio"}],staticClass:"appearance-none block bg-grey-lighter container mx-auto text-grey-darker is_valid border-black rounded-lg py-4 mb-0 h-24 placeholder-gray-500 border",attrs:{placeholder:"Motivo del Cambio",maxlength:t.limite},domProps:{value:t.motivoCambio},on:{input:function(a){a.target.composing||(t.motivoCambio=a.target.value)}}}),t._v(" "),a("span",{staticClass:"text-gray-500"},[t._v(t._s(t.restante)+"/300")])])]),a("div",{staticClass:"justify-center flex mt-5"},[a("button",{staticClass:"botonIconCrear m-4",on:{click:t.editar_status_dtc}},[t._v("Aceptar")]),a("button",{staticClass:"botonIconCancelar m-4",on:{click:function(a){t.modalCambiarStatus=!1,t.statusEdit="",t.motivoCambio=""}}},[t._v("Cancelar")])])])]):t._e()]),a("div",{staticClass:"sticky inset-0 font-titulo",class:{"modal-container":t.modalActualizar}},[t.modalActualizar?a("div",{staticClass:"carruselGMMEP h-62 mt-64"},[a("div",{staticClass:"justify-center text-center block"},[a("p",{staticClass:"mt-10 text-black text-2xl font-bold sm:ml-6 sm:-mt-6"},[t._v("Advertencia")]),a("p",{staticClass:"w-69 ml-24 sm:ml-0 sm:w-full text-justify"},[t._v("Se van a Actualizar los componentes requeridos del DTC con Referencia "+t._s(t.infoAcrualizar.referenceNumber))])]),a("div",{staticClass:"mt-12 flex justify-center"},[a("button",{staticClass:"botonIconCrear font-boton"},[a("span",{on:{click:t.actualizar_componentes_dtc}},[t._v("Aceptar")])]),a("button",{staticClass:"botonIconCancelar font-boton",on:{click:function(a){t.modalActualizar=!1}}},[a("span",{},[t._v("Cancelar")])])])]):t._e()]),a("HeaderGenerico",{attrs:{titulo:"Concentrado GMMEP",tipo:"GMMEP"},on:{filtro_GMEEP:t.filtro_GMEEPA,"filtrar-todos_GMEEP":t.todos}}),a("div",{staticClass:"mt-4"},[a("TablaGenerica",{attrs:{listaDataTable:t.lista_DTC_Filtrada,loadingTabla:t.loadingTabla,validarAcciones:t.opticones_select_acciones,normalheaderKey:[{text:"Numero Referencia",key:"referenceNumber"},{text:"Fecha Elaboracion",key:"elaborationDate",formatoFecha:!0},{text:"Fecha Siniestro",key:"sinisterDate",formatoFecha:!0},{text:"Registro Sistema",key:"dateStamp",formatoFecha:!0},{text:"Folio",key:"failureNumber"},{text:"N° Reporte",key:"reportNumber"},{text:"N° Siniestro",key:"sinisterNumber"},{text:"Fecha Falla",key:"failureDate",formatoFecha:!0},{text:"Acciones",key:"Acciones"}],movilHeaderKey:[{text:"Numero Referencia",key:"referenceNumber"},{text:"Fecha Elaboracion",key:"elaborationDate",formatoFecha:!0},{text:"Acciones",key:"Acciones"}]},on:{"acciones-mapper":t.acciones_mapper}})],1),a("div",{staticClass:"mt-20"},[a("Pagination",{attrs:{"total-pages":t.totalPages,total:t.total,"per-page":t.perPage,"current-page":t.currentPage,"has-more-pages":t.hasMorePages},on:{pagechanged:t.showMore}})],1)],1)]),a("Modal",{attrs:{showing:t.modalCambiarstatusGerencia},on:{close:function(a){t.modalCambiarstatusGerencia=!1}}},[a("p",{staticClass:"text-gray-800 font-thing text-xl text-center"},[t._v("Estas seguro de pasar a gerencia el DTC con referencia")]),a("p",{staticClass:"text-gray-900 font-bold text-xl text-center"},[t._v(t._s(this.dtcstattusgerencia.referenceNumber))]),a("div",{staticClass:"justify-center flex mt-5"},[a("button",{staticClass:"botonIconCrear font-titulo font-bold m-4",on:{click:function(a){return t.confirmarstatugerencia(t.dtcstattusgerencia)}}},[t._v("Confirmar")]),a("button",{staticClass:"botonIconCancelar m-4",on:{click:function(a){return t.cancelarstatusgerencia()}}},[t._v("Cancelar")])])])],1)},s=[],r=e("c7eb"),o=e("1da1"),n=(e("99af"),e("159b"),e("c740"),e("a434"),e("ac1f"),e("1276"),e("caad"),e("2532"),e("7db0"),e("d101")),c=e("9909"),l=e("3464"),u=e("4201"),d=e("ccc9"),h=e("7cae"),m=e("b35f"),g=e("1799"),f=e("a374"),p="http://201.99.110.3:86/api",b={name:"ConcentradoGMMEP",components:{Carrusel:l["a"],HeaderGenerico:u["a"],AgregarImg:d["a"],PdfEscaneado:h["a"],TablaGenerica:m["a"],Pagination:g["a"],Modal:f["a"]},data:function(){return{infoDTC:[],arrayImagenesCarrusel:[],rollId:!0,lista_DTC_Filtrada:[],filtroVista:!0,pdfSelladoBool:!0,subirImgModal:!1,loadingTabla:!0,modalCambiarStatus:!1,bandera:!1,carruselModal:!1,motivoCambio:"",statusEdit:"",limite:300,dtcEdit:{},dtcImg:{},datosImg:{},pdfSellado:"",modalActualizar:!1,infoAcrualizar:{},value:"",modalSubirSellado:!1,objInsertEscaneado:{},tipoEscaneado:"GMMEP",page:1,totalPages:0,total:10,perPage:10,currentPage:1,hasMorePages:!0,fechaFiltro:"",buscarGMMEP:"",plazaFiltro:"",estatus:"",plazaidsquare:{},tipoUsuario:0,modalCambiarstatusGerencia:!1,dtcstattusgerencia:{}}},beforeMount:function(){var t=this,a=this.$store.state.Login.cookiesUser.rollId;7==a&&(this.rollId=!1),this.tipoUsuario=this.$store.state.Login.cookiesUser.rollId;var e=this.$store.state.Login.cookiesUser.userId,i=this.$store.state.Login.plazaSelecionada.refereciaPlaza;this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(i,"/").concat(this.page,"/").concat(this.total,"/").concat(e,"/null/null/null/null/null/null")).then((function(a){var e=a.data.result.rows;e.forEach((function(a){return t.lista_DTC_Filtrada.push(a.dtcView)})),t.totalPages=a.data.result.numeroPaginas,t.currentPage=a.data.result.paginaActual,t.loadingTable=!1})).catch((function(a){404==a.status&&(t.loadingTable=!1)}))},computed:{restante:function(){return this.motivoCambio.length}},methods:{acciones_mapper:function(t){var a=this,e=t.acciones,i=t.itemRow,s=function(){4!=a.tipoUsuario&&8!=a.tipoUsuario&&setTimeout((function(){c["a"].generar_pdf_fotografico_correctivo(i.referenceNumber)}),1e3)};"Bajar DTC Sin Firma"==e.title&&(c["a"].generar_pdf_correctivo(i.referenceNumber,1,!1,i.adminId),s()),"Bajar DTC Firmado"==e.title&&(c["a"].generar_pdf_correctivo(i.referenceNumber,2,!1,i.adminId),s()),"Bajar DTC Sellado"==e.title&&(c["a"].generar_pdf_correctivo(i.referenceNumber,3,!1),s()),"Terminar Diagnostico"==e.title&&this.$router.push({path:"/Correctivo/PreDTC/Crear/DiagnosticoDeFalla",query:{referenceNumberFinishDiagnostic:i.referenceNumber}}),"Cambiar Estatus"==e.title&&(this.modalCambiarStatus=!0,this.dtcEdit=i),"Actualizar Componentes"==e.title&&(this.modalActualizar=!0,this.infoAcrualizar=i),"Subir DTC Sellado"==e.title&&(this.tipoEscaneado="GMMEP",this.modalSubirSellado=!0,this.objInsertEscaneado={referenceNumber:i.referenceNumber}),"Pasar a Gerencia"==e.title&&(this.modalCambiarstatusGerencia=!0,this.dtcstattusgerencia=i,console.log(this.dtcstattusgerencia))},opticones_select_acciones:function(t){var a=[{title:"Bajar DTC Firmado",accionCss:"terminar",img:"fa-solid fa-file-arrow-down"},{title:"Terminar Diagnostico",accionCss:"terminar",img:"fa-solid fa-file-circle-plus"},{title:"Cambiar Estatus",accionCss:"editar",img:"fa-solid fa-arrow-right-arrow-left"},{title:"Bajar DTC Sellado",accionCss:"terminar",img:"fa-solid fa-file-arrow-down"},{title:"Subir DTC Sellado",accionCss:"terminar",img:"fa-solid fa-file-arrow-up"},{title:"Actualizar Componentes",accionCss:"editar",img:"fa-solid fa-file-pen"},{title:"Bajar DTC Sin Firma",accionCss:"terminar",img:"fa-solid fa-file-arrow-down"},{title:"Pasar a Gerencia",accionCss:"terminar",img:"fa-solid fa-file-invoice-dollar"}],e=[];return 8!=this.tipoUsuario&&4!=this.tipoUsuario||e.push(a[6]),4!=this.tipoUsuario&&8!=this.tipoUsuario&&e.push(a[0]),t.statusId>=3&&!t.escaneadobool&&e.push(a[3]),7!=this.tipoUsuario&&4!=this.tipoUsuario&&8!=this.tipoUsuario&&t.escaneadobool&&e.push(a[4]),"--"==t.technicalSheetReference&&1==this.tipoUsuario&&e.push(a[1]),1==this.tipoUsuario&&!t.escaneadobool&&t.statusId>=3&&e.push(a[4]),1==this.tipoUsuario&&e.push(a[5]),4!=this.tipoUsuario&&8!=this.tipoUsuario&&10!=this.tipoUsuario||e.push(a[2]),t.statusId<5&&(4==this.tipoUsuario||8==this.tipoUsuario||10==this.tipoUsuario)&&e.push(a[7]),e},limpiar_componete_escaneado:function(){var t=this;this.modalSubirSellado=!1,this.loadingTabla=!0,setTimeout((function(){var a=t.lista_DTC_Filtrada.findIndex((function(a){return a.referenceNumber==t.objInsertEscaneado.referenceNumber})),e=Object.assign(t.lista_DTC_Filtrada[a]);e["confirmpdf"]=!0,e["escaneadobool"]=!1,t.lista_DTC_Filtrada.splice(a,1,e),t.objInsertEscaneado={},t.loadingTabla=!1}),500)},actualizar_componentes_dtc:function(){var t=this,a=this.infoAcrualizar.referenceNumber.split("-")[0],e=this.$store.state.Login.cookiesUser.userId;this.modalActualizar=!1,this.loadingTabla=!0,this.$http.post("".concat(p,"/Component/updateInventory/").concat(a,"/").concat(this.infoAcrualizar.referenceNumber,"/").concat(e)).then((function(){t.loadingTabla=!1,t.$notify.success({title:"Ok!",class:"font-titulo",msg:"DTC CON REFERENCIA ".concat(t.infoAcrualizar.referenceNumber," ACTUALIZADO CORRECTAMENTE."),position:"bottom right",styles:{height:100,width:500}})}))},guardar_palabra_busqueda:function(t){var a=this;""!=t?(this.lista_DTC_Filtrada=[],this.loadingTabla=!0,setTimeout(Object(o["a"])(Object(r["a"])().mark((function e(){var i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=a.infoDTC.filter((function(a){return a.referenceNumber.toUpperCase().includes(t.toUpperCase())})),a.lista_DTC_Filtrada=i,a.loadingTabla=!1;case 3:case"end":return e.stop()}}),e)}))),1e3)):this.lista_DTC_Filtrada=this.infoDTC},subirImg:function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.subirImgModal=!1,a=this.$store.getters["Login/GET_USEER_ID_PLAZA_ID"],t.next=4,this.$store.dispatch("DTC/BUSCAR_LISTA_DTC",a);case 4:this.infoDTC=this.$store.getters["DTC/GET_LISTA_DTC"](this.filtroVista),this.lista_DTC_Filtrada=this.infoDTC;case 6:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}(),abrirCarrusel:function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){var e,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=a.technicalSheetReference,i=this.$store.state.DTC.listaInfoDTC.find((function(t){return t.dtcView.technicalSheetReference==e})).pathImagesDF.map((function(t){return{fileName:t,image:"".concat(p,"/DiagnosticoFalla/Images/").concat(e.split("-")[0],"/").concat(e,"/").concat(t)}})),this.arrayImagenesCarrusel={array_img:i,referenceNumber:e},this.carruselModal=!0;case 4:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}(),editar_status_dtc:function(){var t=this;this.modalCambiarStatus=!1,this.loadingTabla=!0;var a=this.$store.getters["Login/GET_USEER_ID_PLAZA_ID"],e={referenceNumber:this.dtcEdit.referenceNumber,statusId:parseInt(this.statusEdit),userId:a.idUser,comment:this.motivoCambio};""!=this.statusEdit&&""!=this.motivoCambio?this.$http.post("".concat(p,"/Pdf/ActualizarDtcAdministratores/").concat(this.dtcEdit.referenceNumber.split("-")[0]),e).then((function(){t.todos(),t.infoDTC=t.lista_DTC_Filtrada,t.statusEdit="",t.motivoCambio="",t.dtcEdit="",t.loadingTabla=!1})):(this.$notify.warning({title:"Ups!",msg:"NO SE HA LLENADO LOS CAMPOS.",position:"bottom right",styles:{height:100,width:500}}),this.loadingTabla=!1,this.lista_DTC_Filtrada=this.infoDtc)},filtro_dtc:function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){var e=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:""!=a.plazaFiltro||""!=a.fechaFiltro||""!=a.referenciaFiltro?(this.lista_DTC_Filtrada=[],this.loadingTabla=!0,setTimeout(Object(o["a"])(Object(r["a"])().mark((function t(){var i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].filtrarDTC(e.filtroVista,a.plazaFiltro,a.fechaFiltro,a.referenciaFiltro,void 0,!1,void 0);case 2:i=t.sent,e.$nextTick().then((function(){e.lista_DTC_Filtrada=i,e.loadingTabla=!1}));case 4:case"end":return t.stop()}}),t)}))),1e3)):this.$notify.warning({title:"Ups!",msg:"NO SE HA LLENADO NINGUN CAMPO PARA FILTRAR.",position:"bottom right",styles:{height:100,width:500}});case 1:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}(),limpiar_filtros:function(){var t=this;this.modalLoading=!0,this.$nextTick().then((function(){t.lista_DTC_Filtrada=t.infoDTC}))},confirmarstatugerencia:function(t){var a=this,e=this.$store.getters["Login/GET_USEER_ID_PLAZA_ID"],i={referenceNumber:t.referenceNumber,statusId:5,userId:e.idUser,comment:"Cambiado por Gerencia"};this.$http.post("".concat(p,"/Pdf/ActualizarDtcAdministratores/").concat(t.referenceNumber.split("-")[0]),i).then((function(e){console.log(e),a.$notify.success({title:"Ok!",class:"font-titulo",msg:"DTC CON REFERENCIA ".concat(t.referenceNumber," ACTUALIZADO CORRECTAMENTE."),position:"bottom right",styles:{height:100,width:500}}),a.modalCambiarstatusGerencia=!1,a.todos()})).catch((function(t){return console.log(t)}))},cancelarstatusgerencia:function(){this.dtcstattusgerencia={},this.modalCambiarstatusGerencia=!1},showMore:function(t){var a=this;this.lista_DTC_Filtrada=[],this.page=t,this.currentPage=t,this.$router.push({path:"ConcentradoGMMEP",query:{Pagina:t,nameFilter:null}}),this.loadingTable=!0;var e=this.$store.state.Login.cookiesUser.userId,i=this.$store.state.Login.plazaSelecionada.refereciaPlaza;""==this.fechaFiltro&&""==this.buscarGMMEP&&""==this.plazaFiltro&&""==this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(i,"/").concat(this.page,"/").concat(this.total,"/").concat(e,"/null/null/null/null/null/null")).then((function(t){var e=t.data.result.rows;e.forEach((function(t){return a.lista_DTC_Filtrada.push(t.dtcView)})),a.totalPages=t.data.result.numeroPaginas,a.currentPage=t.data.result.paginaActual,a.loadingTable=!1})).catch((function(){return a.loadingTable=!1})):this.filtro_GMEEPA(this.plazaFiltro,this.fechaFiltro,this.buscarGMMEP,this.estatus)},todos:function(){var t=this;this.lista_DTC_Filtrada=[],this.fechaFiltro="",this.buscarGMMEP="",this.plazaFiltro="",this.estatus="";var a=this.$store.state.Login.cookiesUser.userId,e=this.$store.state.Login.plazaSelecionada.refereciaPlaza;this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(e,"/").concat(this.page,"/").concat(this.total,"/").concat(a,"/null/null/null/null/null/null")).then((function(a){var e=a.data.result.rows;e.forEach((function(a){return t.lista_DTC_Filtrada.push(a.dtcView)})),t.totalPages=a.data.result.numeroPaginas,t.currentPage=a.data.result.paginaActual,t.loadingTable=!1})).catch((function(a){404==a.status&&(t.loadingTable=!1)}))},filtro_GMEEPA:function(t,a,e,i){var s=this;this.lista_DTC_Filtrada=[],this.plazaFiltro=t,this.fechaFiltro=a,this.buscarGMMEP=e,this.estatus=i;var r=this.$store.state.Login.cookiesUser.userId,o=this.$store.state.Login.plazaSelecionada.refereciaPlaza,n=this.$store.state.Login.listaPlazas;""!=this.plazaFiltro&&(this.plazaidsquare=n.find((function(t){return t.squareCatalogId==s.plazaFiltro}))),""!=this.plazaFiltro&&""==this.fechaFiltro&&""==this.buscarGMMEP&&""==this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/").concat(this.plazaidsquare.squareCatalogId,"/null/null/null")).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""==this.plazaFiltro&&""!=this.fechaFiltro&&""==this.buscarGMMEP&&""==this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/null/null/null/").concat(this.fechaFiltro)).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""==this.plazaFiltro&&""==this.fechaFiltro&&""!=this.buscarGMMEP&&""==this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/null/").concat(this.buscarGMMEP,"/null/null")).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""==this.plazaFiltro&&""==this.fechaFiltro&&""==this.buscarGMMEP&&""!=this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/null/null/").concat(this.estatus,"/null")).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""!=this.plazaFiltro&&""!=this.fechaFiltro&&""==this.buscarGMMEP&&""==this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/").concat(this.plazaidsquare.squareCatalogId,"/null/null/").concat(this.fechaFiltro)).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""!=this.plazaFiltro&&""==this.fechaFiltro&&""!=this.buscarGMMEP&&""==this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/").concat(this.plazaidsquare.squareCatalogId,"/").concat(this.buscarGMMEP,"/null/null")).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""!=this.plazaFiltro&&""==this.fechaFiltro&&""==this.buscarGMMEP&&""!=this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/").concat(this.plazaidsquare.squareCatalogId,"/null/").concat(this.estatus,"/null")).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""==this.plazaFiltro&&""!=this.fechaFiltro&&""!=this.buscarGMMEP&&""==this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/null/").concat(this.buscarGMMEP,"/null/").concat(this.fechaFiltro)).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""==this.plazaFiltro&&""!=this.fechaFiltro&&""==this.buscarGMMEP&&""!=this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/null/null/").concat(this.estatus,"/").concat(this.fechaFiltro)).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""==this.plazaFiltro&&""==this.fechaFiltro&&""!=this.buscarGMMEP&&""!=this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/null/").concat(this.buscarGMMEP,"/").concat(this.estatus,"/null")).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""==this.plazaFiltro&&""!=this.fechaFiltro&&""!=this.buscarGMMEP&&""!=this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/null/").concat(this.buscarGMMEP,"/").concat(this.estatus,"/").concat(this.fechaFiltro)).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""!=this.plazaFiltro&&""==this.fechaFiltro&&""!=this.buscarGMMEP&&""!=this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/").concat(this.plazaidsquare.squareCatalogId,"/").concat(this.buscarGMMEP,"/").concat(this.estatus,"/null")).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""!=this.plazaFiltro&&""!=this.fechaFiltro&&""==this.buscarGMMEP&&""!=this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/").concat(this.plazaidsquare.squareCatalogId,"/null/").concat(this.estatus,"/").concat(this.fechaFiltro)).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""!=this.plazaFiltro&&""!=this.fechaFiltro&&""!=this.buscarGMMEP&&""==this.estatus?this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/").concat(this.plazaidsquare.squareCatalogId,"/").concat(this.buscarGMMEP,"/null/").concat(this.fechaFiltro)).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)})):""!=this.plazaFiltro&&""!=this.fechaFiltro&&""!=this.buscarGMMEP&&""!=this.estatus&&this.$http.get("".concat(p,"/dtcData/GMMEP/").concat(o,"/").concat(this.page,"/").concat(this.total,"/").concat(r,"/null/null/").concat(this.plazaidsquare.squareCatalogId,"/").concat(this.buscarGMMEP,"/").concat(this.estatus,"/").concat(this.fechaFiltro)).then((function(t){if(null==t.data.result.rows)s.lista_DTC_Filtrada=[],s.loadingTable=!1;else{var a=t.data.result.rows;a.forEach((function(t){return s.lista_DTC_Filtrada.push(t.dtcView)})),s.totalPages=t.data.result.numeroPaginas,s.currentPage=t.data.result.paginaActual,s.loadingTable=!1}})).catch((function(t){404==t.response.status&&(s.lista_DTC_Filtrada=[],s.loadingTable=!1)}))}}},C=b,_=(e("a09d"),e("2877")),v=Object(_["a"])(C,i,s,!1,null,null,null);a["default"]=v.exports},ccc9:function(t,a,e){"use strict";var i=e("ade3"),s=(e("b0c0"),function(){var t=this,a=t._self._c;return a("div",{staticClass:"mr-10 -mt-3 sm:mr-0 sm:ml-4 sm:mt-0 w-full font-titulo",class:{"sm:ml-1 sm:mt-18":"Diagnostico"==t.tipo,"sm:-ml-1":"Ficha"==t.tipo}},[a("p",{staticClass:"text-gray-800 font-titulo mt-2 mb-1 sm:text-sm sm:mb-4",class:{"sm:ml-1 sm:mt-2 -mb-1 mt-4 ml-12 w-20":"Diagnostico"==t.tipo,"ml-5 mb-2 mt-6 lg:ml-73 sm:-ml-48 sm:-mb-1":"Ficha"==t.tipo,"sm:-mt-16":"Editar"==t.$route.params.tipoVista}},[t._v("IMAGENES")]),t.reporteDataInsertada?a("div",{staticClass:"sm:-ml-4",class:{"w-75 ml-4 mr-4 mt-4 sm:w-auto border border-white -mb-4 sm:-mt-18":"Diagnostico"==t.tipo,"w-75 ml-1 sm:ml-10 sm:w-66 sm:-mb-10":"Ficha"==t.tipo,"w-1/3 ml-5 sm:ml-1 sm:w-66 sm:mb-10 lg:ml-73":"Editar"==t.$route.params.tipoVista}},[t.cargandoImagen?a("div",{staticClass:"text-center font-serif text-xs h-40 border border-gray-400 rounded-lg w-full sm:w-66",class:{"sm:w-auto mt-0 sm:mt-2 sm:ml-1 sm:mr-1":"Diagnostico"==t.tipo,"sm:w-full mt-0 sm:mt-2 sm:ml-3":"Ficha"==t.tipo}},[a("div",{staticClass:"mt-5"},[a("div",{staticClass:"p-10"},[a("p",{staticClass:"mb-2"},[t._v("Cargando imagen")]),a("BarraProgreso",{attrs:{color:"blue",percentage:t.progress}})],1)])]):a("div",{staticClass:"inline-flex h-40 border border-gray-400 rounded-lg w-full sm:w-66",class:{"sm:w-66 mt-0 sm:mt-1 sm:-ml-1":"Diagnostico"==t.tipo,"sm:w-full mt-0 sm:mt-2 sm:ml-4":"Ficha"==t.tipo}},[a("div",{staticClass:"w-2/3 grid grid-cols-2 p-2 gap-4 overflow-auto",class:Object(i["a"])({"grid-cols-2":"Actividades"==t.tipo,"grid-cols-1":"Diagnostico"==t.tipo},"grid-cols-1","Ficha"==t.tipo)},t._l(t.arrayImagenes,(function(i){return a("div",{key:i.name,staticClass:"relative border"},[a("span",{staticClass:"absolute border rounded-full top-0 right-0",on:{click:function(a){return t.eliminar_imagen(i.name)}}},[a("img",{staticClass:"w-4 cursor-pointer",attrs:{src:e("04b3")}})]),a("div",{staticClass:"p-2 mx-aut"},[i.imgbase.length<200?a("lazy-image",{attrs:{src:"".concat(i.imgbase),"img-class":["w-32","h-32"],placeholder:"../assets/img/load.gif"}}):a("lazy-image",{attrs:{src:"data:image/jpeg;base64,".concat(i.imgbase),"img-class":["w-32","h-32"],placeholder:"../assets/img/load.gif"}})],1)])})),0),a("div",{staticClass:"w-1/3 border-2 relative border-gray-600 inline-block border-dashed text-center rounded-lg",class:{"":"Diagnostico"==t.tipo}},[a("div",{staticClass:"sm:-mt-4"},[a("input",{staticClass:"h-40 w-full inset-0 absolute opacity-0 cursor-pointer",class:{"cursor-not-allowed":t.anularcarga},attrs:{disabled:t.anularcarga,type:"file",multiple:""},on:{change:t.recibir_imagenes}}),a("font-awesome-icon",{staticClass:"p-5 w-auto text-center flex h-32 xl:ml-8 xl:-mt-6 xl:-mb-6 sm:w-10 sm:h-10 sm:p-1 sm:mt-16 text-blue-800",class:{"sm:h-16 sm:w-16":"Diagnostico"==t.tipo||"Ficha"==t.tipo},attrs:{icon:"fa-solid fa-plus"}}),a("span",{staticClass:"text-sm text-gray-500 sm:hidden"},[t._v("Agregar imagenes")])],1)])]),a("span",{staticClass:"text-gray-500 text-sm border border-white sm:-mt-6 sm:ml-0 sm:w-32"},[t._v(t._s(t.num)+"/"+t._s(t.limiteFotos)+" (Máximo "+t._s(t.limiteFotos)+" fotografías)")])]):a("div",{class:{"w-1/3 ml-5 lg:ml-73":"Diagnostico"==t.tipo,"w-1/3 ml-5 sm:ml-48 lg:ml-73":"Ficha"==t.tipo}},[a("button",{staticClass:"inline-flex h-40 border border-gray-400 bg-gray-300 rounded-lg w-full sm:w-66",class:{"bg-gray-400":t.reporteDataInsertada}},[a("div",{staticClass:"w-2/3 grid p-2 gap-4 overflow-auto bg-gray-300"}),a("div",{staticClass:"w-1/3 border-2 relative border-gray-600 bg-gray-300 inline-block border-dashed text-center rounded-lg sm:h-40"},[a("button",{staticClass:"bg-gray-300",class:{"":"Diagnostico"==t.tipo},attrs:{disabled:t.reporteDataInsertada}},[a("img",{staticClass:"p-5 w-auto mx-auto h-31 sm:w-10 sm:h-10 sm:p-1 sm:mt-16",class:{"sm:h-10 sm:mb-16":"Diagnostico"==t.tipo},attrs:{src:e("ec68")}}),a("span",{staticClass:"text-sm text-gray-500 mb-0 sm:hidden"},[t._v("Agregar imagenes")])])])]),"Diagnostico"==t.tipo?a("p",{staticClass:"-mt-1 text-1xl sm:text-sm text-red-700",class:{"text-center mb-4":"Diag"==t.tipo}},[t._v("Primero debe enviar la información del Reporte")]):a("p",{staticClass:"mt-1 text-sm text-center text-red-700"},[t._v("Para agregar imagenes primero debe crear el reporte")])])])}),r=[],o=e("b85c"),n=e("c7eb"),c=e("1da1"),l=(e("a9e3"),e("99af"),e("ac1f"),e("1276"),e("d3b7"),e("159b"),e("7db0"),e("4de4"),e("046c")),u=function(){var t=this,a=t._self._c;return a("div",{staticClass:"w-full bg-gray-200 h-2 relative overflow-hidden",class:[{"rounded-full":t.rounded},{indeterminate:t.indeterminate}]},[a("div",{staticClass:"h-full progressbar",class:["bg-".concat(t.color,"-500"),{"absolute top-0":t.indeterminate},{"rounded-full":t.rounded}],style:{width:"".concat(t.percentage,"%")},attrs:{role:"progressbar","aria-valuenow":t.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},[a("span",{staticClass:"flex items-center h-full"},[t._t("default")],2)])])},d=[],h={inheritAttrs:!1,props:{color:{type:String,default:"teal"},percentage:{type:Number,default:0},rounded:{type:Boolean,default:!0},indeterminate:Boolean}},m=h,g=(e("7c377"),e("2877")),f=Object(g["a"])(m,u,d,!1,null,"55df656c",null),p=f.exports,b=e("c1df"),C=e.n(b),_="http://201.99.110.3:86/api",v={props:{referenceNumber:{type:String,default:function(){return""}},tipo:{type:String,default:function(){return"Actividades"}},reporteDataInsertada:{type:Boolean,default:function(){return!1}},maximofotosanexo:{type:Number,default:0},referenciaAnexo:{type:String,default:function(){return""}},subversionAnexo:{type:Boolean,default:function(){return!1}},editar:{type:Boolean,default:function(){return!1}}},components:{BarraProgreso:p},data:function(){return{arrayImagenes:[],cargandoImagen:!1,progress:20,seconds:6,countdown:5,expires_in:null,interval:null,limiteFotos:0,rand:1,anularcarga:!1}},destroyed:function(){this.arrayImagenes=[],clearInterval(this.interval)},beforeMount:function(){var t=this;"Anexo"==this.tipo?setTimeout((function(){var a="";t.limiteFotos=t.maximofotosanexo;var e=[];a="".concat(_,"/ReporteFotografico/Images/GetPaths/").concat(t.referenceNumber.split("-")[0],"/").concat(t.referenceNumber,"/").concat(t.referenciaAnexo,"/").concat(t.subversionAnexo),console.log(a),t.$http.get(a).then((function(a){console.log(a.data),a.data.forEach((function(i){e.push(i);var s="".concat(_,"/ReporteFotografico/EquipoNuevo/Images/").concat(t.referenceNumber.split("-")[0],"/").concat(t.referenceNumber);if(404!=a.status){var r=[];e.forEach((function(a){r.push({name:a,imgbase:"".concat(s,"/").concat(a,"/").concat(t.referenciaAnexo,"/").concat(t.subversionAnexo)})})),t.arrayImagenes=r,t.arrayImagenes.length==t.limiteFotos?(console.log(t.arrayImagenes.length),console.log(t.limiteFotos),t.anularcarga=!0):t.anularcarga=!1}}))}))}),2e3):setTimeout((function(){var a="";"Actividades"==t.tipo?(t.limiteFotos=36,a="".concat(_,"/ReporteFotografico/MantenimientoPreventivo/Images/GetPaths/").concat(t.referenceNumber.split("-")[0],"/").concat(t.referenceNumber)):"Diagnostico"==t.tipo?(t.limiteFotos=4,a="".concat(_,"/DiagnosticoFalla/Images/GetPaths/").concat(t.referenceNumber.split("-")[0],"/").concat(t.referenceNumber)):"Anexo"==t.tipo?(t.limiteFotos=t.maximofotosanexo,a="".concat(_,"/ReporteFotografico/Images/GetPaths/").concat(t.referenceNumber.split("-")[0],"/").concat(t.referenceNumber,"/").concat(t.referenciaAnexo,"/").concat(t.subversionAnexo)):(t.limiteFotos=4,a="".concat(_,"/FichaTecnicaAtencion/Images/GetPaths/").concat(t.referenceNumber.split("-")[0],"/").concat(t.referenceNumber)),t.$http.get(a).then((function(a){var e="";if(e="Actividades"==t.tipo?"".concat(_,"/ReporteFotografico/MantenimientoPreventivo/Images/").concat(t.referenceNumber.split("-")[0],"/").concat(t.referenceNumber):"Diagnostico"==t.tipo?"".concat(_,"/DiagnosticoFalla/Images/").concat(t.referenceNumber.split("-")[0],"/").concat(t.referenceNumber):"".concat(_,"/FichaTecnicaAtencion/Images/").concat(t.referenceNumber.split("-")[0],"/").concat(t.referenceNumber),404!=a.status){var i=[];a.data.forEach((function(t){i.push({name:t,imgbase:"".concat(e,"/").concat(t)})})),t.arrayImagenes=i}}))}),500)},computed:{num:function(){return this.arrayImagenes.length}},methods:{recibir_imagenes:function(){var t=Object(c["a"])(Object(n["a"])().mark((function t(a){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$emit("bloquear-boton-diagnostico",!0),t.next=3,this.enviar_imagenes(a);case 3:this.arrayImagenes.length==this.limiteFotos?(console.log(this.arrayImagenes.length),console.log(this.limiteFotos),this.anularcarga=!0):this.anularcarga=!1,this.cargandoImagen=!0,this.countdown=C.a.utc(this.seconds).format("HH:mm:ss"),this.expires_in=this.seconds,this._setInterval();case 8:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}(),_setInterval:function(){var t=this;this.interval=setInterval((function(){1===t.expires_in?(t.progress=20,t.cargandoImagen=!1,t.$emit("bloquear-boton-diagnostico",!1)):0===t.expires_in?clearInterval(t.interval):(t.expires_in-=1,t.progress+=15,t.countdown=C.a.utc(1e3*t.expires_in).subtract(1,"seconds").format("HH:mm:ss"))}),1e3)},enviar_imagenes:function(){var t=Object(c["a"])(Object(n["a"])().mark((function t(a){var e,i,s,r,c,u,d,h,m=this;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.arrayImagenes.some((function(t){return t.name.split("-")[0]!=m.referenceNumber})),i="",1!=e&&0!=this.arrayImagenes.length){t.next=29;break}s={},"Actividades"==this.tipo?(s="".concat(_,"/ReporteFotografico/MantenimientoPreventivo/Images/").concat(this.referenceNumber.split("-")[0],"/").concat(this.referenceNumber),i={rutaGetImagen:"".concat(_,"/ReporteFotografico/MantenimientoPreventivo/Images"),tipo:1}):"ConcentradoDTC"==this.tipo?(this.limiteFotos=100,s="".concat(_,"/dtcData/EquipoDañado/Images/").concat(this.referenceNumber.split("-")[0],"/").concat(this.referenceNumber),i={rutaGetImagen:"".concat(_,"/dtcData/EquipoDañado/Images"),tipo:4}):"Anexo"==this.tipo?(1==this.editar&&(this.subversionAnexo=!0),this.limiteFotos=this.maximofotosanexo,s="".concat(_,"/ReporteFotografico/EquipoNuevo/Images/").concat(this.referenceNumber.split("-")[0],"/").concat(this.referenceNumber,"/").concat(this.referenciaAnexo,"/").concat(this.subversionAnexo),i={rutaGetImagen:"".concat(_,"/ReporteFotografico/EquipoNuevo/Images"),tipo:5}):"Diagnostico"==this.tipo?(s="".concat(_,"/DiagnosticoFalla/Images/").concat(this.referenceNumber.split("-")[0],"/").concat(this.referenceNumber),i={rutaGetImagen:"".concat(_,"/DiagnosticoFalla/Images"),tipo:2}):(s="".concat(_,"/FichaTecnicaAtencion/Images/").concat(this.referenceNumber.split("-")[0],"/").concat(this.referenceNumber),i={rutaGetImagen:"".concat(_,"/FichaTecnicaAtencion/Images"),tipo:3}),r=Object(o["a"])(a.target.files),t.prev=6,r.s();case 8:if((c=r.n()).done){t.next=21;break}if(u=c.value,!(this.arrayImagenes.length+1<=this.limiteFotos)){t.next=19;break}if(d=new FormData,"ConcentradoDTC"!=this.tipo||(h=this.$store.state.Login.cookiesUser.plazasUsuario.find((function(t){return t.refereciaPlaza=m.referenceNumber.split("-")[0]})),d.append("id",this.referenceNumber),d.append("plaza",h.plazaNombre)),d.append("image",u),"image/png"!=u.type&&"image/jpeg"!=u.type){t.next=18;break}return t.next=16,this.$http.post(s,d).then((function(t){m.arrayImagenes=l["a"].obtener_array_imagenes_agregadas(t.data,m.arrayImagenes,i,m.subversionAnexo,m.referenciaAnexo)}));case 16:t.next=19;break;case 18:this.$notify.warning({title:"Error!",msg:"SOLO PUEDE SUBIR IMAGENES.",position:"bottom right",styles:{height:100,width:500}});case 19:t.next=8;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](6),r.e(t.t0);case 26:return t.prev=26,r.f(),t.finish(26);case 29:case"end":return t.stop()}}),t,this,[[6,23,26,29]])})));function a(a){return t.apply(this,arguments)}return a}(),eliminar_imagen:function(t){var a=this;if(this.arrayImagenes.length>1){if(t.split("_")[0]==this.referenceNumber){var e="";"Actividades"==this.tipo?e="".concat(_,"/ReporteFotografico/MantenimientoPreventivo/Images/DeleteImg/").concat(this.referenceNumber.split("-")[0],"/").concat(this.referenceNumber,"/").concat(t):"Diagnostico"==this.tipo?e="".concat(_,"/DiagnosticoFalla/Images/DeleteImg/").concat(this.referenceNumber.split("-")[0],"/").concat(this.referenceNumber,"/").concat(t):"Anexo"==this.tipo?(this.anularcarga=!1,1==this.editar&&(this.subversionAnexo=!0),e="".concat(_,"/ReporteFotografico/EquipoNuevo/Images/DeleteImg/").concat(this.referenceNumber.split("-")[0],"/").concat(this.referenceNumber,"/").concat(t,"/").concat(this.referenciaAnexo,"/").concat(this.subversionAnexo)):e="".concat(_,"/FichaTecnicaAtencion/Images/DeleteImg/").concat(this.referenceNumber.split("-")[0],"/").concat(this.referenceNumber,"/").concat(t),this.$http.get(e).then((function(){a.$notify.success({title:"Ok!",msg:"SE ELIMINO LA IMAGEN CORRECTAMENTE.",position:"bottom right",styles:{height:100,width:500}})}))}this.$nextTick((function(){var e=a.arrayImagenes.filter((function(a){return a.name!=t}));a.arrayImagenes=[],a.arrayImagenes=e}))}else this.$notify.warning({title:"Ok!",msg:"SIEMPRE DEBE TENER MINIMO UNA FOTO.",position:"bottom right",styles:{height:100,width:500}})}}},T=v,F=Object(g["a"])(T,s,r,!1,null,null,null);a["a"]=F.exports}}]);
//# sourceMappingURL=chunk-18c656d0.2657c57a.js.map