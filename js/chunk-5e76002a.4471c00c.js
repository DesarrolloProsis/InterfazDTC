(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e76002a"],{6908:function(a,t,e){},ca62:function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a._self._c;return t("div",[t("div",{staticClass:"justify-center sm:w-auto"},[t("div",{staticClass:"sticky inset-0",class:{"modal-container":a.modalImage}},[a.modalImage?t("div",{staticClass:"modalCargarImg sm:m-4 sm:mt-66 mt-66"},[t("span",{staticClass:"absolute top-0 right-0",on:{click:a.cerrar_modal_imagenes}},[t("font-awesome-icon",{staticClass:"h-8 cursor-pointer sm:w-6 sm:h-6 text-blue-800",attrs:{icon:"fa-regular fa-circle-xmark"}})],1),t("div",{staticClass:"justify-center text-center block ml-4 mr-4"},[t("ImagenesFichaDiagnostico",{attrs:{reporteDataInsertada:a.reporteInsertado,tipo:"Ficha",referenceNumber:void 0!=a.datosHeader.referenceNumber?a.datosHeader.referenceNumber:""},on:{"bloquear-boton-diagnostico":a.bloquear_boton_diagnostioc_img}}),t("button",{staticClass:"botonIconCrear mt-4 sm:mt-12",class:{"bg-gray-300 hover:text-black border-black hover:border-black cursor-not-allowed opacity-50":a.blockBotonModal,"hover:bg-gray-300 hove:border-black":a.blockBotonModal},attrs:{disabled:a.blockBotonModal},on:{click:function(t){return a.enviar_header_ficha(!1)}}},[t("font-awesome-icon",{staticClass:"mr-2 text-green-800 h-8",attrs:{icon:"fa-solid fa-file-circle-plus"}}),t("span",[a._v("Generar Ficha Técnica")])],1)],1)]):a._e()]),t("div",{staticClass:"grid gap-4 grid-cols-1 py-3 px-3"},[t("div",{staticClass:"mt-1 mb-16 sm:block sm:p-1 sm:pr-2 border sm:m-1 shadow-md grid grid-cols sm:mb-20 md:mx-auto"},[a._m(0),t("HeaderFalla",{attrs:{tipo:"FICHA"},on:{"actualizar-header":a.actualizar_header,"mapear-tipo-falla":a.mapear_tipo_falla}}),("Editar"==a.$route.params.tipoVista||0==a.botonEditCreate)&&a.tipoFalla<=1?t("ImagenesFichaDiagnostico",{attrs:{reporteDataInsertada:a.reporteInsertado,tipo:"Ficha",referenceNumber:void 0!=a.datosHeader.referenceNumber?a.datosHeader.referenceNumber:""}}):a._e(),t("div",{staticClass:"mb-5 mt-2 ml-77 sm:mb-6 sm:mx-6 sm:-mt-16 md:mx-auto md:mb-18 lg:mx-auto xl:mx-auto"},[a.botonEditCreate?t("div",["Crear"==a.$route.params.tipoVista&&1==a.botonEditCreate?t("button",{staticClass:"botonIconCrear",on:{click:function(t){return a.enviar_header_ficha(!0)}}},[t("font-awesome-icon",{staticClass:"mr-2 text-green-800 h-8",attrs:{icon:"fa-solid fa-file-circle-plus"}}),t("span",[a._v("Enviar Información de Ficha")])],1):a._e()]):t("div",{staticClass:"xl:-mt-10"},[t("button",{staticClass:"botonIconActualizar sm:mt-12",on:{click:function(t){return a.enviar_header_ficha(!0)}}},[t("font-awesome-icon",{staticClass:"mr-2 text-yellow-600 h-8",attrs:{icon:"fa-solid fa-file-pen"}}),t("span",[a._v("Actualizar Ficha")])],1)])]),t("Spinner",{attrs:{modalLoading:a.modalLoading}})],1)])])])},o=[function(){var a=this,t=a._self._c;return t("h1",{staticClass:"text-black text-center text-4xl ml-66 mt-3 mb-1 sm:mb-1 sm:text-xl font-titulo font-bold"},[t("span",{staticClass:"bg-white tracking-wide text-gray-800 font-titulo font-bold rounded border-b-2 border-gray-600 py-2 px-6 inline-flex items-center -ml-62 mr-4 sm:text-lg"},[a._v(" Ficha Técnica de Atención ")])])}],i=(e("99af"),e("ac1f"),e("1276"),e("4669")),s=e("ccc9"),n=e("225c"),c=e("9909"),l=e("11b3"),d="http://201.99.110.3:86/api",m={name:"Diagnostico",components:{HeaderFalla:i["a"],ImagenesFichaDiagnostico:s["a"],Spinner:n["a"]},data:function(){return{datosHeader:{},type:"DIAGNOSTICO",reporteInsertado:!1,modalImage:!1,botonEditCreate:!0,tipoFalla:1,blockBotonModal:!1,modalLoading:!1}},beforeMount:function(){"Editar"==this.$route.params.tipoVista&&(this.reporteInsertado=!0,this.botonEditCreate=!1)},methods:{bloquear_boton_diagnostioc_img:function(a){this.blockBotonModal=a},mapear_tipo_falla:function(a){this.tipoFalla=a},actualizar_header:function(a){var t=this;this.datosHeader=a.header,0==a.value?(this.modalLoading=!0,this.$http.get("".concat(d,"/FichaTecnicaAtencion/Images/GetPaths/").concat(a.header.referenceNumber.split("-")[0],"/").concat(a.header.referenceNumber)).then((function(e){e.data.length>0?a.crear&&t.insertar_ficha_falla(a.value):t.$notify.warning({title:"Ops!!",class:"font-titulo",msg:"SE NECESITA MINIMO UNA FOTO.",position:"bottom right",styles:{height:100,width:500}})}))):a.crear&&(this.modalLoading=!0,0==this.botonEditCreate&&a.header.tipoFalla<=1?this.$http.get("".concat(d,"/FichaTecnicaAtencion/Images/GetPaths/").concat(a.header.referenceNumber.split("-")[0],"/").concat(a.header.referenceNumber)).then((function(e){e.data.length>0?t.insertar_ficha_falla(a.value):t.$notify.warning({title:"Ops!!",class:"font-titulo",msg:"SE NECESITA MINIMO UNA FOTO.",position:"bottom right",styles:{height:100,width:500}})})):this.insertar_ficha_falla(a.value))},cerrar_modal_imagenes:function(){this.modalImage=!1,this.botonEditCreate=!1},enviar_header_ficha:function(a){l["a"].$emit("validar_header_diagnostico",a)},insertar_ficha_falla:function(a){var t=this;if(a){var e="Editar"==this.$route.params.tipoVista?0:1;e=0==this.botonEditCreate?0:1;var r={referenceNumber:this.datosHeader.referenceNumber,typeFaultId:this.datosHeader.tipoFalla,intervention:this.datosHeader.solucionFalla,updateFlag:e};this.$http.post("".concat(d,"/FichaTecnicaAtencion/Insert/").concat(r.referenceNumber.split("-")[0]),r).then((function(){t.reporteInsertado=!0,1==r.typeFaultId?0!=t.botonEditCreate&&(t.modalLoading=!1,t.modalImage=!0):(c["a"].generar_pdf_ficha_falla(t.datosHeader.referenceNumber),"Editar"==t.$route.params.tipoVista?t.$router.push("/ConcentradoFichas"):void 0==t.$route.query.referenceNumberFinishDiagnostic?t.$router.push("/NuevoDtc/Crear/".concat(t.datosHeader.referenceNumber,"/").concat(t.datosHeader.tipoFalla)):t.$router.push("/Home")),"Editar"==t.$route.params.tipoVista&&(t.modalLoading=!1,t.modalImage=!1,c["a"].generar_pdf_ficha_falla(t.datosHeader.referenceNumber),t.datosHeader.tipoFalla<=1&&t.$router.push("/Home"))}))}else c["a"].generar_pdf_ficha_falla(this.datosHeader.referenceNumber),this.datosHeader.tipoFalla>1&&void 0==this.$route.query.referenceNumberFinishDiagnostic?this.$router.push("/NuevoDtc/Crear/".concat(this.datosHeader.referenceNumber,"/").concat(this.datosHeader.tipoFalla)):this.$router.push("/Home")}}},u=m,h=(e("f248"),e("2877")),f=Object(h["a"])(u,r,o,!1,null,null,null);t["default"]=f.exports},f248:function(a,t,e){"use strict";e("6908")}}]);
//# sourceMappingURL=chunk-5e76002a.4471c00c.js.map