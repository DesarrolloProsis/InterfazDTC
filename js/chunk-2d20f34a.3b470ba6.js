(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f34a"],{b347:function(e,t,a){"use strict";a.r(t);a("d3b7"),a("25f0"),a("b0c0"),a("d81d"),a("4de4");var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container mx-auto font-titulo"},[t("HeaderGenerico",{attrs:{titulo:"ACTA ADMINISTRATIVA INFORMATIVA (ENTREGA-RECEPCIÓN)",subtitulo:"FORMATO 1-B",tipo:"anexo1A"}}),t("div",{staticClass:"mt-1 mb-1 text-sm flex flex-col leading-7 sm:block sm:p-1 sm:pr-2 sm:text-xs border sm:m-1 shadow-md md:w-auto text-justify p-6"},[e._m(0),t("p",[e._v(" REALIZADO AL EQUIPO DE CONTROL DE TRANSITO DE "),t("label",{staticClass:"font-bold"},[e._v("CARRIL "+e._s(this.nombrecarriles.toString()))]),e._v(", EN LA PLAZA DE COBRO "),t("label",{staticClass:"font-bold"},[e._v("No. "+e._s(this.plazadtc[0].plaza.toUpperCase())+",")]),e._v(" PERTENECIENTE A LA "),t("label",{staticClass:"font-bold"},[e._v(e._s(this.plazadtc[0].regionalCoordination.toUpperCase()))])]),t("p",[e._v(" EN LA CIUDAD DE "),t("label",{staticClass:"font-bold ml-1 uppercase"},[e._v(e._s(this.ciudad[0].ciudad)+", "+e._s(this.ciudad[0].estado))]),e._v(", SIENDO "),t("datetime",{staticClass:"ml-2 inline-flex",attrs:{"use12-hour":"",type:"datetime",name:"HoraInicio","input-class":"inputanexo"},model:{value:e.fechaapertura,callback:function(t){e.fechaapertura=t},expression:"fechaapertura"}}),e._v(" EL "),t("label",{staticClass:"font-bold"},[e._v(e._s(this.plazadtc[0].adminName.toUpperCase()))]),e._v(" ADMINISTRADOR DE LA PLAZA DE COBRO, EL"),t("label",{staticClass:"font-bold"},[e._v(" "+e._s(this.lista_DTC_Filtrada[0].name.toUpperCase()))]),e._v(", TÉCNICO REPRESENTANTE DE LA EMPRESA "),t("label",{staticClass:"font-bold"},[e._v("PROYECTOS Y SISTEMAS INFORMATICOS S.A. DE C.V.")]),e._v(" TENIENDO COMO TESTIGOS DE ASISTENCIA A: ")],1),t("div",{staticClass:"flex w-full gap-4 p-2"},[t("div",{staticClass:"inline-block relative w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:this.anexo.testigo1Id,expression:"this.anexo.testigo1Id"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(this.anexo,"testigo1Id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Selecciona a un testigo")]),e._l(e.testigoscompleto,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2),t("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])]),t("div",{staticClass:"inline-block relative w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:this.anexo.testigo2Id,expression:"this.anexo.testigo2Id"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(this.anexo,"testigo2Id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Selecciona a un testigo")]),e._l(e.testigoscompleto,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2),t("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])]),t("p",{},[e._v(" PARA HACER CONSTAR QUE LA SUSTITUCIÓN DE COMPONENTES DEL EQUIPO DEL "),t("span",{staticClass:"font-bold"},[e._v("CARRIL "+e._s(this.nombrecarriles.toString()))]),e._v(", DE ACUERDO A LA SOLICITUD "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.solicitud,expression:"solicitud"}],staticClass:"inputanexo",attrs:{type:"text",placeholder:"URC-SOC.2314-2021"},domProps:{value:e.solicitud},on:{input:function(t){t.target.composing||(e.solicitud=t.target.value)}}}),e._v(", DE FECHA "),t("datetime",{staticClass:"inline-flex",attrs:{"input-class":"inputanexo"},model:{value:e.fechasolicitud,callback:function(t){e.fechasolicitud=t},expression:"fechasolicitud"}}),e._v(", Y AUTORIZADA EN OFICIO "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.oficio,expression:"oficio"}],staticClass:"inputanexo",attrs:{type:"text",placeholder:"DO/3741/2021"},domProps:{value:e.oficio},on:{input:function(t){t.target.composing||(e.oficio=t.target.value)}}}),e._v(" DE FECHA "),t("datetime",{staticClass:"inline-flex",attrs:{"input-class":"inputanexo"},model:{value:e.fechaoficio,callback:function(t){e.fechaoficio=t},expression:"fechaoficio"}}),e._v(" POR LA GERENCIA DE MANTENIMIENTO Y MODERNIZACIÓN DE EQUIPOS DE PEAJE; PARA CUYO EFECTÓ FUÉ NECESARIO REPONER EN FECHA "),t("datetime",{staticClass:"inline-flex",attrs:{"input-class":"inputanexo",disabled:""},model:{value:e.fechaapertura,callback:function(t){e.fechaapertura=t},expression:"fechaapertura"}}),e._v(" LAS PARTES QUE A CONTINUACIÓN SE DETALLAN. ")],1),t("p",{staticClass:"text-sm"},[e._v(" LOS EQUIPOS/COMPONENTES DAÑADOS EL ADMINISTRADOR DEBERÁ IDENTIFICAR Y EMBALAR, ENVIANDOLOS EN UN PERÍODO DE 5 DÍAS MÁXIMO AL ÁLMACÉN DE LA COORDINACION REGIONAL POR OFICIO, PARA SU DESTINO FINAL CONFORME LA NORMA CAPUFE ")]),t("p",{staticClass:"text-sm"},[e._v(" LOS TRABAJOS, INSTALACIÓN Y OPERACIÓN DE LA PLAZA DE COBRO QUEDAN A ENTERA SATISFACCIÓN DEL ADMINISTRADOR DE LA PLAZA DE COBRO Y/O ENCARGADO DE TURNO. ")]),t("h3",{staticClass:"font-bold text-sm mt-2"},[e._v("COMPONENTES Y/O REFACCIONES DAÑADAS:")]),t("TablaEquipoMalo",{attrs:{listaComponentes:e.listaComponentes,dateSinester:e.datosSinester.SinisterDate,Editar:!0,plazareferencia:this.lista_DTC_Filtrada[0].referenceSquare,dtcreference:this.$route.params.dtcReference,componentesinsertados:this.componenteseditadostraidos},on:{listacarriles:e.onagregarcomponentes,listanombrecom:e.onagregarnombrescomponentes,componentesfinales:e.agregarcomponenteseditados}}),t("p",{staticClass:"text-sm mb-2 uppercase"},[e._v("Supervisor de plaza "),t("span",{staticClass:"text-sm font-bold"},[e._v(e._s(this.lista_DTC_Filtrada[0].name))])]),t("div",{staticClass:"inline-flex mt-4"},[t("p",{staticClass:"mr-2"},[e._v("SE CIERRA LA PRESENTE ACTA EN FECHA")]),t("datetime",{staticClass:"inline-flex",attrs:{"input-class":"inputanexo",disabled:""},model:{value:e.fechaapertura,callback:function(t){e.fechaapertura=t},expression:"fechaapertura"}}),t("p",{staticClass:"ml-2"},[e._v(",SIENDO LAS")]),t("datetime",{staticClass:"inline-flex ml-2",attrs:{type:"time","input-class":"inputanexo"},model:{value:e.fechacierre,callback:function(t){e.fechacierre=t},expression:"fechacierre"}})],1),t("div",{staticClass:"mt-4"},[t("ValidationObserver",{ref:"observer"},[t("div",{staticClass:"w-full"},[t("ValidationProvider",{attrs:{name:"ComentarioCalendario",rules:"max:500"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.errors;return[t("span",{staticClass:"text-center font-titulo font-semibold uppercase sm:flex sm:flex-col md:grid lg:grid"},[e._v("Observaciones para reporte fotografico equipo nuevo")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comentario,expression:"comentario"}],staticClass:"block container placeholder-gray-500 textAreaCalendario sm:mx-auto md:mx-auto lg:mx-auto",attrs:{placeholder:"Inserte observaciones del reporte fotografico",name:"ComentarioCalendario",maxlength:e.limite},domProps:{value:e.comentario},on:{input:function(t){t.target.composing||(e.comentario=t.target.value)}}}),e._v(" "),t("span",{staticClass:"text-red-600 text-xs block"},[e._v(e._s(o[0]))]),t("span",{staticClass:"text-xs text-gray-500"},[e._v(e._s(e.restante)+"/500")])]}}])})],1)])],1),t("div",{staticClass:"p-2 mb-10 sm:mb-18 flex justify-center w-full mt-2"},[t("button",{staticClass:"botonIconCrear",class:{CrearDeshabilitado:e.modalLoading,"bg-gray-300 hover:text-black border-black hover:border-black cursor-not-allowed opacity-50":e.modalLoading,"hover:bg-gray-300 hove:border-black":e.modalLoading},attrs:{disabled:e.modalLoading},on:{click:function(t){return e.validacionanexo()}}},[t("img",{staticClass:"mr-2",attrs:{src:a("1d89"),width:"35",height:"35"}}),t("span",[e._v("Editar anexo 1-B")])])])],1),t("Modal",{attrs:{showing:e.modalImage},on:{close:function(t){e.modalImage=!1}}},[t("div",{staticClass:"justify-center text-center block"},[t("ImagenesAnexo",{attrs:{reporteDataInsertada:!0,tipo:"Anexo",referenceNumber:this.lista_DTC_Filtrada[0].referenceNumber,maximofotosanexo:this.double,referenciaAnexo:this.$route.params.anexoReference,subversionAnexo:!0,editar:!0},on:{"bloquear-boton-diagnostico":e.bloquear_boton_anexo_img}}),t("button",{staticClass:"botonIconCrear mt-6",class:{"bg-gray-300 hover:text-black border-black hover:border-black cursor-not-allowed opacity-50":e.blockBotonModal,"hover:bg-gray-300 hove:border-black":e.blockBotonModal},attrs:{disabled:e.blockBotonModal},on:{click:function(t){return e.pasarinsertaranexo()}}},[t("img",{staticClass:"mr-2",attrs:{src:a("1d89"),width:"35",height:"35"}}),t("span",[e._v("Editar Anexo 1-B")])])],1)]),t("Modal",{attrs:{showing:e.modalvalidacionanexo},on:{close:function(t){e.modalvalidacionanexo=!1}}},[t("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{staticClass:"sm:flex sm:items-start"},[t("div",{staticClass:"w-12 mx-auto flex-shrink-0 flex items-center justify-center h-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[t("ExclamationIcon",{staticClass:"h-10 w-10 text-red-600",attrs:{"aria-hidden":"true"}})],1),t("h1",{staticClass:"text-xl text-center font-bold"},[e._v("NO SE PUEDE GENERAR EL ANEXO")]),t("div",{staticClass:"text-justify mt-3 sm:mt-0 sm:ml-4 sm:text-left"},[t("div",{staticClass:"mt-2"},[t("p",{},[e._v("Por las siguientes razones no se puede generar el anexo:")])]),t("div",[t("ul",{staticClass:"mt-3 list-disc list-inside text-justify"},e._l(e.errores,(function(a){return t("li",{key:a},[e._v(e._s(a))])})),0)])])])]),t("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.limpiarvalidacion()}}},[e._v("Continuar")])])]),t("Modal",{attrs:{showing:e.modalconfirmacionanexo},on:{close:function(t){e.modalconfirmacionanexo=!1}}},[t("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{staticClass:"sm:flex sm:items-start"},[t("div",{staticClass:"w-12 mx-auto flex-shrink-0 flex items-center justify-center h-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},[t("CheckCircleIcon",{staticClass:"h-10 w-10 text-green-600",attrs:{"aria-hidden":"true"}})],1),t("h1",{staticClass:"text-xl text-center font-bold"},[e._v("TU ANEXO ESTA COMPLETO")]),t("div",{staticClass:"text-justify mt-3 sm:mt-0 sm:ml-4 sm:text-left"},[t("div",{staticClass:"mt-2"},[t("p",{},[e._v("los datos de tu anexo son los siguientes:")])]),t("div",[t("ul",{staticClass:"mt-3 list-disc list-inside text-justify"},[t("li",[e._v("DTC: "+e._s(this.lista_DTC_Filtrada[0].referenceNumber))]),t("li",[e._v("Fecha de Apertura: "+e._s(this.fechaaperturaformateada))]),t("li",[e._v("Solicitud: "+e._s(this.anexo.solicitud))]),t("li",[e._v("Fecha de solicitud: "+e._s(this.anexo.solicitudfechainicio))]),t("li",[e._v("Oficio: "+e._s(this.anexo.folioOficio))]),t("li",[e._v("Fecha Oficio:"+e._s(this.anexo.fechaoficioinicio))])])])])])]),t("div",{staticClass:"flex gap-4 bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.insertaranexo()}}},[e._v("Confirmar")]),t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-500 text-base font-medium text-white hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){e.modalconfirmacionanexo=!1}}},[e._v("Cancelar")])])]),t("Modal",{attrs:{showing:e.modaldescarga},on:{close:function(t){e.modaldescarga=!1}}},[t("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{staticClass:"sm:flex sm:items-start"},[t("div",{staticClass:"w-12 mx-auto flex-shrink-0 flex items-center justify-center h-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[t("DownloadIcon",{staticClass:"h-10 w-10 text-blue-800",attrs:{"aria-hidden":"true"}})],1),t("h1",{staticClass:"text-xl text-center"},[e._v("SE GENERO EL ANEXO DEL DTC CON REFERENCIA "),t("b",[e._v(e._s(this.lista_DTC_Filtrada[0].referenceNumber))])])])]),t("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.saliranexos()}}},[e._v("Regresar al menu principal")])])]),t("Spinner",{attrs:{modalLoading:e.modalLoading}})],1)},s=[function(){var e=this,t=e._self._c;return t("p",{},[e._v("SE LEVANTA LA PRESENTE ACTA, PARA HACER CONSTAR LA SUSTITUCIÓN DE COMPONENTES "),t("label",{staticClass:"font-bold"},[e._v("POR FÍN DE VIDA ÚTIL/REUBICACIÓN/ACONDICIONAMIENTO, ")])])}],n=a("c7eb"),i=a("1da1"),r=(a("99af"),a("ac1f"),a("1276"),a("a434"),a("4201")),c=a("6383"),l=a("859b"),d=a("ccc9"),u=a("d101"),m=a("a374"),f=a("ddc6"),p=a("c1df"),h=a.n(p),x=a("225c"),v="http://201.99.110.3:86/api",b={name:"Anexo1-A",components:{HeaderGenerico:r["a"],TablaEquipoMalo:c["a"],Datetime:l["Datetime"],ImagenesAnexo:d["a"],Modal:m["a"],ExclamationIcon:f["c"],CheckCircleIcon:f["a"],DownloadIcon:f["b"],Spinner:x["a"]},data:function(){return{datosSinester:{ReferenceNumber:"",SinisterNumber:"",ReportNumber:"",SinisterDate:"",FailureDate:"",FailureNumber:"",ShippingElaboracionDate:"",Diagnosis:"",Observation:"",TypeDescriptionId:1,UserId:null,AgremmentInfoId:null,Descripcion:null,Observaciones:null},listaComponentes:[],fechaSiniestoEdit:!1,sizeSmall:!1,boolCambiarPlaza:!1,fecha_validacion:"",modalReferencia:!1,arrayReference:[],referenceSelected:"",tipoPlazaSelect:"",testigo1:"",testigo2:"",fechasiniestro:"",modalImage:!1,modalLoading:!1,listaSupervisor:[],dtc_filtrado:[],listaPlazas:[],plazadtc:[],componentesseleccionados:[],nombrecarriles:[],nombrecomponentes:[],componentesfinaleseditados:[],fechaapertura:"",fechacierre:"",selectsupervisor:"",solicitud:"",oficio:"",fechasolicitud:"",fechaoficio:"",testigoscompleto:[],idtestigos:0,blockBotonModal:!1,anexo:{},objetocomponentesanexosaeditar:[],arraycomponentes:[],componenteseditadostraidos:[],modalvalidacionanexo:!1,errores:[],vfechaapertura:!1,vfechacierre:!1,vtestigo1:!1,vtestigo2:!1,vsuperior:!1,modalconfirmacionanexo:!1,modaldescarga:!1,fechaaperturaformateada:"",fechacierreformateada:"",comentario:"",numerodefotos:0,limite:500,ciudad:[],referenciaAnexo:"",subversionimagenes:!1}},created:function(){this.filtro_dtc()},methods:{filtro_dtc:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var a,o,s,i,r,c,l,d,m,f,p,h,x,b,g,C,E,A,I,O,D,_;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.params.dtcReference,o=e.$route.params.anexoReference,t.prev=2,t.next=5,u["a"].filtrarDTC(e.filtroVista,"","",a,void 0,!1,void 0);case 5:return s=t.sent,i=s.filter((function(t){return t.referenceNumber==e.$route.params.dtcReference})),e.lista_DTC_Filtrada=i,r=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"],c=new Date(e.lista_DTC_Filtrada[0].sinisterDate),l=c.getDate()+" DE "+r[c.getMonth()]+" DE "+c.getFullYear(),e.fechasiniestro=l,t.next=14,e.$store.state.Login.listaHeaderDtcUser;case 14:return d=t.sent,m=d.filter((function(t){return t.adminSquareId==e.lista_DTC_Filtrada[0].adminId})),e.plazadtc=m,t.next=19,fetch("".concat(v,"/AnexoDTC/Testigos/").concat(e.lista_DTC_Filtrada[0].referenceSquare,"/").concat(e.lista_DTC_Filtrada[0].squareCatalogId));case 19:return f=t.sent,t.next=22,f.json();case 22:return p=t.sent,h=p.result,e.testigoscompleto=h,t.next=27,fetch("".concat(v,"/AnexoDTC/HeaderAnexo/").concat(e.lista_DTC_Filtrada[0].referenceSquare,"/").concat(o));case 27:return x=t.sent,t.next=30,x.json();case 30:return b=t.sent,g=b.result,e.anexo=g[0],console.log(e.anexo),null==e.anexo.observaciones?e.comentario="":e.comentario=e.anexo.observaciones,e.solicitud=e.anexo.solicitud,e.oficio=e.anexo.folioOficio,e.fechaapertura=e.anexo.fechaApertura,e.fechacierre=e.anexo.fechaCierre,e.fechasolicitud=e.anexo.fechaSolicitudInicio,e.fechaoficio=e.anexo.fechaOficioInicio,e.referenciaAnexo=e.anexo.anexoReference,e.subversionimagenes=e.anexo.isSubVersion,console.log(e.referenciaAnexo),t.next=46,fetch("".concat(v,"/AnexoDTC/HistoricoComponetesAnexo/").concat(e.lista_DTC_Filtrada[0].referenceSquare,"/").concat(o));case 46:return C=t.sent,t.next=49,C.json();case 49:return E=t.sent,A=E.result,e.objetocomponentesanexosaeditar=A,t.next=54,fetch("".concat(v,"/AnexoDTC/ComponentesRequest/").concat(e.lista_DTC_Filtrada[0].referenceSquare,"/").concat(e.$route.params.dtcReference));case 54:return I=t.sent,t.next=57,I.json();case 57:return O=t.sent,e.arraycomponentes=O.result,t.next=61,e.$store.state.Login.listaPlazas;case 61:D=t.sent,_=D.filter((function(t){return t.referenceSquare==e.plazadtc[0].referenceSquare})),e.ciudad=_,t.next=69;break;case 66:t.prev=66,t.t0=t["catch"](2),console.log(t.t0);case 69:e.filtrarcomponentes(e.objetocomponentesanexosaeditar,e.arraycomponentes);case 70:case"end":return t.stop()}}),t,null,[[2,66]])})))()},onagregarcomponentes:function(e){var t=e.filter((function(t,a){return e.indexOf(t)===a}));this.nombrecarriles=t},onagregarnombrescomponentes:function(e){var t=e.filter((function(t,a){return e.indexOf(t)===a}));this.nombrecomponentes=t},agregarcomponenteseditados:function(e){this.componentesfinaleseditados=e},filtrarcomponentes:function(e,t){for(var a=0;a<t.length;a++)for(var o=0;o<e.length;o++)if(t[a].requestedComponentId==e[o].componentDTCId){var s={brand:t[a].brand,brandPropuesto:t[a].brandPropuesto,lane:t[a].lane,model:t[a].model,modelPropuesto:t[a].modelPropuesto,nameComponent:t[a].nameComponent,observation:t[a].observation,requestedComponentId:t[a].requestedComponentId,serialNumber:e[o].numeroSerie,useInAnexo:t[a].useInAnexo};this.componenteseditadostraidos.push(s)}},insertaranexo:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var a,o,s,i,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.modalImage=!0,a=h()(e.fechaapertura.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),o=h()(e.fechacierre.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),s=h()(e.fechasolicitud.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),i=h()(e.fechaoficio.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),null==e.comentario&&e.comentario,console.log(e.comentario),r={DTCReference:e.anexo.dtcReference,AnexoReference:e.$route.params.anexoReference,FechaApertura:a,FechaCierre:o,Solicitud:e.solicitud,FechaSolicitudInicio:s,FolioOficio:e.oficio,FechaOficioInicio:i,Observaciones:e.comentario,SupervisorId:e.anexo.supervisorId,Testigo1Id:e.anexo.testigo1Id,Testigo2Id:e.anexo.testigo2Id,TipoAnexo:"B",ComponentesAnexo:e.componentesfinaleseditados},console.log(r);try{e.$http.post("".concat(v,"/AnexoDTC/").concat(e.lista_DTC_Filtrada[0].referenceSquare,"/true"),r).then((function(t){e.modalLoading=!0,console.log(t);var a="".concat(v,"/ReporteFotografico/CopyAnexoImages/").concat(e.$route.params.dtcReference.split("-")[0],"/").concat(e.$route.params.dtcReference,"/").concat(e.$route.params.anexoReference);e.$http.post(a).then((function(){setTimeout((function(){e.modalLoading=!1,e.modalconfirmacionanexo=!1,e.modalImage=!0}),2e3)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}catch(n){console.error(n)}case 10:case"end":return t.stop()}}),t)})))()},bloquear_boton_anexo_img:function(e){this.blockBotonModal=e},validacionanexo:function(){var e=new Date(this.fechaapertura),t=new Date(this.fechacierre),a=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),o=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate(),s=o+" "+a,n=new Date(s);this.fechacierre=n.toISOString();var i=Date.now();if(""==this.fechaapertura&&this.errores.push("La fecha de apertura esta vacia"),""==this.fechacierre&&this.errores.push("La fecha de cierre esta vacia"),""==this.anexo.testigo1Id&&this.errores.push("Debes seleccionar el primer testigo"),""==this.anexo.testigo2Id&&this.errores.push("Debes seleccionar el segundo testigo"),this.anexo.testigo1Id==this.anexo.testigo2Id&&this.errores.push("Los Testigos no pueden ser los mismos"),0==this.componentesfinaleseditados.length){var r=this.objetocomponentesanexosaeditar.map((function(e){var t={RequestedComponentId:e.componentDTCId,SerialNumber:e.numeroSerie};return t}));this.componentesfinaleseditados=r}if(this.objetocomponentesanexosaeditar.length>this.componentesfinaleseditados.length){for(var c=this.objetocomponentesanexosaeditar.map((function(e){return e.componentDTCId})),l=0;l<this.componentesfinaleseditados.length;l++){var d=c.indexOf(this.componentesfinaleseditados[l].RequestedComponentId);-1!=d&&this.objetocomponentesanexosaeditar.splice(d,1)}for(var u=0;u<this.objetocomponentesanexosaeditar.length;u++){var m={RequestedComponentId:this.objetocomponentesanexosaeditar[u].componentDTCId,SerialNumber:this.objetocomponentesanexosaeditar[u].numeroSerie};this.componentesfinaleseditados.push(m)}}this.componentesfinaleseditados.length==this.objetocomponentesanexosaeditar.lenght&&(this.componentesfinaleseditados=this.componentesfinaleseditados),e>i&&this.errores.push("La fecha de apertura no debe ser mayor al dìa de hoy");var f=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"],p=new Date(this.fechaapertura),h=p.getDate()+" DE "+f[p.getMonth()]+" DE "+p.getFullYear();this.fechaaperturaformateada=h,this.errores.length>0?this.modalvalidacionanexo=!0:this.modalconfirmacionanexo=!0},limpiarvalidacion:function(){this.errores=[],this.modalvalidacionanexo=!1},pasarinsertaranexo:function(){var e=this;this.modalImage=!1,this.modaldescarga=!0,setTimeout((function(){e.$router.push("/ConcentradoDTCFacturados"),document.querySelector("body").classList.remove("overflow-hidden")}),2e3)},saliranexos:function(){this.modaldescarga=!1,this.modalconfirmacionanexo=!1,this.modalImage=!1,this.modalvalidacionanexo=!1,this.$router.push("/ConcentradoDTCFacturados"),document.querySelector("body").classList.remove("overflow-hidden")}},computed:{restante:function(){return this.comentario.length},double:function(){return 2*this.componentesfinaleseditados.length}}},g=b,C=a("2877"),E=Object(C["a"])(g,o,s,!1,null,null,null);t["default"]=E.exports}}]);
//# sourceMappingURL=chunk-2d20f34a.3b470ba6.js.map