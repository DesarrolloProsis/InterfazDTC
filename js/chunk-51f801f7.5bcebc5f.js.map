{"version":3,"sources":["webpack:///./src/views/Correctivo/Concentrados/ConcentradoFichas.vue?cef9","webpack:///./src/views/Correctivo/Concentrados/ConcentradoFichas.vue","webpack:///src/views/Correctivo/Concentrados/ConcentradoFichas.vue","webpack:///./src/views/Correctivo/Concentrados/ConcentradoFichas.vue?4c85","webpack:///./src/views/Correctivo/Concentrados/ConcentradoFichas.vue?df16"],"names":["render","_vm","this","_c","_self","staticClass","attrs","modalSubirSellado","objInsertEscaneado","tipoEscaneado","on","limpiar_componete_escaneado","class","modalcambiarUsuario","ref","infoCambiarUsuario","referenceDTC","_v","_s","referenceNumber","scopedSlots","_u","key","fn","errors","directives","name","rawName","value","userChangeDf","expression","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","_l","listaTecnicosPlaza","item","domProps","userId","nombre","comentario","composing","restante_comentario","actualizar_user_id_df","_e","modalEliminar","_m","infoEliminar","comentarioBorrar","borrar_diagnostico_falla","filtrar_concentrado_diagnostico","limpiar_filtros","guardar_palabra_busqueda","listaFicha","loadingTabla","opticones_select_acciones","text","formatoFecha","LetrasGris","acciones_mapper","modalLoading","staticRenderFns","require","components","HeaderGenerico","PdfEscaneado","TablaGenerica","Spinner","data","infoFichasFallaCompleta","infoFichasFallaFiltrada","typeUser","refNum","statusDTC","beforeMount","then","setTimeout","catch","methods","actualizarTabla","objFiltro","formato_fecha_hora_diagnostico","dateInicio","dateFin","fechaInicio","fechaFin","editar_diagnostico_falla","path","query","referenciaDtc","terminar_ficha_diagnostico","carrilesMapeados","objDateParse","numeroPlaza","ServiceCookies","capufeLaneNum","idGare","lane","causaFalla","descripcionFalla","diagnosticoFalla","fechaDiagnostico","folioFalla","horaFin","horaInicio","numeroReporte","ubicacion","objRowUpdate","modal_Cambiar_Usuario","resolve","reject","actualizar_user","title","msg","position","styles","height","width","ServiceReporte","accionCss","tipo","img","filtroOpciones","computed","component"],"mappings":"kHAAA,W,2ECAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,MAAM,CAACE,YAAY,oCAAoC,CAACF,EAAG,eAAe,CAACG,MAAM,CAAC,WAAaL,EAAIM,kBAAkB,UAAYN,EAAIO,mBAAmB,YAAcP,EAAIQ,eAAeC,GAAG,CAAC,+BAA+BT,EAAIU,+BAA+BR,EAAG,MAAM,CAACE,YAAY,iBAAiBO,MAAM,CAAC,kBAAmBX,EAAIY,sBAAsB,CAAEZ,EAAIY,oBAAqBV,EAAG,MAAM,CAACE,YAAY,kIAAkI,CAACF,EAAG,qBAAqB,CAACW,IAAI,YAAY,CAAyC,MAAvCb,EAAIc,mBAAmBC,aAAuBb,EAAG,IAAI,CAACE,YAAY,mCAAmC,CAACJ,EAAIgB,GAAG,kEAAkEd,EAAG,OAAO,CAACE,YAAY,wBAAwB,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIc,mBAAmBI,oBAAoBhB,EAAG,MAAMF,EAAIgB,GAAG,0CAA0Cd,EAAG,OAAO,CAACE,YAAY,0BAA0B,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIc,mBAAmBI,oBAAoBhB,EAAG,MAAMF,EAAIgB,GAAG,2CAA2Cd,EAAG,OAAO,CAACE,YAAY,0BAA0B,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIc,mBAAmBC,mBAAmBb,EAAG,IAAI,CAACE,YAAY,mCAAmC,CAACJ,EAAIgB,GAAG,qFAAqFd,EAAG,OAAO,CAACE,YAAY,wBAAwB,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIc,mBAAmBI,sBAAsBhB,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,IAAI,CAACE,YAAY,4CAA4C,CAACJ,EAAIgB,GAAG,iCAAiCd,EAAG,qBAAqB,CAACG,MAAM,CAAC,KAAO,gBAAgB,MAAQ,YAAYc,YAAYnB,EAAIoB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,YAAoB,IAATC,EAAS,EAATA,OAAU,MAAO,CAACrB,EAAG,SAAS,CAACsB,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAO3B,EAAI4B,aAAcC,WAAW,iBAAiBzB,YAAY,qBAAqBK,GAAG,CAAC,OAAS,SAASqB,GAAQ,IAAIC,EAAgBC,MAAMC,UAAUC,OAAOC,KAAKL,EAAOM,OAAOC,SAAQ,SAASC,GAAG,OAAOA,EAAEC,YAAWC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAEX,MAAM,OAAOc,KAAOzC,EAAI4B,aAAaE,EAAOM,OAAOO,SAAWZ,EAAgBA,EAAc,MAAM/B,EAAI4C,GAAI5C,EAAI6C,oBAAoB,SAASC,EAAKzB,GAAK,OAAOnB,EAAG,SAAS,CAACmB,IAAIA,EAAI0B,SAAS,CAAC,MAAQD,EAAKE,SAAS,CAAChD,EAAIgB,GAAGhB,EAAIiB,GAAG6B,EAAKG,cAAa,GAAG/C,EAAG,OAAO,CAACE,YAAY,8BAA8B,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGM,EAAO,WAAW,MAAK,EAAM,eAAe,GAAGrB,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,IAAI,CAACE,YAAY,4CAA4C,CAACJ,EAAIgB,GAAG,iCAAiCd,EAAG,qBAAqB,CAACG,MAAM,CAAC,KAAO,aAAa,MAAQ,oBAAoBc,YAAYnB,EAAIoB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,YAAoB,IAATC,EAAS,EAATA,OAAU,MAAO,CAACrB,EAAG,WAAW,CAACsB,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAO3B,EAAIkD,WAAYrB,WAAW,eAAezB,YAAY,+BAA+BC,MAAM,CAAC,YAAc,0BAA0B,KAAO,aAAa,UAAY,KAAK0C,SAAS,CAAC,MAAS/C,EAAIkD,YAAazC,GAAG,CAAC,MAAQ,SAASqB,GAAWA,EAAOM,OAAOe,YAAiBnD,EAAIkD,WAAWpB,EAAOM,OAAOT,WAAU3B,EAAIgB,GAAG,KAAKd,EAAG,OAAO,CAACE,YAAY,8BAA8B,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGM,EAAO,OAAOrB,EAAG,OAAO,CAACE,YAAY,yBAAyB,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIoD,qBAAqB,cAAc,MAAK,EAAM,eAAe,GAAGlD,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,SAAS,CAACE,YAAY,iBAAiBK,GAAG,CAAC,MAAQT,EAAIqD,wBAAwB,CAACrD,EAAIgB,GAAG,aAAad,EAAG,SAAS,CAACE,YAAY,oBAAoBK,GAAG,CAAC,MAAQ,SAASqB,GAAQ9B,EAAIY,qBAAsB,EAAOZ,EAAI4B,aAAe,MAAM,CAAC5B,EAAIgB,GAAG,mBAAmB,GAAGhB,EAAIsD,OAAOpD,EAAG,MAAM,CAACE,YAAY,iBAAiBO,MAAM,CAAC,kBAAkBX,EAAIuD,gBAAgB,CAAEvD,EAAIuD,cAAerD,EAAG,MAAM,CAACE,YAAY,kIAAkI,CAACJ,EAAIwD,GAAG,GAAGtD,EAAG,qBAAqB,CAACW,IAAI,YAAY,CAAmC,MAAjCb,EAAIyD,aAAa1C,aAAsBb,EAAG,IAAI,CAACE,YAAY,0DAA0D,CAACJ,EAAIgB,GAAG,0DAA0Dd,EAAG,OAAO,CAACE,YAAY,wBAAwB,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIyD,aAAavC,oBAAoBlB,EAAIgB,GAAG,0BAA0Bd,EAAG,OAAO,CAACE,YAAY,wBAAwB,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIyD,aAAa1C,mBAAmBb,EAAG,IAAI,CAACE,YAAY,0DAA0D,CAACJ,EAAIgB,GAAG,0DAA0Dd,EAAG,OAAO,CAACE,YAAY,wBAAwB,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIyD,aAAavC,sBAAsBhB,EAAG,qBAAqB,CAACG,MAAM,CAAC,KAAO,mBAAmB,MAAQ,oBAAoBc,YAAYnB,EAAIoB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,YAAoB,IAATC,EAAS,EAATA,OAAU,MAAO,CAACrB,EAAG,IAAI,CAACE,YAAY,kDAAkD,CAACJ,EAAIgB,GAAG,YAAYd,EAAG,WAAW,CAACsB,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAO3B,EAAI0D,iBAAkB7B,WAAW,qBAAqBzB,YAAY,qBAAqBC,MAAM,CAAC,KAAO,oBAAoB0C,SAAS,CAAC,MAAS/C,EAAI0D,kBAAmBjD,GAAG,CAAC,MAAQ,SAASqB,GAAWA,EAAOM,OAAOe,YAAiBnD,EAAI0D,iBAAiB5B,EAAOM,OAAOT,WAAUzB,EAAG,OAAO,CAACE,YAAY,8BAA8B,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGM,EAAO,WAAW,MAAK,EAAM,cAAcrB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,SAAS,CAACE,YAAY,iBAAiBK,GAAG,CAAC,MAAQ,SAASqB,GAAQ,OAAO9B,EAAI2D,8BAA8B,CAAC3D,EAAIgB,GAAG,QAAQd,EAAG,SAAS,CAACE,YAAY,+BAA+BK,GAAG,CAAC,MAAQ,SAASqB,GAAQ9B,EAAIuD,eAAgB,KAAS,CAACvD,EAAIgB,GAAG,WAAW,IAAI,GAAGhB,EAAIsD,OAAOpD,EAAG,iBAAiB,CAACG,MAAM,CAAC,OAAS,6CAA6C,KAAO,MAAMI,GAAG,CAAC,kCAAkCT,EAAI4D,gCAAgC,kCAAkC5D,EAAI6D,gBAAgB,YAAY7D,EAAI8D,4BAA4B5D,EAAG,gBAAgB,CAACG,MAAM,CAAC,eAAiBL,EAAI+D,WAAW,aAAe/D,EAAIgE,aAAa,gBAAkBhE,EAAIiE,0BAA0B,gBAAkB,CAAC,CAACC,KAAM,oBAAqB7C,IAAK,mBAAmB,CAAC6C,KAAM,QAAS7C,IAAK,cAAc,CAAC6C,KAAM,oBAAqB7C,IAAK,gBAAiB8C,cAAc,GAAM,CAACD,KAAM,WAAY7C,IAAK,SAAS,CAAC6C,KAAM,eAAgB7C,IAAK,iBAAiB,CAAC6C,KAAM,mBAAoB7C,IAAI,mBAAmB,CAAC6C,KAAM,iBAAkB7C,IAAK,eAAgB+C,YAAW,GAAO,CAACF,KAAM,WAAY7C,IAAK,aAAa,eAAiB,CAAC,CAAC6C,KAAM,oBAAqB7C,IAAK,mBAAmB,CAAC6C,KAAM,oBAAqB7C,IAAK,gBAAiB8C,cAAc,GAAM,CAACD,KAAM,WAAY7C,IAAK,cAAcZ,GAAG,CAAC,kBAAkBT,EAAIqE,mBAAmBnE,EAAG,UAAU,CAACG,MAAM,CAAC,aAAeL,EAAIsE,iBAAiB,QAE/oNC,EAAkB,CAAC,WAAY,IAAIvE,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,KAAK,CAACE,YAAY,+DAA+D,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgBC,MAAM,CAAC,IAAMmE,EAAQ,QAA4B,MAAQ,KAAK,OAAS,QAAQtE,EAAG,IAAI,CAACE,YAAY,uCAAuC,CAACJ,EAAIgB,GAAG,iBAAiBd,EAAG,MAAM,CAACE,YAAY,kCAAkCC,MAAM,CAAC,IAAMmE,EAAQ,QAA4B,MAAQ,KAAK,OAAS,Y,6NCkHpe,+BASe,GACf/C,yBACAgD,YACAC,sBACAC,oBACAC,qBACAC,gBAEAC,KARA,WASA,OACAC,2BACAC,2BACAjB,cACAC,gBACAiB,YACAxB,gBACAC,oBACAH,iBACAjD,qBACAC,sBACAC,4BACAI,uBACAE,sBACA+B,sBACAjB,gBACAsD,UACAhC,cACAiC,YACAb,kBAGAc,uBAAA,WACA,yDACA,qBACA,iDACA,6EACAC,MAAA,YACAC,uBACA,wCACA,oDACA,uCACA,oBACA,QAEAC,OAAA,WACA,kBACA,6BACA,iCAGAC,SACAC,gBADA,WACA,WACA,yDACA,qBACA,iDACA,6EACAJ,MAAA,YACA,wCACA,oDACA,uCACA,qBAEAE,OAAA,WACA,kBACA,6BACA,iCAGA5B,yBAlBA,WAkBA,WACA,6CACA,kDACA,qGACA,qBACA,4BACA,2NACA0B,MAAA,WACA,mBACA,sBACAC,uBACA,sGACA,yBACA,oBACA,SAGAxB,qCACA,UACA,uDACA,4HAEA,uBAGA,8CAGAF,gCA9CA,SA8CA8B,GAAA,WACA,mBACA,qBACAJ,uBACA,iFACA,oBACA,MAEAzB,gBAtDA,WAuDA,8CAEA8B,+BAzDA,SAyDAC,EAAAC,GACA,8DACA,uEACA,0DACA,uEACA,OAAAC,4BAAAC,2BAEAC,yBAhEA,SAgEAlD,GACA,yDACAA,mDACA,mBAAAmD,oDAAAC,OAAApD,OAAAqD,iCAEAC,sCAAA,iKACAC,EAAA,GACAC,EAAA,mDACAxD,mDACAyD,EAAA,6HACAC,yCALA,SAMA,sDANA,OAOAlB,uBACA,yDACAxC,wCACA,mDACA,MACAuD,QACAI,8BACAC,gBACAC,iBAIA,OACAC,0BACAC,oCACAC,oCACAC,wEACAC,2BACAC,cACAC,mBACAC,gCACAjG,kCACAkG,aAEA,gBAAAnB,oDAAAC,OAAApB,YACA,KAhCA,sGAAAsB,GAkCA1F,4BAvGA,WAuGA,WACA,qBACA,0BACA4E,uBACA,4GACA,iCACA,2BACA,gCACA+B,2BACA,6BAEAA,qBACA,4BAEA,wBACA,oBACA,MAEAC,sBAzHA,SAyHAxE,GAAA,WACA,8BACA,0BACA,uEACAuC,MAAA,yDACAE,OAAA,gBAEAlC,sBAhIA,WAgIA,WACA,uFACA,qBACA,iCAQA,qLACAgC,MAAA,WACAkC,QACA,4BAEAhC,OAAA,YACAiC,QAEAlC,uBACAmC,mBACA,kBACA,kBACA,gBACA,mBACAC,YACAC,4EACAC,wBACAC,QAAAC,WAAAC,kBAGA,YAEA,CACA,qBACA,iCAQA,0IACA1C,MAAA,WACAkC,QACA,4BAEAhC,OAAA,YAAAiC,QACAlC,uBACAmC,mBACA,kBACA,gBACA,kBACA,mBACAC,YACAC,4EACAC,wBACAC,QAAAC,WAAAC,kBAGA,UAIA1D,gBAjMA,YAiMA,wBAAI,EAAJ,UACA,2BACA,mCAEA,yBACA,0FAEA,mBACA,iCAEA,oBACA,qBACAiB,uBACA,iBACA,mBACA,oBACA,MAGA,sCACA0C,wDAEA,gCACAA,kDAEA,kCACAA,0DACA,oCACA1C,uBACA0C,4DACA,MAGA,gCACA,iCACA,0BACA,yBACA9G,oCAGA,gCACA,2BACA,0BACA,yBACAA,oCAIA,+BACA8G,sDAEA,+BACAA,sDAEA,gCACA,4BACA,0BACA,qDAEA,iCACAA,0DACA,oCACA1C,uBACA0C,4DACA,OAIA/D,0BArQA,SAqQAnB,GACA,OACA,CAAA4E,uBAAAO,qBAAAC,QAAAC,2BACA,CAAAT,qBAAAO,qBAAAE,2BACA,CAAAT,eAAAO,mBAAAE,iCACA,CAAAT,eAAAO,mBAAAE,yBACA,CAAAT,kCAAAO,qBAAAE,0BACA,CAAAT,4BAAAO,qBAAAE,0BACA,CAAAT,6BAAAO,qBAAAE,0BACA,CAAAT,2BAAAO,mBAAAE,wBACA,CAAAT,2BAAAO,mBAAAE,wBACA,CAAAT,2BAAAO,qBAAAE,0BACA,CAAAT,2BAAAO,qBAAAE,0BACA,CAAAT,2BAAAO,oBAAAE,gCACA,CAAAT,4BAAAO,qBAAAE,2BAEA,2BACA,SAyCA,OAxCAC,aACA,yEACAA,aAEA,sBACAA,cAEA,2BACAA,aACA,yEACAA,aAEA,gBACAA,cAEA,4GACAA,aAEA,iHACAA,cAEA,iFACAA,cAEA,wEACAA,cAOA,2FACAA,cACAA,cAGA,iFACAA,aAEA,IAGAC,UACAjF,oBADA,WAEA,iCCnfyX,I,wBCQrXkF,EAAY,eACd,EACAvI,EACAwE,GACA,EACA,KACA,KACA,MAIa,aAAA+D,E","file":"js/chunk-51f801f7.5bcebc5f.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConcentradoFichas.vue?vue&type=style&index=0&id=3f206942&prod&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"flex justify-center\"},[_c('div',{staticClass:\"grid gap-4 grid-cols-1 py-3 px-3\"},[_c('PdfEscaneado',{attrs:{\"abrirModal\":_vm.modalSubirSellado,\"objInsert\":_vm.objInsertEscaneado,\"tipoReporte\":_vm.tipoEscaneado},on:{\"limpiar-componente-escaneado\":_vm.limpiar_componete_escaneado}}),_c('div',{staticClass:\"sticky inset-0\",class:{'modal-container': _vm.modalcambiarUsuario}},[(_vm.modalcambiarUsuario)?_c('div',{staticClass:\"rounded-lg justify-center border absolute inset-x-0 bg-white border-gray-400 w-69 mx-auto px-12 py-10 shadow-2xl sm:w-66 mt-33\"},[_c('ValidationObserver',{ref:\"observer\"},[(_vm.infoCambiarUsuario.referenceDTC != '--' )?_c('p',{staticClass:\"text-gray-900 font-thin text-md\"},[_vm._v(\" Al cambiar el usuario del Diagnóstico de Falla con Refencia: \"),_c('span',{staticClass:\"text-black font-bold\"},[_vm._v(_vm._s(_vm.infoCambiarUsuario.referenceNumber))]),_c('br'),_vm._v(\" Se cambiará la Ficha con Referencia: \"),_c('span',{staticClass:\"text-red-600 font-bold\"},[_vm._v(_vm._s(_vm.infoCambiarUsuario.referenceNumber))]),_c('br'),_vm._v(\" Y el Dictamen Técnico con Referencia: \"),_c('span',{staticClass:\"text-red-600 font-bold\"},[_vm._v(_vm._s(_vm.infoCambiarUsuario.referenceDTC))])]):_c('p',{staticClass:\"text-gray-900 font-thin text-md\"},[_vm._v(\" Se cambiará el usuario del Diagnóstico de Falla y Ficha Técnica con Referencia: \"),_c('span',{staticClass:\"text-black font-bold\"},[_vm._v(_vm._s(_vm.infoCambiarUsuario.referenceNumber))])]),_c('div',{staticClass:\"mt-10\"},[_c('p',{staticClass:\"pdtcpendientes sm:text-sm sm:text-center\"},[_vm._v(\"Seleccione el Nuevo Usuario\")]),_c('ValidationProvider',{attrs:{\"name\":\"Observaciones\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ errors }){return [_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userChangeDf),expression:\"userChangeDf\"}],staticClass:\"w-full border-none\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.userChangeDf=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.listaTecnicosPlaza),function(item,key){return _c('option',{key:key,domProps:{\"value\":item.userId}},[_vm._v(_vm._s(item.nombre))])}),0),_c('span',{staticClass:\"text-red-600 text-xs block\"},[_vm._v(_vm._s(errors[0]))])]}}],null,false,3161866330)})],1),_c('div',{staticClass:\"mt-5\"},[_c('p',{staticClass:\"pdtcpendientes sm:text-sm sm:text-center\"},[_vm._v(\"Indica el Motivo del Cambio\")]),_c('ValidationProvider',{attrs:{\"name\":\"Comentario\",\"rules\":\"required|max:300\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ errors }){return [_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.comentario),expression:\"comentario\"}],staticClass:\"textAreaCalendario ph-center\",attrs:{\"placeholder\":\"ingresa tus comentarios\",\"name\":\"Comentario\",\"maxlength\":300},domProps:{\"value\":(_vm.comentario)},on:{\"input\":function($event){if($event.target.composing)return;_vm.comentario=$event.target.value}}}),_vm._v(\" \"),_c('span',{staticClass:\"text-red-600 text-xs block\"},[_vm._v(_vm._s(errors[0]))]),_c('span',{staticClass:\"text-xs text-gray-400\"},[_vm._v(_vm._s(_vm.restante_comentario)+\"/300\")])]}}],null,false,3291940635)})],1),_c('div',{staticClass:\"mt-10 text-center\"},[_c('button',{staticClass:\"botonIconCrear\",on:{\"click\":_vm.actualizar_user_id_df}},[_vm._v(\"Cambiar\")]),_c('button',{staticClass:\"botonIconCancelar\",on:{\"click\":function($event){_vm.modalcambiarUsuario = false, _vm.userChangeDf = ''}}},[_vm._v(\"Cancelar\")])])])],1):_vm._e()]),_c('div',{staticClass:\"sticky inset-0\",class:{'modal-container':_vm.modalEliminar}},[(_vm.modalEliminar)?_c('div',{staticClass:\"rounded-lg justify-center border absolute inset-x-0 bg-white border-gray-400 w-69 mx-auto px-12 py-10 shadow-2xl sm:w-66 mt-33\"},[_vm._m(0),_c('ValidationObserver',{ref:\"observer\"},[(_vm.infoEliminar.referenceDTC != '--')?_c('p',{staticClass:\"text-red-600 font-thin text-md sm:text-sm text-justify\"},[_vm._v(\"Se eliminará el Diagnóstico y la Ficha con referencia \"),_c('span',{staticClass:\"text-black font-bold\"},[_vm._v(_vm._s(_vm.infoEliminar.referenceNumber))]),_vm._v(\" y DTC con referencia \"),_c('span',{staticClass:\"text-black font-bold\"},[_vm._v(_vm._s(_vm.infoEliminar.referenceDTC))])]):_c('p',{staticClass:\"text-red-600 font-thin text-md sm:text-sm text-justify\"},[_vm._v(\"Se eliminará el Diagnóstico y la Ficha con referencia \"),_c('span',{staticClass:\"text-black font-bold\"},[_vm._v(_vm._s(_vm.infoEliminar.referenceNumber))])]),_c('ValidationProvider',{attrs:{\"name\":\"comentarioBorrar\",\"rules\":\"required:max:300\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ errors }){return [_c('p',{staticClass:\"text-md mb-1 font-semibold text-gray-900 mt-10\"},[_vm._v(\"Motivo\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.comentarioBorrar),expression:\"comentarioBorrar\"}],staticClass:\"textAreaCalendario\",attrs:{\"name\":\"comentarioBorrar\"},domProps:{\"value\":(_vm.comentarioBorrar)},on:{\"input\":function($event){if($event.target.composing)return;_vm.comentarioBorrar=$event.target.value}}}),_c('span',{staticClass:\"text-red-600 text-xs block\"},[_vm._v(_vm._s(errors[0]))])]}}],null,false,2356355218)}),_c('div',{staticClass:\"mt-5 text-center\"},[_c('button',{staticClass:\"botonIconCrear\",on:{\"click\":function($event){return _vm.borrar_diagnostico_falla()}}},[_vm._v(\"Si\")]),_c('button',{staticClass:\"botonIconCancelar font-boton\",on:{\"click\":function($event){_vm.modalEliminar = false}}},[_vm._v(\"No\")])])],1)],1):_vm._e()]),_c('HeaderGenerico',{attrs:{\"titulo\":'Concentrado de Diagnóstico y Ficha Técnica',\"tipo\":'DF'},on:{\"filtrar-concentrado-diagnostico\":_vm.filtrar_concentrado_diagnostico,\"limpiar-concentrado-diagnostico\":_vm.limpiar_filtros,\"buscar-df\":_vm.guardar_palabra_busqueda}}),_c('TablaGenerica',{attrs:{\"listaDataTable\":_vm.listaFicha,\"loadingTabla\":_vm.loadingTabla,\"validarAcciones\":_vm.opticones_select_acciones,\"normalheaderKey\":[{text: 'Numero Referencia', key: 'referenceNumber'},{text: 'Plaza', key: 'squareName'},{text: 'Fecha Diagnostico', key: 'diagnosisDate', formatoFecha: true},{text: 'Carriles', key: 'lanes'},{text: 'Numero Falla', key: 'failuerNumber'},{text: 'Numero Siniestro', key:'siniesterNumber'},{text: 'Referencia DTC', key: 'referenceDTC', LetrasGris:true },{text: 'Acciones', key: 'Acciones'}],\"movilHeaderKey\":[{text: 'Numero Referencia', key: 'referenceNumber'},{text: 'Fecha Diagnostica', key: 'diagnosisDate', formatoFecha: true},{text: 'Acciones', key: 'Acciones'}]},on:{\"acciones-mapper\":_vm.acciones_mapper}}),_c('Spinner',{attrs:{\"modalLoading\":_vm.modalLoading}})],1)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h1',{staticClass:\"mb-10 text-center font-titulo font-bold text-4xl sm:text-xl\"},[_c('img',{staticClass:\"ml-2 sm:-ml-4\",attrs:{\"src\":require(\"@/assets/img/warning.png\"),\"width\":\"35\",\"height\":\"35\"}}),_c('p',{staticClass:\"-mt-10 text-black sm:-ml-3 sm:-mt-6\"},[_vm._v(\"Advertencia\")]),_c('img',{staticClass:\"ml-66 -mt-12 sm:-mt-10 sm:ml-48\",attrs:{\"src\":require(\"@/assets/img/warning.png\"),\"width\":\"35\",\"height\":\"35\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div>                      \r\n        <div class=\"flex justify-center\">\r\n            <div class=\"grid gap-4 grid-cols-1 py-3 px-3\">                      \r\n                <!--/////////////////////////////////////////////////////////////////\r\n                ////                      ESCANEADO                             ////\r\n                ////////////////////////////////////////////////////////////////////-->\r\n                <PdfEscaneado \r\n                    @limpiar-componente-escaneado=\"limpiar_componete_escaneado\" \r\n                    :abrirModal=\"modalSubirSellado\" \r\n                    :objInsert=\"objInsertEscaneado\" \r\n                    :tipoReporte=\"tipoEscaneado\"\r\n                >\r\n                </PdfEscaneado>\r\n                <!--/////////////////////////////////////////////////////////////////\r\n                ////                 MODAL CAMBIAR USUARIO A DTC                 ////\r\n                ////////////////////////////////////////////////////////////////////-->\r\n                <div class=\"sticky inset-0\" :class=\"{'modal-container': modalcambiarUsuario}\">\r\n                    <div v-if=\"modalcambiarUsuario\" class=\"rounded-lg justify-center border absolute inset-x-0 bg-white border-gray-400 w-69 mx-auto px-12 py-10 shadow-2xl sm:w-66 mt-33\">\r\n                        <ValidationObserver ref=\"observer\">  \r\n                            <p class=\"text-gray-900 font-thin text-md\" v-if=\"infoCambiarUsuario.referenceDTC != '--' \">\r\n                                Al cambiar el usuario del Diagnóstico de Falla con Refencia: \r\n                                <span class=\"text-black font-bold\">{{ infoCambiarUsuario.referenceNumber }}</span> \r\n                                <br>\r\n                                Se cambiará la Ficha con Referencia: <span class=\"text-red-600 font-bold\">{{ infoCambiarUsuario.referenceNumber }}</span> \r\n                                <br>\r\n                                Y el Dictamen Técnico con Referencia: <span class=\"text-red-600 font-bold\">{{ infoCambiarUsuario.referenceDTC }}</span> \r\n                            </p>\r\n                            <p v-else class=\"text-gray-900 font-thin text-md\">\r\n                                Se cambiará el usuario del Diagnóstico de Falla y Ficha Técnica con Referencia: \r\n                                <span class=\"text-black font-bold\">{{ infoCambiarUsuario.referenceNumber }}</span> \r\n                            </p> \r\n                            <div class=\"mt-10\">\r\n                                <p class=\"pdtcpendientes sm:text-sm sm:text-center\">Seleccione el Nuevo Usuario</p>\r\n                                <ValidationProvider name=\"Observaciones\" rules=\"required\" v-slot=\"{ errors }\"> \r\n                                    <select v-model=\"userChangeDf\" class=\"w-full border-none\">\r\n                                        <option v-for=\"(item, key) in listaTecnicosPlaza\" :key=\"key\" :value=\"item.userId\">{{  item.nombre }}</option>\r\n                                    </select> \r\n                                    <span class=\"text-red-600 text-xs block\">{{ errors[0] }}</span>\r\n                                </ValidationProvider>\r\n                            </div>\r\n                            <div class=\"mt-5\">\r\n                                <p class=\"pdtcpendientes sm:text-sm sm:text-center\">Indica el Motivo del Cambio</p>\r\n                                <ValidationProvider name=\"Comentario\" rules=\"required|max:300\" v-slot=\"{ errors }\"> \r\n                                    <textarea\r\n                                        v-model=\"comentario\"                                        \r\n                                        class=\"textAreaCalendario ph-center\"\r\n                                        placeholder=\"ingresa tus comentarios\"\r\n                                        name=\"Comentario\"\r\n                                        :maxlength=300\r\n                                    />\r\n                                    <span class=\"text-red-600 text-xs block\">{{ errors[0] }}</span>\r\n                                    <span class=\"text-xs text-gray-400\">{{ restante_comentario }}/300</span>\r\n                                </ValidationProvider>\r\n                            </div>                  \r\n                            <div class=\"mt-10 text-center\">\r\n                                <button @click=\"actualizar_user_id_df\" class=\"botonIconCrear\">Cambiar</button>\r\n                                <button @click=\"modalcambiarUsuario = false, userChangeDf = ''\" class=\"botonIconCancelar\">Cancelar</button>\r\n                            </div>  \r\n                        </ValidationObserver>          \r\n                    </div>\r\n                </div>     \r\n                <!--/////////////////////////////////////////////////////////////////\r\n                ////                      MODAL ELIMINAR                         ////\r\n                ////////////////////////////////////////////////////////////////////-->\r\n                <div class=\"sticky inset-0\" :class=\"{'modal-container':modalEliminar}\">\r\n                    <div v-if=\"modalEliminar\" class=\"rounded-lg justify-center border absolute inset-x-0 bg-white border-gray-400 w-69 mx-auto px-12 py-10 shadow-2xl sm:w-66 mt-33\">\r\n                        <h1 class=\"mb-10 text-center font-titulo font-bold text-4xl sm:text-xl\">\r\n                            <img src=\"@/assets/img/warning.png\" class=\"ml-2 sm:-ml-4\" width=\"35\" height=\"35\" />\r\n                            <p class=\"-mt-10 text-black sm:-ml-3 sm:-mt-6\">Advertencia</p>\r\n                            <img src=\"@/assets/img/warning.png\" class=\"ml-66 -mt-12 sm:-mt-10 sm:ml-48\" width=\"35\" height=\"35\" />\r\n                        </h1>\r\n                        <ValidationObserver ref=\"observer\">\r\n                            <p class=\"text-red-600 font-thin text-md sm:text-sm text-justify\" v-if=\"infoEliminar.referenceDTC != '--'\">Se eliminará el Diagnóstico y la Ficha con referencia <span class=\"text-black font-bold\">{{ infoEliminar.referenceNumber }}</span> y DTC con referencia <span class=\"text-black font-bold\">{{ infoEliminar.referenceDTC}}</span></p>\r\n                            <p class=\"text-red-600 font-thin text-md sm:text-sm text-justify\" v-else>Se eliminará el Diagnóstico y la Ficha con referencia <span class=\"text-black font-bold\">{{ infoEliminar.referenceNumber }}</span></p>\r\n                            <ValidationProvider name=\"comentarioBorrar\" rules=\"required:max:300\"  v-slot=\"{ errors }\">    \r\n                                <p class=\"text-md mb-1 font-semibold text-gray-900 mt-10\">Motivo</p>\r\n                                <textarea v-model=\"comentarioBorrar\" class=\"textAreaCalendario\" name=\"comentarioBorrar\"/>              \r\n                                <span class=\"text-red-600 text-xs block\">{{ errors[0] }}</span>\r\n                            </ValidationProvider>\r\n                            <div class=\"mt-5 text-center\">\r\n                                <button @click=\"borrar_diagnostico_falla()\" class=\"botonIconCrear\">Si</button>\r\n                                <button @click=\"modalEliminar = false\" class=\"botonIconCancelar font-boton\">No</button>\r\n                            </div>\r\n                        </ValidationObserver>\r\n                    </div>\r\n                </div>\r\n                <!--/////////////////////////////////////////////////////////////////////\r\n                /////                    FILTROS DE NAVEGACION                      ////\r\n                ////////////////////////////////////////////////////////////////////-->   \r\n                <HeaderGenerico \r\n                    @filtrar-concentrado-diagnostico=\"filtrar_concentrado_diagnostico\" \r\n                    @limpiar-concentrado-diagnostico=\"limpiar_filtros\" \r\n                    @buscar-df=\"guardar_palabra_busqueda\" \r\n                    :titulo=\"'Concentrado de Diagnóstico y Ficha Técnica'\" \r\n                    :tipo=\"'DF'\"\r\n                >\r\n                </HeaderGenerico>\r\n                <!--/////////////////////////////////////////////////////////////////////\r\n                /////                       TABLA GENERICA                      ////\r\n                ////////////////////////////////////////////////////////////////////-->  \r\n                <TablaGenerica  \r\n                    @acciones-mapper=\"acciones_mapper\"              \r\n                    :listaDataTable=\"listaFicha\"\r\n                    :loadingTabla=\"loadingTabla\"\r\n                    :validarAcciones=\"opticones_select_acciones\"\r\n                    :normalheaderKey=\"[{text: 'Numero Referencia', key: 'referenceNumber'},{text: 'Plaza', key: 'squareName'},{text: 'Fecha Diagnostico', key: 'diagnosisDate', formatoFecha: true},{text: 'Carriles', key: 'lanes'},{text: 'Numero Falla', key: 'failuerNumber'},{text: 'Numero Siniestro', key:'siniesterNumber'},{text: 'Referencia DTC', key: 'referenceDTC', LetrasGris:true },{text: 'Acciones', key: 'Acciones'}]\"\r\n                    :movilHeaderKey=\"[{text: 'Numero Referencia', key: 'referenceNumber'},{text: 'Fecha Diagnostica', key: 'diagnosisDate', formatoFecha: true},{text: 'Acciones', key: 'Acciones'}]\"\r\n                >\r\n                </TablaGenerica>  \r\n                <Spinner :modalLoading=\"modalLoading\"/>                            \r\n            </div>\r\n        </div>    \r\n    </div>\r\n</template>\r\n<script>\r\nconst API = process.env.VUE_APP_URL_API_PRODUCCION\r\nimport HeaderGenerico from \"../../../components/Header/HeaderGenerico\"\r\nimport TablaGenerica from '../../../components/TablaGenerica.vue'\r\nimport ServiceReporte from '../../../services/ReportesPDFService'\r\nimport ServiceFiltros from '../../../services/FiltrosDTCServices'\r\nimport PdfEscaneado from '../../../components/PdfEscaneado.vue'\r\nimport ServiceCookies from '../../../services/CookiesService'\r\nimport Spinner from '../../../components/Sppiner.vue'\r\nimport moment from 'moment'\r\nexport default {\r\n    name: \"ConcentradoFichas\",\r\n    components:{        \r\n        HeaderGenerico,\r\n        PdfEscaneado,\r\n        TablaGenerica,\r\n        Spinner\r\n    },\r\n    data (){\r\n        return {\r\n            infoFichasFallaCompleta:[],\r\n            infoFichasFallaFiltrada: [],\r\n            listaFicha: [],\r\n            loadingTabla: false,\r\n            typeUser:'',             \r\n            infoEliminar:{},\r\n            comentarioBorrar:'',\r\n            modalEliminar: false,            \r\n            modalSubirSellado: false,\r\n            objInsertEscaneado: {},\r\n            tipoEscaneado: 'Diagnostico',\r\n            modalcambiarUsuario: false,\r\n            infoCambiarUsuario:{},\r\n            listaTecnicosPlaza:[],\r\n            userChangeDf: '',\r\n            refNum: '',\r\n            comentario: '',\r\n            statusDTC: 0,\r\n            modalLoading: false\r\n        }\r\n    },\r\n    beforeMount: function (){\r\n        this.typeUser = this.$store.state.Login.cookiesUser.rollId \r\n        this.loadingTabla = true\r\n        let userId = this.$store.state.Login.cookiesUser.userId\r\n        this.$http.get(`${API}/diagnosticoFalla/GetBitacoras/TLA/${userId}`)\r\n        .then((response) => {\r\n            setTimeout(() => {\r\n                this.infoFichasFallaCompleta = response.data.result\r\n                this.infoFichasFallaFiltrada = this.infoFichasFallaCompleta\r\n                this.listaFicha = this.infoFichasFallaFiltrada\r\n                this.loadingTabla = false\r\n            },500)           \r\n        })\r\n        .catch(() => {\r\n            this.loadingTabla = false\r\n            this.infoFichasFallaCompleta = []\r\n            this.infoFichasFallaFiltrada = []                       \r\n        })\r\n    },\r\n    methods: {    \r\n        actualizarTabla(){\r\n            this.typeUser = this.$store.state.Login.cookiesUser.rollId \r\n            this.loadingTabla = true\r\n            let userId = this.$store.state.Login.cookiesUser.userId\r\n            this.$http.get(`${API}/diagnosticoFalla/GetBitacoras/TLA/${userId}`)\r\n            .then((response) => {            \r\n                this.infoFichasFallaCompleta = response.data.result\r\n                this.infoFichasFallaFiltrada = this.infoFichasFallaCompleta\r\n                this.listaFicha = this.infoFichasFallaFiltrada\r\n                this.loadingTabla = false\r\n            })\r\n            .catch(() => {\r\n                this.loadingTabla = false\r\n                this.infoFichasFallaCompleta = []\r\n                this.infoFichasFallaFiltrada = []                       \r\n            })\r\n        },     \r\n        borrar_diagnostico_falla(){\r\n            let userId = this.$store.state.Login.cookiesUser.userId \r\n            let clavePlaza = this.infoEliminar.referenceNumber.split('-')[0] \r\n            let indexRowBorrar = this.listaFicha.findIndex(item => item.referenceNumber == this.infoEliminar.referenceNumber)\r\n            this.loadingTabla = true\r\n            this.listaFicha.splice(indexRowBorrar, 1)            \r\n            this.$http.post(`${API}/DiagnosticoFalla/BorraDiagnosticoFull/${clavePlaza}/${this.infoEliminar.referenceNumber}/${userId}/${this.comentarioBorrar}/${this.infoEliminar.referenceDTC}`)\r\n            .then(() => {                                  \r\n                this.modalEliminar = false\r\n                this.comentarioBorrar = ''\r\n                setTimeout(() => {\r\n                    let indexRowBorrar = this.listaFicha.findIndex(item => item.referenceNumber == this.infoEliminar.referenceNumber)\r\n                    this.listaFicha.splice(indexRowBorrar, 1) \r\n                    this.loadingTabla = false                                           \r\n                }, 1000)\r\n            })      \r\n        },\r\n        guardar_palabra_busqueda: function(newPalabra){            \r\n            if (newPalabra != \"\") {\r\n                let array_filtrado = this.infoFichasFallaFiltrada.filter(item => {\r\n                    return item.referenceNumber.toUpperCase().includes(newPalabra.toUpperCase()) || item.referenceDTC.toUpperCase().includes(newPalabra.toUpperCase())\r\n                })       \r\n                this.listaFicha = array_filtrado;    \r\n            }\r\n            else {\r\n                this.listaFicha = this.infoFichasFallaCompleta\r\n            }\r\n        },          \r\n        filtrar_concentrado_diagnostico(objFiltro){            \r\n            this.listaFicha = []\r\n            this.loadingTabla = true\r\n            setTimeout(() => {\r\n                this.listaFicha = ServiceFiltros.filtros_concentrado_diagnostico(this.infoFichasFallaCompleta, objFiltro)\r\n                this.loadingTabla = false\r\n            }, 1000)\r\n        },\r\n        limpiar_filtros(){\r\n            this.listaFicha = this.infoFichasFallaCompleta\r\n        },\r\n        formato_fecha_hora_diagnostico(dateInicio, dateFin){\r\n            let fechaInicio = dateInicio.split(' ')[0].split('-'); let horatInicio = dateInicio.split(' ')[1].split(':')\r\n            let fechaParseInicio = new Date(fechaInicio[2], parseInt(fechaInicio[1]) - 1, fechaInicio[0], parseInt(horatInicio[0]), parseInt(horatInicio[1]), 0);\r\n            let fechaFin = dateFin.split(' ')[0].split('-'); let horatFin = dateFin.split(' ')[1].split(':')\r\n            let fechaParseFin = new Date(fechaFin[2], parseInt(fechaFin[1]) - 1, fechaFin[0], parseInt(horatFin[0]), parseInt(horatFin[1]), 0);      \r\n            return { fechaInicio: fechaParseInicio.toISOString(), fechaFin: fechaParseFin.toISOString()  }\r\n        },\r\n        editar_diagnostico_falla(item){                      \r\n            let objDateParse = this.formato_fecha_hora_diagnostico(item.start, item.end)\r\n            item['start'] = objDateParse['fechaInicio']; item['end'] = objDateParse['fechaFin'];\r\n            this.$router.push({ path: '/Correctivo/PreDTC/Editar/DiagnosticoDeFalla', query: { item, referenciaDtc: item.referenceDTC } })\r\n        },\r\n        terminar_ficha_diagnostico: async function(item){                 \r\n            let carrilesMapeados = []            \r\n            let objDateParse = this.formato_fecha_hora_diagnostico(item.start, item.end)\r\n            item['start'] = objDateParse['fechaInicio']; item['end'] = objDateParse['fechaFin'];            \r\n            let numeroPlaza = this.$store.state.Login.cookiesUser.plazasUsuario.find(plaza => plaza.administradorId == item.adminSquareId).numeroPlaza   \r\n            ServiceCookies.actualizar_plaza(item.adminSquareId)\r\n            await this.$store.dispatch('Refacciones/BUSCAR_CARRILES', numeroPlaza)        \r\n            setTimeout(() => {\r\n                let carriles =  this.$store.getters[\"Refacciones/GET_CARRILES_STATE\"];                  \r\n                item.lanes.split(',').forEach(lane => {                    \r\n                    let carrilFull = carriles.find(carril => carril.lane == lane)                    \r\n                    if(carrilFull != undefined){\r\n                        carrilesMapeados.push({\r\n                            capufeLaneNum: carrilFull.capufeLaneNum,\r\n                            idGare: carrilFull.idGare,\r\n                            lane: carrilFull.lane\r\n                        })\r\n                    }\r\n                })       \r\n                let data = {\r\n                    causaFalla: item.causeFailure,\r\n                    descripcionFalla: item.faultDescription,\r\n                    diagnosticoFalla: item.failureDiagnosis,\r\n                    fechaDiagnostico: moment(item.diagnosisDate,\"YYYY-MM-DD\").format(\"YYYY-MM-DD\"),\r\n                    folioFalla: item.failuerNumber,\r\n                    horaFin: item.end,\r\n                    horaInicio: item.start,\r\n                    numeroReporte: item.siniesterNumber,\r\n                    referenceNumber: item.referenceNumber,\r\n                    ubicacion: carrilesMapeados,\r\n                }              \r\n                this.$router.push({ path: '/Correctivo/PreDTC/Crear/FichaTecnicaDeFalla', query: { data } })    \r\n            }, 500)        \r\n        },             \r\n        limpiar_componete_escaneado(){            \r\n            this.loadingTabla = true  \r\n            this.modalSubirSellado = false          \r\n            setTimeout(() => {              \r\n                let indexRowUpdate = this.listaFicha.findIndex(item => item.referenceNumber == this.objInsertEscaneado.referenceNumber)\r\n                let objRowUpdate = Object.assign(this.listaFicha[indexRowUpdate])\r\n                this.listaFicha.splice(indexRowUpdate,1,objRowUpdate)\r\n                if(this.tipoEscaneado == 'Diagnostico'){\r\n                    objRowUpdate['diagnosticoSellado'] = true\r\n                    this.listaFicha.splice(indexRowUpdate,1,objRowUpdate)\r\n                }else{\r\n                    objRowUpdate['fichaSellado'] = true\r\n                    this.listaFicha.splice(indexRowUpdate,1,objRowUpdate)\r\n                } \r\n                this.objInsertEscaneado = {}\r\n                this.loadingTabla = false \r\n            },500)           \r\n        },\r\n        modal_Cambiar_Usuario(item){\r\n            this.refNum = item.referenceNumber\r\n            this.infoCambiarUsuario = item\r\n            this.$http.get(`${API}/User//UserofSquare/${item.squareId}`)\r\n            .then((response) =>this.listaTecnicosPlaza = response.data.result)\r\n            .catch(() => {})\r\n        },\r\n        actualizar_user_id_df(){\r\n            if(this.infoCambiarUsuario.referenceDTC != '--' && this.infoCambiarUsuario.typeFaultId != 1){\r\n                this.loadingTabla = true\r\n                let actualizar_user = new Promise ((resolve,reject) => {\r\n                    /* let obj_cambiar_user = {\r\n                        userId: this.userChangeDf,\r\n                        referenceNumberDTC: this.infoCambiarUsuario.referenceDTC,\r\n                        referenceNumberDiagnostic: this.refNum,\r\n                        Comment: this.comentario\r\n                    }\r\n                    this.$http.put(`${API}/DtcData/UpdateUserIdOfDTC/${this.refNum.split('-')[0]}`, obj_cambiar_user) */\r\n                    this.$http.put(`${API}/DtcData/UpdateUserIdOfDTC/${this.refNum.split('-')[0]}/${this.userChangeDf}/${this.infoCambiarUsuario.referenceDTC}/${this.refNum}`)\r\n                    .then(() => {\r\n                            resolve('OK')\r\n                            this.modalcambiarUsuario = false\r\n                    })\r\n                    .catch(error => {\r\n                        reject(error)\r\n                    })\r\n                    setTimeout(()=>{\r\n                        actualizar_user.then(()=>{\r\n                            this.loadingTabla = false\r\n                            this.userChangeDf = ''\r\n                            this.comentario = ''\r\n                            this.$notify.success({\r\n                                title: \"Ok!\",\r\n                                msg: `EL DF CON LA REFERENCIA ${this.refNum} FUE CAMBIADO DE USUARIO.`,\r\n                                position: \"bottom right\",\r\n                                styles: { height: 100, width: 500,},\r\n                            });\r\n                        })\r\n                    },1000)\r\n                })\r\n            }else{\r\n                this.loadingTabla = true\r\n                let actualizar_user = new Promise ((resolve,reject) => {\r\n                    /* let obj_cambiar_user = {\r\n                        userId: this.userChangeDf,\r\n                        referenceNumberDTC: '--',\r\n                        referenceNumberDiagnostic: this.refNum,\r\n                        Comment: this.comentario\r\n                    }\r\n                    this.$http.put(`${API}/DtcData/UpdateUserIdOfDTC/${this.refNum.split('-')[0]}`, obj_cambiar_user) */\r\n                    this.$http.put(`${API}/DtcData/UpdateUserIdOfDTC/${this.refNum.split('-')[0]}/${this.userChangeDf}/--/${this.refNum}`)\r\n                    .then(() => {\r\n                            resolve('OK')\r\n                            this.modalcambiarUsuario = false\r\n                    })\r\n                    .catch(error => { reject(error) })\r\n                    setTimeout(()=>{\r\n                        actualizar_user.then(()=>{\r\n                            this.userChangeDf = ''\r\n                            this.comentario = ''\r\n                            this.loadingTabla = false\r\n                            this.$notify.success({\r\n                                title: \"Ok!\",\r\n                                msg: `EL DF CON LA REFERENCIA ${this.refNum} FUE CAMBIADO DE USUARIO.`,\r\n                                position: \"bottom right\",\r\n                                styles: { height: 100, width: 500,},\r\n                            });\r\n                        })\r\n                    },1000)\r\n                })\r\n            }\r\n        },\r\n        acciones_mapper({ acciones, itemRow }){                  \r\n            if(acciones.title == 'Terminar Ficha'){\r\n                this.terminar_ficha_diagnostico(itemRow)\r\n            }\r\n            if(acciones.title == 'Terminar DTC'){\r\n                this.$router.push(`/NuevoDtc/Crear/${itemRow.referenceNumber}/${itemRow.typeFaultId}`)                 \r\n            }   \r\n            if(acciones.title == 'Editar'){                     \r\n                this.editar_diagnostico_falla(itemRow)\r\n            }\r\n            if(acciones.title == 'Borrar'){   \r\n                this.modalLoading = true                          \r\n                setTimeout(() => {\r\n                this.infoEliminar = itemRow; \r\n                this.modalEliminar = true;      \r\n                this.modalLoading = false\r\n                }, 2000);\r\n                \r\n            }\r\n            if(acciones.title == 'Bajar Dignóstico de Falla'){     \r\n                ServiceReporte.generar_pdf_diagnostico_falla(itemRow.referenceNumber) \r\n            }\r\n            if(acciones.title == 'Bajar Ficha Técnica'){                    \r\n                ServiceReporte.generar_pdf_ficha_falla(itemRow.referenceNumber)\r\n            }\r\n            if(acciones.title == 'Bajar Dictamen (DTC)'){                    \r\n                ServiceReporte.generar_pdf_correctivo(itemRow.referenceDTC, 2, false, undefined)\r\n                if (this.typeUser != 4 && this.typeUser != 8){\r\n                    setTimeout(() => {\r\n                        ServiceReporte.generar_pdf_fotografico_correctivo(itemRow.referenceDTC);               \r\n                    },1000)\r\n                }\r\n            }\r\n            if(acciones.title == 'Subir DF Escaneado'){                \r\n                this.tipoEscaneado = 'Diagnostico'\r\n                this.modalSubirSellado = true\r\n                this.objInsertEscaneado = {\r\n                    referenceNumber: itemRow.referenceNumber\r\n                }\r\n            }\r\n            if(acciones.title == 'Subir FT Escaneada'){                \r\n                this.tipoEscaneado = 'Ficha'\r\n                this.modalSubirSellado = true\r\n                this.objInsertEscaneado = {\r\n                    referenceNumber: itemRow.referenceNumber\r\n                }\r\n                \r\n            }\r\n            if(acciones.title ==  'Bajar FT Escaneada'){                \r\n                ServiceReporte.generar_pdf_ficha_sellada(itemRow.referenceNumber, 2)\r\n            }\r\n            if(acciones.title == 'Bajar DF Escaneado'){                \r\n                ServiceReporte.generar_pdf_ficha_sellada(itemRow.referenceNumber, 1)\r\n            }\r\n            if(acciones.title == 'Cambiar de Usuario'){\r\n                this.modalcambiarUsuario = true\r\n                this.infoCambiarUsuario = itemRow;\r\n                this.modal_Cambiar_Usuario(this.infoCambiarUsuario)\r\n            }\r\n            if(acciones.title == 'Bajar DTC Sin Firma'){\r\n                ServiceReporte.generar_pdf_correctivo(itemRow.referenceDTC, 1, false, undefined)\r\n                if (this.typeUser != 4 && this.typeUser != 8){\r\n                    setTimeout(() => {\r\n                        ServiceReporte.generar_pdf_fotografico_correctivo(itemRow.referenceDTC);               \r\n                    },1000)\r\n                }\r\n            }                \r\n        },\r\n        opticones_select_acciones(item){\r\n            const options= [                \r\n                { title: 'Terminar Ficha', accionCss: 'terminar', tipo: '', img: 'fa-file-circle-plus' }, //0\r\n                { title: 'Terminar DTC', accionCss: 'terminar', img: 'fa-file-circle-plus' },//1\r\n                { title: 'Editar', accionCss: 'editar', img: 'fa-solid fa-pen-to-square' }, //2\r\n                { title: 'Borrar', accionCss: 'borrar', img: 'fa-solid fa-trash' },//3\r\n                { title: 'Bajar Dignóstico de Falla', accionCss: 'terminar', img: 'fa-file-arrow-down' }, //4\r\n                { title: 'Bajar Ficha Técnica', accionCss: 'terminar', img: 'fa-file-arrow-down' },//5\r\n                { title: 'Bajar Dictamen (DTC)', accionCss: 'terminar', img: 'fa-file-arrow-down' }, //6\r\n                { title: 'Subir DF Escaneado', accionCss: 'editar', img: 'fa-file-arrow-up' }, //7\r\n                { title: 'Subir FT Escaneada', accionCss: 'editar', img: 'fa-file-arrow-up' }, //8\r\n                { title: 'Bajar FT Escaneada', accionCss: 'terminar', img: 'fa-file-arrow-down' },//9\r\n                { title: 'Bajar DF Escaneado', accionCss: 'terminar', img: 'fa-file-arrow-down' },//10\r\n                { title: 'Cambiar de Usuario', accionCss: 'cambiar', img: 'fa-solid fa-address-card' },//11\r\n                { title: 'Bajar DTC Sin Firma', accionCss: 'terminar', img: 'fa-file-arrow-down' }, //12\r\n            ]\r\n            this.statusDTC = item.statusDtc\r\n            let filtroOpciones = []            \r\n            filtroOpciones.push(options[4])\r\n            if(this.typeUser != 7 && this.typeUser != 4 && this.typeUser != 8 && this.typeUser != 10){\r\n                filtroOpciones.push(options[7])\r\n            }\r\n            if(item.diagnosticoSellado){\r\n                filtroOpciones.push(options[10])\r\n            } \r\n            if(item.validacionFichaTecnica){\r\n                filtroOpciones.push(options[5]) \r\n                if(this.typeUser != 7 && this.typeUser != 4 && this.typeUser != 8 && this.typeUser != 10){\r\n                    filtroOpciones.push(options[8])\r\n                }\r\n                if(item.fichaSellado){\r\n                    filtroOpciones.push(options[9]) \r\n                }\r\n                if(!item.validacionDTC && item.typeFaultId >= 2 && this.typeUser != 7 && this.typeUser != 4 && this.typeUser != 8 && this.typeUser != 10){\r\n                    filtroOpciones.push(options[1])\r\n                }           \r\n                if(item.validacionDTC && item.validacionFichaTecnica && item.statusDtc != 1 && this.typeUser != 7 && this.typeUser != 4 && this.typeUser != 8){\r\n                    filtroOpciones.push(options[6])\r\n                }\r\n                if((this.typeUser == 8 && item.referenceDTC != '--') || (this.typeUser == 4 && item.referenceDTC != '--')) {\r\n                    filtroOpciones.push(options[12])\r\n                }\r\n                if(this.typeUser == 1 || this.typeUser == 2 || this.typeUser == 3 || this.typeUser == 5 ){                                                   \r\n                    filtroOpciones.push(options[2])\r\n                    //filtroOpciones.push(options[3])\r\n                }\r\n            }\r\n            /*if((!item.validacionDTC) && (this.typeUser == 1 || this.typeUser == 2)){\r\n                filtroOpciones.push(options[3])\r\n            }*/\r\n            if(this.typeUser == 2 || this.typeUser == 4 || this.typeUser == 5 || this.typeUser == 8 || this.typeUser == 10){\r\n                filtroOpciones.push(options[11])\r\n                filtroOpciones.push(options[3])\r\n            }  \r\n            else{\r\n                if(this.typeUser != 7 && this.typeUser != 4 && this.typeUser != 10 && !item.validacionFichaTecnica)\r\n                filtroOpciones.push(options[0])\r\n            }                                       \r\n            return filtroOpciones\r\n        },\r\n    }, \r\n    computed:{\r\n        restante_comentario(){\r\n            return this.comentario.length\r\n        }\r\n    }  \r\n}\r\n</script>\r\n<style>\r\n.modal-container{\r\n    position: fixed;\r\n    width: 100%;\r\n    height: 100vh;\r\n    z-index: 1000;\r\n    background: rgba(0, 0, 0, 0.5);\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConcentradoFichas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConcentradoFichas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConcentradoFichas.vue?vue&type=template&id=3f206942&\"\nimport script from \"./ConcentradoFichas.vue?vue&type=script&lang=js&\"\nexport * from \"./ConcentradoFichas.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ConcentradoFichas.vue?vue&type=style&index=0&id=3f206942&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}