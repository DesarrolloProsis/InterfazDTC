(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217a5c"],{c82c:function(e,t,a){"use strict";a.r(t);a("d3b7"),a("25f0"),a("b0c0"),a("d81d"),a("4de4");var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"container mx-auto font-titulo"},[t("HeaderGenerico",{attrs:{titulo:"ACTA ADMINISTRATIVA INFORMATIVA (ENTREGA-RECEPCIÓN)",subtitulo:"FORMATO 1-A",tipo:"anexo1A"}}),t("div",{staticClass:"mt-1 mb-1 text-sm flex flex-col leading-7 sm:block sm:p-1 sm:pr-2 sm:text-xs border sm:m-1 shadow-md md:w-auto text-justify p-6"},[e._m(0),t("p",[e._v(" REALIZADO AL EQUIPO DE CONTROL DE TRANSITO DE "),t("label",{staticClass:"font-bold"},[e._v("CARRIL "+e._s(this.nombrecarriles.toString()))]),e._v(", EN LA PLAZA DE COBRO "),t("label",{staticClass:"font-bold uppercase"},[e._v(" No. "+e._s(this.plazadtc[0].plaza)+",")]),e._v(" PERTENECIENTE A LA "),t("label",{staticClass:"font-bold uppercase"},[e._v(e._s(this.plazadtc[0].regionalCoordination))])]),t("p",[e._v(" EN LA CIUDAD DE "),t("label",{staticClass:"font-bold ml-1 uppercase"},[e._v(e._s(this.ciudad[0].ciudad)+", "+e._s(this.ciudad[0].estado))]),e._v(", SIENDO "),t("datetime",{staticClass:"ml-1 inline-flex",attrs:{"use12-hour":"",type:"datetime",name:"HoraInicio","input-class":"inputanexo",format:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}},model:{value:e.fechaapertura,callback:function(t){e.fechaapertura=t},expression:"fechaapertura"}}),e._v(" EL "),t("label",{staticClass:"font-bold"},[e._v(e._s(this.plazadtc[0].adminName.toUpperCase()))]),e._v(" ADMINISTRADOR DE LA PLAZA DE COBRO, EL"),t("label",{staticClass:"font-bold"},[e._v(" "+e._s(this.lista_DTC_Filtrada[0].name.toUpperCase()))]),e._v(", TÉCNICO REPRESENTANTE DE LA EMPRESA "),t("label",{staticClass:"font-bold"},[e._v("PROYECTOS Y SISTEMAS INFORMATICOS S.A. DE C.V.")]),e._v(" TENIENDO COMO TESTIGOS DE ASISTENCIA A: ")],1),t("div",{staticClass:"flex w-full gap-4 p-2"},[t("div",{staticClass:"inline-block relative w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.testigo1,expression:"testigo1"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",class:{"border border-red-500":e.vtestigo1,"border border-gray-400":!e.vtestigo1},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.testigo1=t.target.multiple?a:a[0]},function(t){return e.cambiarvalort1()}]}},[t("option",{attrs:{value:""}},[e._v("Selecciona a un testigo")]),e._l(e.testigoscompleto,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2),t("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])]),t("div",{staticClass:"inline-block relative w-full"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.testigo2,expression:"testigo2"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",class:{"border border-red-500":e.vtestigo2,"border border-gray-400":!e.vtestigo2},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.testigo2=t.target.multiple?a:a[0]},function(t){return e.cambiarvalort2()}]}},[t("option",{attrs:{value:""}},[e._v("Selecciona a un testigo")]),e._l(e.testigoscompleto,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2),t("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])]),t("p",{},[e._v(" PARA HACER CONSTAR QUE LA FALLA DEL EQUIPO DEL "),t("span",{staticClass:"font-bold"},[e._v("CARRIL "+e._s(this.nombrecarriles.toString()))]),e._v(",REPORTADA CON No. DE ACUSE / FOLIO "),t("span",{staticClass:"font-bold"},[e._v(e._s(this.lista_DTC_Filtrada[0].failureNumber))]),e._v(", DE FECHA "),t("span",{staticClass:"font-bold"},[e._v(e._s(this.fechasiniestro))]),e._v("; FUE REPARADA EL DÍA "),t("datetime",{staticClass:"inline-flex",attrs:{"input-class":"inputanexo",format:{year:"numeric",month:"long",day:"numeric"},disabled:""},model:{value:e.fechaapertura,callback:function(t){e.fechaapertura=t},expression:"fechaapertura"}}),e._v(", DICHA FALLA CONSISTIÓ EN DAÑO A COMPONENTE "),t("span",{staticClass:"font-bold"},[e._v(e._s(this.nombrecomponentes.toString()))]),e._v(" Y FUÉ PROVOCADA POR "),t("span",{staticClass:"font-bold"},[e._v(e._s(this.lista_DTC_Filtrada[0].diagnosis.toUpperCase()))]),e._v(", OCURRIDO EL "),t("span",{staticClass:"font-bold"},[e._v(e._s(this.fechasiniestro))]),e._v("; PARA CUYO EFECTO FUÉ NECESARIO REPONER LAS PARTES QUE A CONTINUACIÓN SE DETALLAN. ")],1),t("p",{staticClass:"text-sm"},[e._v(" LOS EQUIPOS/COMPONENTES DAÑADOS QUEDAN BAJO RESGUARDO DEL ADMINISTRADOR DEBIÉNDOSE IDENTIFICAR CON EL No. SINIESTRO Y FECHA; ESPERAR AVISO DE LA GERENCIA DE SEGUROS A QUE LA ASEGURADORA EMITA EL CHEQUE (REEMBOLSO) QUEDANDO LOS EQUIPOS Y COMPONENTES A DISPOSICIÓN DE LA ASEGURADORA DE NO RECOGERLOS EN UN PLAZO DE 30 DÍAS, LA SUBGERENCIA DE ALMACENES E INVENTARIOS INSTRUIRÁ EL DESTINO FINAL CONFORME LA NORMA ")]),t("p",{staticClass:"text-sm"},[e._v(" LOS TRABAJOS, INSTALACIÓN Y OPERACIÓN DE LA PLAZA DE COBRO QUEDAN A ENTERA SATISFACCIÓN DEL ADMINISTRADOR DE LA PLAZA DE COBRO Y/O ENCARGADO DE TURNO. "),t("span",{staticClass:"font-bold"},[e._v("NO. SINIESTRO "+e._s(this.lista_DTC_Filtrada[0].sinisterNumber))]),e._v(" Y/O "),t("span",{staticClass:"font-bold"},[e._v("NO. DE REPORTE "+e._s(this.lista_DTC_Filtrada[0].reportNumber))]),e._v(" DE FECHA "),t("span",{staticClass:"font-bold"},[e._v(e._s(this.fechasiniestro))])]),t("h3",{staticClass:"font-bold text-sm mt-2"},[e._v("COMPONENTES Y/O REFACCIONES DAÑADAS:")]),t("TablaEquipoMalo",{attrs:{listaComponentes:e.listaComponentes,dateSinester:e.datosSinester.SinisterDate,Editar:!1,plazareferencia:this.$route.params.referenceSquare,dtcreference:this.$route.params.referencenumber},on:{listacarriles:e.onagregarcomponentes,listanombrecom:e.onagregarnombrescomponentes,componentesfinales:e.agregarcomponenteseditados,componentesmalos:e.agregarcomponentesmalos}}),t("p",{staticClass:"text-sm mb-2 uppercase"},[e._v("Supervisor de plaza "),t("span",{staticClass:"text-sm font-bold"},[e._v(e._s(this.lista_DTC_Filtrada[0].name))])]),t("div",{staticClass:"inline-flex mt-4"},[t("p",{staticClass:"mr-2"},[e._v("SE CIERRA LA PRESENTE ACTA EN FECHA")]),t("datetime",{staticClass:"inline-flex",attrs:{"input-class":"inputanexo",disabled:""},model:{value:e.fechaapertura,callback:function(t){e.fechaapertura=t},expression:"fechaapertura"}}),t("p",{staticClass:"ml-2"},[e._v(",SIENDO LAS")]),t("datetime",{staticClass:"inline-flex ml-2",attrs:{type:"time","input-class":"inputanexo"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),t("div",{staticClass:"mt-4"},[t("ValidationObserver",{ref:"observer"},[t("div",{staticClass:"w-full"},[t("ValidationProvider",{attrs:{name:"reporte fotografico",rules:"max:500"},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.errors;return[t("span",{staticClass:"text-center font-titulo font-semibold uppercase sm:flex sm:flex-col md:grid lg:grid"},[e._v("Observaciones para reporte fotografico equipo nuevo")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comentario,expression:"comentario"}],staticClass:"block container placeholder-gray-500 textAreaCalendario sm:mx-auto md:mx-auto lg:mx-auto",attrs:{placeholder:"Inserte observaciones del reporte fotografico",name:"reporte fotografico",maxlength:e.limite},domProps:{value:e.comentario},on:{input:function(t){t.target.composing||(e.comentario=t.target.value)}}}),t("span",{staticClass:"text-red-600 text-xs block"},[e._v(e._s(s[0]))]),t("span",{staticClass:"text-xs text-gray-500"},[e._v(e._s(e.restante)+"/500")])]}}])})],1)])],1),t("div",{staticClass:"p-2 mb-10 sm:mb-18 flex justify-center w-full"},[t("button",{staticClass:"botonIconCrear",class:{CrearDeshabilitado:e.modalLoading,"bg-gray-300 hover:text-black border-black hover:border-black cursor-not-allowed opacity-50":e.modalLoading,"hover:bg-gray-300 hove:border-black":e.modalLoading},attrs:{disabled:e.modalLoading},on:{click:function(t){return e.validacionanexo()}}},[t("img",{staticClass:"mr-2",attrs:{src:a("1d89"),width:"35",height:"35"}}),t("span",[e._v("Insertar Acta 1-A")])])])],1)],1),t("Modal",{attrs:{showing:e.modalImage},on:{close:function(t){e.modalImage=!1}}},[t("div",{staticClass:"justify-center text-center block"},[t("ImagenesAnexo",{attrs:{reporteDataInsertada:!0,tipo:"Anexo",referenceNumber:this.lista_DTC_Filtrada[0].referenceNumber,maximofotosanexo:this.double,referenciaAnexo:this.referenciaAnexo,subversionAnexo:!1,editar:!1},on:{"bloquear-boton-diagnostico":e.bloquear_boton_anexo_img}}),t("button",{staticClass:"botonIconCrear mt-6",class:{"bg-gray-300 hover:text-black border-black hover:border-black cursor-not-allowed opacity-50":e.blockBotonModal,"hover:bg-gray-300 hove:border-black":e.blockBotonModal},attrs:{disabled:e.blockBotonModal},on:{click:function(t){return e.pasarinsertaranexo()}}},[t("img",{staticClass:"mr-2",attrs:{src:a("1d89"),width:"35",height:"35"}}),t("span",[e._v("Generar Acta 1-A")])])],1)]),t("Modal",{attrs:{showing:e.modalvalidacionanexo},on:{close:function(t){e.modalvalidacionanexo=!1}}},[t("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{staticClass:"sm:flex sm:items-start"},[t("div",{staticClass:"w-12 mx-auto flex-shrink-0 flex items-center justify-center h-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[t("ExclamationIcon",{staticClass:"h-10 w-10 text-red-600",attrs:{"aria-hidden":"true"}})],1),t("h1",{staticClass:"text-xl text-center font-bold"},[e._v("NO SE PUEDE GENERAR EL ACTA")]),t("div",{staticClass:"text-justify mt-3 sm:mt-0 sm:ml-4 sm:text-left"},[t("div",{staticClass:"mt-2"},[t("p",{},[e._v("Por las siguientes razones no se puede generar el acta:")])]),t("div",[t("ul",{staticClass:"mt-3 list-disc list-inside text-justify"},e._l(e.errores,(function(a){return t("li",{key:a},[e._v(e._s(a))])})),0)])])])]),t("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.limpiarvalidacion()}}},[e._v("Continuar")])])]),t("Modal",{attrs:{showing:e.modalconfirmacionanexo},on:{close:function(t){e.modalconfirmacionanexo=!1}}},[t("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{staticClass:"sm:flex sm:items-start"},[t("div",{staticClass:"w-12 mx-auto flex-shrink-0 flex items-center justify-center h-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},[t("CheckCircleIcon",{staticClass:"h-10 w-10 text-green-600",attrs:{"aria-hidden":"true"}})],1),t("h1",{staticClass:"text-xl text-center font-bold"},[e._v("DATOS COMPLETOS")]),t("div",{staticClass:"text-justify mt-3 sm:mt-0 sm:ml-4 sm:text-left"},[t("div",{staticClass:"mt-2"},[t("p",{},[e._v("los datos de tu acta son los siguientes:")])]),t("div",[t("ul",{staticClass:"mt-3 list-disc list-inside text-justify"},[t("li",[e._v("DTC: "+e._s(this.lista_DTC_Filtrada[0].referenceNumber))]),t("li",[e._v("Fecha de apertura: "+e._s(this.fechaaperturaformateada))]),t("li",[e._v("Fecha de cierre: "+e._s(this.fechacierreformateada))]),t("li",[e._v("Tipo de Acta: 1-A")])])])])])]),t("div",{staticClass:"flex gap-4 bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.insertaranexo()}}},[e._v("Confirmar")]),t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-500 text-base font-medium text-white hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.cancelaranexo()}}},[e._v("Cancelar")])])]),t("Modal",{attrs:{showing:e.modaldescarga},on:{close:function(t){e.modaldescarga=!1}}},[t("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{staticClass:"sm:flex sm:items-start"},[t("div",{staticClass:"w-12 mx-auto flex-shrink-0 flex items-center justify-center h-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[t("DownloadIcon",{staticClass:"h-10 w-10 text-blue-800",attrs:{"aria-hidden":"true"}})],1),t("h1",{staticClass:"text-xl text-center"},[e._v("SE GENERO EL ACTA DEL DTC CON REFERENCIA "),t("b",[e._v(e._s(this.lista_DTC_Filtrada[0].referenceNumber))])])])]),t("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return e.saliranexos()}}},[e._v("Regresar al menu principal")])])]),t("Spinner",{attrs:{modalLoading:e.modalLoading}})],1)},o=[function(){var e=this,t=e._self._c;return t("p",{},[e._v("SE LEVANTA LA PRESENTE ACTA, PARA HACER CONSTAR EL SERVICIO DE MANTENIMIENTO "),t("label",{staticClass:"font-bold"},[e._v("CORRECTIVO (SINIESTRO, ACCIDENTE VEHICULAR, DESCARGA ELÉCTRICA, ETC.)")])])}],r=a("c7eb"),n=a("1da1"),i=(a("99af"),a("159b"),a("a434"),a("4201")),c=a("9048"),l=a("ccc9"),d=a("859b"),u=a("d101"),m=a("a374"),p=a("ddc6"),f=a("c1df"),h=a.n(f),v=a("225c"),g="http://201.99.110.3:86/api",b={name:"Anexo1-A",components:{HeaderGenerico:i["a"],TablaEquipoMalo:c["a"],datetime:d["Datetime"],ImagenesAnexo:l["a"],Modal:m["a"],ExclamationIcon:p["c"],CheckCircleIcon:p["a"],DownloadIcon:p["b"],Spinner:v["a"]},data:function(){return{datosSinester:{ReferenceNumber:"",SinisterNumber:"",ReportNumber:"",SinisterDate:"",FailureDate:"",FailureNumber:"",ShippingElaboracionDate:"",Diagnosis:"",Observation:"",TypeDescriptionId:1,UserId:null,AgremmentInfoId:null,Descripcion:null,Observaciones:null},listaComponentes:[],limite:500,fechaSiniestoEdit:!1,sizeSmall:!1,boolCambiarPlaza:!1,fecha_validacion:"",modalReferencia:!1,arrayReference:[],referenceSelected:"",tipoPlazaSelect:"",testigo1:"",testigo2:"",fechasiniestro:"",modalImage:!1,modalLoading:!1,listaSupervisor:[],dtc_filtrado:[],listaPlazas:[],plazadtc:[],componentesseleccionados:[],nombrecarriles:[],nombrecomponentes:[],componentesfinaleseditados:[],componentesmalos:[],componentesaenviar:[],fechaapertura:"",fechacierre:"",testigoscompleto:[],idtestigos:0,blockBotonModal:!0,modalvalidacionanexo:!1,errores:[],vfechaapertura:!1,vfechacierre:!1,vtestigo1:!1,vtestigo2:!1,vsuperior:!1,modalconfirmacionanexo:!1,modaldescarga:!1,fechaaperturaformateada:"",fechacierreformateada:"",horacierre:"",listaEncargados:[],listaencargadosFilrada:[],listaencargadosCompleta:[],comentario:"",numerodefotos:0,ciudad:[],referenciaAnexo:"",time:"",index:[]}},created:function(){this.TestigosDtc(),this.filtro_dtc()},methods:{cambiar_plaza:function(e){var t=this;return Object(n["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.plazaSeleccionada=e,t.headerSelecionado=t.$store.getters["Header/GET_HEADER_SELECCIONADO"],t.arrayCarriles=t.$store.dispatch("Refacciones/BUSCAR_CARRILES",t.plazaSeleccionada),t.crear_referencia();case 4:case"end":return a.stop()}}),a)})))()},TestigosDtc:function(){var e=this;return Object(n["a"])(Object(r["a"])().mark((function t(){var a,s,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(g,"/AnexoDTC/Testigos/").concat(e.$route.params.referenceSquare,"/").concat(e.$route.params.squareCatalogId));case 3:return a=t.sent,t.next=6,a.json();case 6:s=t.sent,o=s.result,e.testigoscompleto=o,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),404==t.t0.response.status&&(e.testigoscompleto=[]);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},SupervisorDtc:function(){var e=this;return Object(n["a"])(Object(r["a"])().mark((function t(){var a,s,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(g,"/AnexoDTC/Supervisor/").concat(e.$route.params.referenceSquare,"/").concat(e.$route.params.squareCatalogId));case 3:return a=t.sent,t.next=6,a.json();case 6:s=t.sent,o=s.result,e.listaSupervisor=o,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),404==t.t0.response.status&&(e.listaSupervisor=[]);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},filtro_dtc:function(){var e=this;return Object(n["a"])(Object(r["a"])().mark((function t(){var a,s,o,n,i,c,l,d,m,p;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.params.referencenumber,t.prev=1,t.next=4,u["a"].filtrarDTC(e.filtroVista,"","",a,void 0,!1,void 0);case 4:return s=t.sent,o=s.filter((function(t){return t.referenceNumber==e.$route.params.referencenumber})),e.lista_DTC_Filtrada=o,console.log(e.lista_DTC_Filtrada),n=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"],i=new Date(e.lista_DTC_Filtrada[0].sinisterDate),c=i.getDate()+" DE "+n[i.getMonth()]+" DE "+i.getFullYear(),e.fechasiniestro=c,t.next=14,e.$store.state.Login.listaHeaderDtcUser;case 14:return l=t.sent,d=l.filter((function(t){return t.adminSquareId==e.lista_DTC_Filtrada[0].adminId})),e.plazadtc=d,t.next=19,e.$store.state.Login.listaPlazas;case 19:m=t.sent,p=m.filter((function(t){return t.referenceSquare==e.plazadtc[0].referenceSquare})),e.ciudad=p,t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](1),404==t.t0.response.status&&(e.lista_DTC_Filtrada=[]);case 27:case"end":return t.stop()}}),t,null,[[1,24]])})))()},onagregarcomponentes:function(e){var t=e.filter((function(t,a){return e.indexOf(t)===a}));this.nombrecarriles=t},onagregarnombrescomponentes:function(e){var t=e.filter((function(t,a){return e.indexOf(t)===a}));this.nombrecomponentes=t},agregarcomponenteseditados:function(e){this.componentesfinaleseditados=e},agregarcomponentesmalos:function(e){this.componentesmalos=e,console.log(this.componentesmalos)},evaluarcomponentes:function(){var e=this;if(this.componentesfinaleseditados.length>0)this.componentesfinaleseditados.length==this.componentesmalos.length?(this.componentesfinaleseditados.forEach((function(e){""==e.SerialNumber&&(e.SerialNumber="sin número")})),this.componentesaenviar=this.componentesfinaleseditados,console.log(this.componentesaenviar)):this.componentesfinaleseditados.length<this.componentesmalos.length&&(this.componentesmalos.forEach((function(t){var a={RequestedComponentId:t.requestedComponentId,SerialNumber:"sin número"};e.componentesaenviar.push(a)})),console.log(this.componentesaenviar),console.log(this.componentesfinaleseditados),this.index=this.componentesaenviar.map((function(e){return e.RequestedComponentId})),console.log(this.index),this.componentesfinaleseditados.forEach((function(t){var a=e.index.indexOf(t.RequestedComponentId);console.log(a),e.componentesaenviar.splice(a,1,t)})),console.log(this.componentesaenviar));else{var t=[];this.componentesmalos.forEach((function(e){console.log(e);var a={RequestedComponentId:e.requestedComponentId,SerialNumber:"sin número"};t.push(a)})),this.componentesaenviar=t}},insertaranexo:function(){var e=this;return Object(n["a"])(Object(r["a"])().mark((function t(){var a,s,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=h()(e.fechaapertura.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),s=h()(e.fechacierre.substring(0,50)).format("YYYY-MM-DD HH:mm:ss"),o={DTCReference:e.$route.params.referencenumber,AnexoReference:"",FechaApertura:a,FechaCierre:s,Solicitud:"",FechaSolicitudInicio:null,FolioOficio:"",FechaOficioInicio:null,Observaciones:e.comentario,Testigo1Id:e.testigo1,Testigo2Id:e.testigo2,TipoAnexo:"A",ComponentesAnexo:e.componentesaenviar},console.log(o);try{e.$http.post("".concat(g,"/AnexoDTC/").concat(e.$route.params.referenceSquare,"/false"),o).then((function(t){e.modalLoading=!0;var a=t.data.result;e.referenciaAnexo=a,console.log(e.referenciaAnexo),setTimeout((function(){e.modalconfirmacionanexo=!1,e.modalImage=!0,e.modalLoading=!1}),2e3)})).catch((function(e){console.log(e)}))}catch(r){console.error(r)}case 5:case"end":return t.stop()}}),t)})))()},validacionanexo:function(){if(this.evaluarcomponentes(),this.errores=[],""!=this.fechaapertura&&""!=this.time){var e=new Date(this.fechaapertura),t=new Date(this.time),a=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),s=e.getMonth()+1,o=e.getFullYear()+"-"+s+"-"+e.getDate(),r=o+" "+a,n=new Date(r);this.fechacierre=n.toISOString();var i=Date.now();e>i&&this.errores.push("La fecha de apertura no puede ser mayor al dia de hoy");var c=["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"],l=new Date(this.fechaapertura),d=l.getDate()+" DE "+c[l.getMonth()]+" DE "+l.getFullYear()+" A LAS "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds(),u=new Date(this.fechacierre),m=u.getDate()+" DE "+c[u.getMonth()]+" DE "+u.getFullYear()+" A LAS "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();this.fechaaperturaformateada=d,this.fechacierreformateada=m}else this.errores.push("La fecha de apertura esta vacia"),this.errores.push("La hora de cierre esta vacia");""!=this.testigo1&&""!=this.testigo2||(this.errores.push("Debes seleccionar ambos testigos "),this.vtestigo1=!0,this.vtestigo2=!0),""!=this.testigo1&&""!=this.testigo2&&this.testigo1==this.testigo2&&(this.errores.push("Los Testigos no pueden ser los mismos"),this.vtestigo1=!0,this.vtestigo2=!0),0==this.nombrecomponentes.length&&this.errores.push("Tienes que seleccionar por lo menos 1 componente"),this.errores.length>0?this.modalvalidacionanexo=!0:this.modalconfirmacionanexo=!0},limpiarvalidacion:function(){this.errores=[],this.modalvalidacionanexo=!1,this.componentesaenviar=[],this.index=[]},cambiarvalort1:function(){this.vtestigo1&&(this.vtestigo1=!1)},cambiarvalort2:function(){this.vtestigo2&&(this.vtestigo2=!1)},cambiarvalorsupervisor:function(){this.vsuperior&&(this.vsuperior=!1)},pasarinsertaranexo:function(){var e=this;this.modalImage=!1,this.modaldescarga=!0,setTimeout((function(){e.$router.push("/ConcentradoDTCFacturados"),document.querySelector("body").classList.remove("overflow-hidden")}),3e3)},cancelaranexo:function(){this.modalconfirmacionanexo=!1,this.componentesaenviar=[],this.index=[]},saliranexos:function(){this.modaldescarga=!1,this.modalconfirmacionanexo=!1,this.modalImage=!1,this.modalvalidacionanexo=!1,this.$router.push("/ConcentradoDTCFacturados"),document.querySelector("body").classList.remove("overflow-hidden")},bloquear_boton_anexo_img:function(e){this.blockBotonModal=e}},computed:{restante:function(){return this.comentario.length},double:function(){return 2*this.componentesmalos.length}}},E=b,C=a("2877"),A=Object(C["a"])(E,s,o,!1,null,null,null);t["default"]=A.exports}}]);
//# sourceMappingURL=chunk-2d217a5c.01d11cf7.js.map