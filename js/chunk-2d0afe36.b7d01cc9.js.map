{"version":3,"sources":["webpack:///./src/views/Correctivo/FichaDiagnostico/DiagnosticoDeFalla.vue","webpack:///src/views/Correctivo/FichaDiagnostico/DiagnosticoDeFalla.vue","webpack:///./src/views/Correctivo/FichaDiagnostico/DiagnosticoDeFalla.vue?913d","webpack:///./src/views/Correctivo/FichaDiagnostico/DiagnosticoDeFalla.vue?d5b7"],"names":["render","_vm","this","_c","_self","staticClass","modalImage","class","on","cerrar_modal_imagenes","attrs","undefined","datosHeader","referenceNumber","bloquear_boton_diagnostioc_img","blockBotonModal","$event","enviar_header_diagnostico","_v","_e","reporteInsertado","actualizar_header","$route","params","tipoVista","botonEditCreate","type","modalLoading","staticRenderFns","name","components","HeaderFalla","ImagenesFichaDiagnostico","Spinner","data","itemCompletoEdit","beforeMount","methods","value","objHeader","then","title","msg","position","styles","height","width","EventBus","insertar_diagnostico_falla","flagInsert","squareId","diagnosisDate","start","end","sinisterNumber","failureNumber","userId","failureDescription","failureDiagnosis","causeFailure","adminSquareId","updateFlag","newCarril","borrarDatos","carrilesInsertDiagnostic","setTimeout","ServiceReporte","path","query","referenciaDtc","referenceNumberFinishDiagnostic","catch","console","component"],"mappings":"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CAC,8CACAC,0CACAC,gBACAC,qDACAC,mDACAC,yCACAC,gBACAC,cAEA,sHACArB,MAAA,WACA,0DACA,MACA,+IACAA,MAAA,WACA,kBACA,mBACAC,YACAlC,oBACAmC,qEACAC,wBACAC,QAAAC,WAAAC,gBAIA,+CACA,SAKA,OAJAgB,uCACAA,iCACAA,qBACAA,eACA,KAEA,0BACAC,eACA,sHACAvB,MAAA,WACAwB,uBACA,sHACAxB,MAAA,WACA,uBAEA,kBACA,uBAIAyB,uBACA,wCACA,kBACA,eACA,gBACAC,oEACA,0DACA,+DACA,mCACA,gBACAC,2BACAC,OAAAlC,mBAAAmC,wBAGA,yBACA,eACAH,oEACA,mCACA,iDACA,gBACAC,2BACAC,OAAAlC,mBAAAmC,gBAAAC,wCAGA,QAEA,yBAEAC,OAAA,WACAC,qBACA,mBACA/B,cACAC,wEACAC,wBACAC,QAAAC,WAAAC,oBAIA,CACA,kBACAoB,uEACA,sCACA,oDACA,mBACAC,2BACAC,OAAAlC,sBAAAmC,gBAAAC,yCCnR0X,I,YCOtXG,EAAY,eACd,EACAzE,EACA4B,GACA,EACA,KACA,KACA,MAIa,aAAA6C,E","file":"js/chunk-2d0afe36.b7d01cc9.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"justify-center\"},[(_vm.modalImage)?_c('div',{staticClass:\"sticky inset-0\",class:{'modal-container': _vm.modalImage}},[(true)?_c('div',{staticClass:\"modalCargarImg sm:mt-34 sm:m-4 md:mt-66 mt-66\"},[_c('span',{staticClass:\"absolute top-0 right-0\",on:{\"click\":_vm.cerrar_modal_imagenes}},[_c('font-awesome-icon',{staticClass:\"h-8 cursor-pointer sm:w-6 sm:h-6 text-blue-800\",attrs:{\"icon\":\"fa-regular fa-circle-xmark\"}})],1),_c('div',{staticClass:\"justify-center text-center block\"},[_c('ImagenesFichaDiagnostico',{attrs:{\"reporteDataInsertada\":true,\"tipo\":'Diagnostico',\"referenceNumber\":_vm.datosHeader.referenceNumber != undefined ? _vm.datosHeader.referenceNumber : ''},on:{\"bloquear-boton-diagnostico\":_vm.bloquear_boton_diagnostioc_img}}),_c('button',{staticClass:\"botonIconCrear mt-6\",class:{'bg-gray-300 hover:text-black border-black hover:border-black cursor-not-allowed opacity-50': _vm.blockBotonModal, 'hover:bg-gray-300 hove:border-black': _vm.blockBotonModal },attrs:{\"disabled\":_vm.blockBotonModal},on:{\"click\":function($event){return _vm.enviar_header_diagnostico(false)}}},[_c('font-awesome-icon',{staticClass:\"mr-2 text-green-800 h-8\",attrs:{\"icon\":\"fa-solid fa-file-circle-plus\"}}),_c('span',[_vm._v(\"Generar Diagnóstico\")])],1)],1)]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"grid gap-4 grid-cols-1 py-3 px-3 sm:-ml-2 sm:px-2\"},[_c('div',{staticClass:\"mt-1 mb-16 sm:block sm:p-1 sm:pr-6 border sm:m-1 shadow-md grid grid-cols sm:mb-20\"},[_c('h1',{staticClass:\"text-black text-center -ml-30 text-4xl mt-3 mb-1 sm:mb-1 sm:mx-auto sm:text-2xl md:mx-auto xl:mx-auto font-titulo font-bold\"},[_vm._v(\"Diagnóstico de Falla\")]),_c('HeaderFalla',{attrs:{\"tipo\":'DIAG',\"reporteInsertado\":_vm.reporteInsertado},on:{\"actualizar-header\":_vm.actualizar_header}}),((_vm.$route.params.tipoVista == 'Editar' || _vm.botonEditCreate == false))?_c('ImagenesFichaDiagnostico',{attrs:{\"reporteDataInsertada\":true,\"tipo\":_vm.type,\"referenceNumber\":_vm.datosHeader.referenceNumber != undefined ? _vm.datosHeader.referenceNumber : ''}}):_vm._e(),_c('div',{staticClass:\"mb-5 -mt-10 ml-77 sm:mb-6 sm:mx-6 sm:-mt-16 md:mx-auto md:mb-18 lg:mx-auto xl:mx-auto\"},[(_vm.$route.params.tipoVista == 'Crear' && _vm.botonEditCreate == true)?_c('div',[(!_vm.modalImage)?_c('button',{staticClass:\"botonIconCrear\",on:{\"click\":function($event){return _vm.enviar_header_diagnostico(true)}}},[_c('font-awesome-icon',{staticClass:\"mr-2 text-green-800 h-8\",attrs:{\"icon\":\"fa-solid fa-file-circle-plus\"}}),_c('span',[_vm._v(\"Enviar Información del Diagnóstico\")])],1):_vm._e()]):_c('div',[_c('button',{staticClass:\"botonIconActualizar sm:mt-12\",on:{\"click\":function($event){return _vm.enviar_header_diagnostico(true)}}},[_c('font-awesome-icon',{staticClass:\"mr-2 text-yellow-600 h-8\",attrs:{\"icon\":\"fa-solid fa-file-pen\"}}),_c('span',[_vm._v(\"Actualizar Diagnóstico\")])],1)])]),_c('Spinner',{attrs:{\"modalLoading\":_vm.modalLoading}})],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>        \r\n        <div class=\"justify-center\">       \r\n    <!--/////////////////////////////////////////////////////////////////////\r\n        ////                     MODAL IMAGENES                        ///// \r\n        ////////////////////////////////////////////////////////////////////-->\r\n        <div class=\"sticky inset-0\" v-if=\"modalImage\"  :class=\"{'modal-container': modalImage}\">\r\n            <div v-if=\"true\" class=\"modalCargarImg sm:mt-34 sm:m-4 md:mt-66 mt-66\">          \r\n                <span @click=\"cerrar_modal_imagenes\" class=\"absolute  top-0 right-0\">\r\n                    <!-- <img  src=\"@/assets/img/close.png\" class=\" w-8 cursor-pointer sm:w-6 sm:h-6\" /> -->\r\n                    <font-awesome-icon icon=\"fa-regular fa-circle-xmark\" class=\"h-8 cursor-pointer sm:w-6 sm:h-6 text-blue-800\"/>\r\n                </span> \r\n                <div class=\"justify-center text-center block\">            \r\n                    <!-- /////////////////////////////////////////////////////////////////////\r\n                    ////                         IMAGENES                             ////\r\n                    ///////////////////////////////////////////////////////////////////// -->\r\n                    <ImagenesFichaDiagnostico @bloquear-boton-diagnostico=\"bloquear_boton_diagnostioc_img\" :reporteDataInsertada=\"true\" :tipo=\"'Diagnostico'\" :referenceNumber=\"datosHeader.referenceNumber != undefined ? datosHeader.referenceNumber : ''\"></ImagenesFichaDiagnostico>\r\n                    <button @click=\"enviar_header_diagnostico(false)\" :disabled=\"blockBotonModal\" class=\"botonIconCrear mt-6\" :class=\"{'bg-gray-300 hover:text-black border-black hover:border-black cursor-not-allowed opacity-50': blockBotonModal, 'hover:bg-gray-300 hove:border-black': blockBotonModal }\">\r\n                        <!-- <img src=\"../../../assets/img/add.png\" class=\"mr-2\" width=\"35\" height=\"35\" /> -->\r\n                        <font-awesome-icon icon=\"fa-solid fa-file-circle-plus\" class=\"mr-2 text-green-800 h-8\"/>\r\n                        <span>Generar Diagnóstico</span>\r\n                    </button>  \r\n                </div>\r\n            </div>\r\n        </div>\r\n            <div class=\"grid gap-4 grid-cols-1 py-3 px-3 sm:-ml-2 sm:px-2\">      \r\n                <div class=\"mt-1  mb-16 sm:block sm:p-1 sm:pr-6 border sm:m-1 shadow-md grid grid-cols sm:mb-20\">\r\n                    <h1 class=\"text-black text-center -ml-30 text-4xl mt-3 mb-1 sm:mb-1 sm:mx-auto sm:text-2xl md:mx-auto xl:mx-auto font-titulo font-bold\">Diagnóstico de Falla</h1>        \r\n                    <!--/////////////////////////////////////////////////////////////////////\r\n                    /////                       DECSRIPCION                             ////\r\n                    ////////////////////////////////////////////////////////////////////-->                \r\n                    <HeaderFalla :tipo=\"'DIAG'\" :reporteInsertado=\"reporteInsertado\" @actualizar-header=\"actualizar_header\"></HeaderFalla>                      \r\n                    <!-- /////////////////////////////////////////////////////////////////////\r\n                    ////                         IMAGENES                             ////\r\n                    ///////////////////////////////////////////////////////////////////// -->\r\n                    <ImagenesFichaDiagnostico v-if=\"($route.params.tipoVista == 'Editar' || botonEditCreate == false)\" :reporteDataInsertada=\"true\" :tipo=\"type\" :referenceNumber=\"datosHeader.referenceNumber != undefined ? datosHeader.referenceNumber : ''\"></ImagenesFichaDiagnostico>       \r\n                    <!--/////////////////////////////////////////////////////////////////////\r\n                    /////                           BOTONES                             ////\r\n                    ////////////////////////////////////////////////////////////////////--> \r\n                    <div class=\"mb-5 -mt-10 ml-77 sm:mb-6 sm:mx-6 sm:-mt-16 md:mx-auto md:mb-18 lg:mx-auto xl:mx-auto\">\r\n                        <div v-if=\"$route.params.tipoVista == 'Crear' && botonEditCreate == true\">                            \r\n                            <button @click=\"enviar_header_diagnostico(true)\" class=\"botonIconCrear\" v-if=\"!modalImage\">\r\n                                <!-- <img src=\"../../../assets/img/add.png\" class=\"mr-2\" width=\"35\" height=\"35\" /> -->\r\n                                <font-awesome-icon icon=\"fa-solid fa-file-circle-plus\" class=\"mr-2 text-green-800 h-8\"/>\r\n                                <span>Enviar Información del Diagnóstico</span>\r\n                            </button>                                                                                                         \r\n                        </div>\r\n                        <div v-else>\r\n                            <button @click=\"enviar_header_diagnostico(true)\" class=\"botonIconActualizar sm:mt-12\">\r\n                                <!-- <img src=\"../../../assets/img/documento.png\" class=\"mr-2\" width=\"35\" height=\"35\" /> -->\r\n                                <font-awesome-icon icon=\"fa-solid fa-file-pen\" class=\"mr-2 text-yellow-600 h-8\"/>\r\n                                <span>Actualizar Diagnóstico</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>   \r\n                    <!--/////////////////////////////////////////////////////////////////////\r\n                    /////                           SPINNER                             ////\r\n                    ////////////////////////////////////////////////////////////////////--> \r\n                    <Spinner :modalLoading=\"modalLoading\"/>\r\n                </div>  \r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderFalla from '../../../components/Header/CrearHeaderFalla';\r\nimport ServiceReporte from '../../../services/ReportesPDFService'\r\nimport ImagenesFichaDiagnostico from '../../../components/ImagenesGenericas'\r\nimport Spinner from '../../../components/Sppiner.vue'\r\nimport EventBus from '../../../services/EventBus'\r\nimport moment from 'moment'\r\nconst API = process.env.VUE_APP_URL_API_PRODUCCION\r\nexport default {\r\n    name: \"Diagnostico\",\r\n    components: {        \r\n        HeaderFalla,\r\n        ImagenesFichaDiagnostico,\r\n        Spinner\r\n    }, \r\n    ///////////////////////////////////////////////////////////////////////\r\n    ////                      DATA                                    ////\r\n    /////////////////////////////////////////////////////////////////////\r\n    data (){\r\n        return{    \r\n            datosHeader: {},\r\n            itemCompletoEdit: {},\r\n            type: 'Diagnostico',\r\n            reporteInsertado: false,\r\n            modalImage: false,\r\n            botonEditCreate: true,\r\n            blockBotonModal: false,\r\n            modalLoading:false\r\n        }\r\n    },\r\n    beforeMount(){\r\n       \r\n        this.$store.dispatch('Login/BUSCAR_ADMIN_PLAZA')\r\n        if(this.$route.params.tipoVista == 'Editar'){            \r\n            this.itemCompletoEdit = this.$route.query.item\r\n            this.reporteInsertado = true\r\n            this.botonEditCreate = false\r\n        }\r\n    },\r\n/////////////////////////////////////////////////////////////////////\r\n////        {}                  METODOS                           ////\r\n/////////////////////////////////////////////////////////////////////\r\nmethods:{\r\n    bloquear_boton_diagnostioc_img(value){\r\n        this.blockBotonModal = value\r\n    },\r\n    actualizar_header(objHeader){     \r\n        this.datosHeader = objHeader.header\r\n        if(objHeader.value == false){  \r\n            this.modalLoading = true             \r\n            this.$http.get(`${API}/DiagnosticoFalla/Images/GetPaths/${objHeader.header.referenceNumber.split('-')[0]}/${objHeader.header.referenceNumber}`)            \r\n                .then((response) => {                    \r\n                    if(response.data.length > 0){\r\n                        if(objHeader.crear)\r\n                            this.insertar_diagnostico_falla(objHeader.value)\r\n                            this.modalLoading = false  \r\n                    }  \r\n                    else{\r\n                        this.$notify.warning({\r\n                            title: \"Ops!!\",\r\n                            class:\"font-titulo\",\r\n                            msg: \"SE NECESITA MINIMO UNA FOTO.\",\r\n                            position: \"bottom right\",\r\n                            styles: { height: 100, width: 500 },\r\n                        });\r\n                    } \r\n                })             \r\n        }\r\n        else {\r\n            if(objHeader.crear){\r\n                this.modalLoading = true  \r\n                if(this.botonEditCreate == false){\r\n                    this.$http.get(`${API}/DiagnosticoFalla/Images/GetPaths/${objHeader.header.referenceNumber.split('-')[0]}/${objHeader.header.referenceNumber}`)            \r\n                        .then((response) => {             \r\n                            if(response.data.length > 0){                                \r\n                                this.insertar_diagnostico_falla(objHeader.value)\r\n                                this.modalLoading = false  \r\n                            }  \r\n                            else{\r\n                                this.$notify.warning({\r\n                                    title: \"Ops!!\",\r\n                                    class:\"font-titulo\",\r\n                                    msg: \"SE NECESITA MINIMO UNA FOTO.\",\r\n                                    position: \"bottom right\",\r\n                                    styles: { height: 100, width: 500 },\r\n                                });\r\n                            } \r\n                        })    \r\n                }\r\n                else{\r\n                    this.insertar_diagnostico_falla(objHeader.value)\r\n                }                \r\n            }\r\n        }\r\n    },\r\n    enviar_header_diagnostico(value){      \r\n        //Manda a llamar a la funcion en CrearHeaderFalla     \r\n        EventBus.$emit('validar_header_diagnostico', value)\r\n    },\r\n    cerrar_modal_imagenes(){\r\n        this.modalImage = false\r\n        this.botonEditCreate = false\r\n    },\r\n    insertar_diagnostico_falla(value){                \r\n        if(value){\r\n            let userIdPlaza = this.$store.getters['Login/GET_USEER_ID_PLAZA_ID']\r\n            let administradorId = this.$store.state.Login.plazaSelecionada.administradorId\r\n            let flagInsert = this.$route.params.tipoVista == 'Editar' ? 0 : 1\r\n            flagInsert = this.botonEditCreate == false ? 0 : 1\r\n            //Fecha nuevo Formato\r\n            let fechaInicioTime = moment(this.datosHeader.horaInicio).format('DD-MM-YYYY HH:mm:ss');\r\n            let fechaFinTime = moment(this.datosHeader.horaFin).format('DD-MM-YYYY HH:mm:ss');\r\n            let objDiagnostico = {\r\n                referenceNumber: this.datosHeader.referenceNumber,\r\n                squareId: userIdPlaza.numPlaza,\r\n                diagnosisDate: this.datosHeader.fechaDiagnostico,\r\n                start: fechaInicioTime,\r\n                end: fechaFinTime,\r\n                sinisterNumber: this.datosHeader.numeroReporte,\r\n                failureNumber: this.datosHeader.folioFalla,\r\n                userId: userIdPlaza.idUser,\r\n                failureDescription: this.datosHeader.descripcionFalla,\r\n                failureDiagnosis: this.datosHeader.diagnosticoFalla,\r\n                causeFailure: this.datosHeader.causaFalla,\r\n                adminSquareId: administradorId,\r\n                updateFlag: flagInsert // 1 -> Insertar || 0 -> editar\r\n            }                  \r\n            this.$http.post(`${API}/DiagnosticoFalla/InsertDiagnosticoDeFalla/${objDiagnostico.referenceNumber.split('-')[0]}`, objDiagnostico)\r\n                .then(() => { \r\n                    let referenceDtcFinish = this.$route.query.referenceNumberFinishDiagnostic \r\n                    if(referenceDtcFinish != undefined){                                    \r\n                        this.$http.put(`${API}/DtcData/UpdateDtcDFReference/${objDiagnostico.referenceNumber.split('-')[0]}/${referenceDtcFinish}/${objDiagnostico.referenceNumber}`)\r\n                            .then(() => { \r\n                                this.modalLoading = false                               \r\n                                this.$notify.success({\r\n                                    title: \"Ok!\",\r\n                                    class: \"font-titulo\",\r\n                                    msg: `SE INSERTO EL DIAGNOSTICO AL DTC CON REFERENCIA ${referenceDtcFinish}.`,\r\n                                    position: \"bottom right\",\r\n                                    styles: { height: 100, width: 500 },\r\n                                });\r\n                            })\r\n                    }               \r\n                    let carrilesInsertDiagnostic = this.datosHeader.ubicacion.map(carril => {\r\n                        let newCarril = {}\r\n                        newCarril[\"referenceNumber\"] = objDiagnostico.referenceNumber\r\n                        newCarril[\"capuLaneNum\"] = carril.capufeLaneNum\r\n                        newCarril[\"idGare\"] = carril.idGare\r\n                        newCarril[\"addFlag\"] = 1 // 1 -> Insertar || 0 -> Borrar\r\n                        return newCarril\r\n                    })       \r\n                    let borrarDatos = { ...carrilesInsertDiagnostic[0] }\r\n                    borrarDatos[\"addFlag\"] = 0                    \r\n                    this.$http.post(`${API}/DiagnosticoFalla/FichaTecnicaDiagnosticoLane/${objDiagnostico.referenceNumber.split('-')[0]}`, borrarDatos)\r\n                    .then(() =>{                        \r\n                        carrilesInsertDiagnostic.forEach(carril => {                                                     \r\n                            this.$http.post(`${API}/DiagnosticoFalla/FichaTecnicaDiagnosticoLane/${objDiagnostico.referenceNumber.split('-')[0]}`, carril)\r\n                                .then(() => {                               \r\n                                    if(this.botonEditCreate != false)\r\n                                    {\r\n                                        this.modalLoading = false   \r\n                                        this.modalImage = true\r\n                                    }                                        \r\n                                })                                 \r\n                        }); \r\n                        setTimeout(() => {      \r\n                            if(this.$route.params.tipoVista == 'Editar'){\r\n                                this.modalLoading = true\r\n                                this.type = 'Ficha' \r\n                                this.modalImage = false\r\n                                ServiceReporte.generar_pdf_diagnostico_falla(this.datosHeader.referenceNumber)      \r\n                                this.datosHeader[\"tipoFalla\"] = this.itemCompletoEdit.typeFaultId \r\n                                this.datosHeader[\"solucionFalla\"] = this.itemCompletoEdit.intervention             \r\n                                let referenciaDtc = this.$route.query.referenciaDtc                                \r\n                                this.$router.push({\r\n                                    path: 'FichaTecnicaDeFalla',\r\n                                    query: { data: this.datosHeader, referenciaDtc }\r\n                                }) \r\n                            }  \r\n                            else if(this.botonEditCreate == false){\r\n                                this.type = 'FICHA' \r\n                                ServiceReporte.generar_pdf_diagnostico_falla(this.datosHeader.referenceNumber)      \r\n                                let referenciaDtc = this.$route.query.referenciaDtc     \r\n                                let referenceDtcFinish = this.$route.query.referenceNumberFinishDiagnostic                                    \r\n                                this.$router.push({\r\n                                    path: 'FichaTecnicaDeFalla',\r\n                                    query: { data: this.datosHeader, referenciaDtc, referenceNumberFinishDiagnostic: referenceDtcFinish }\r\n                                }) \r\n                            }\r\n                        },2000)\r\n                    })                                  \r\n                    this.reporteInsertado = true                                                                       \r\n                })\r\n                .catch(() => {   \r\n                    console.log('catch');    \r\n                    this.$notify.warning({\r\n                        title: \"Ops!!\",\r\n                        msg: \"NO SE PUDO INSERTAR EL DIAGNOSTICO, PORFAVOR VERIFIQUE SUS DATOS.\",\r\n                        position: \"bottom right\",\r\n                        styles: { height: 100, width: 500 },\r\n                    });\r\n                })                \r\n        }        \r\n        else{\r\n            this.type = 'FICHA' \r\n            ServiceReporte.generar_pdf_diagnostico_falla(this.datosHeader.referenceNumber)      \r\n            let referenciaDtc = this.$route.query.referenciaDtc  \r\n            let referenceDtcFinish = this.$route.query.referenceNumberFinishDiagnostic          \r\n            this.$router.push({\r\n                path: 'FichaTecnicaDeFalla',\r\n                query: { data: this.datosHeader, referenciaDtc, referenceNumberFinishDiagnostic: referenceDtcFinish }\r\n            }) \r\n        }       \r\n    }\r\n},\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagnosticoDeFalla.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiagnosticoDeFalla.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DiagnosticoDeFalla.vue?vue&type=template&id=960f6446&\"\nimport script from \"./DiagnosticoDeFalla.vue?vue&type=script&lang=js&\"\nexport * from \"./DiagnosticoDeFalla.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}